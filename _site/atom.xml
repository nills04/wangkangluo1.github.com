<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>saberma的博客</title>
  <link href="http://saberma.me/atom.xml" rel="self"/>
  <link href="http://saberma.me/"/>
  <updated>2011-09-16T19:19:48+08:00</updated>
  <id>http://saberma.me/</id>
  <author>
    <name>saberma</name>
    <email>mahb45@gmail.com</email>
  </author>
  
    <entry>
      <title>My hosts</title>
      <link href="http://saberma.me/other/2011/09/10/my-hosts.html"/>
      <updated>2011-09-10T00:00:00+08:00</updated>
      <id>http://saberma.me/other/2011/09/10/my-hosts</id>
      <content type="html">&lt;h2&gt;My hosts&lt;/h2&gt;
&lt;p&gt;127.0.0.1       localhost&lt;br /&gt;
127.0.1.1       e-100464&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;The following lines are desirable for IPv6 capable hosts&lt;br /&gt;
::1     localhost ip6-localhost ip6-loopback&lt;br /&gt;
fe00::0 ip6-localnet&lt;br /&gt;
ff00::0 ip6-mcastprefix&lt;br /&gt;
ff02::1 ip6-allnodes&lt;br /&gt;
ff02::2 ip6-allrouters&lt;br /&gt;
ff02::3 ip6-allhosts&lt;br /&gt;
#&lt;span class=&quot;caps&quot;&gt;NTV&lt;/span&gt;&lt;br /&gt;
0.0.0.0 a.cctv.com&lt;br /&gt;
0.0.0.0 a.cntv.cn&lt;br /&gt;
0.0.0.0 ad.cctv.com&lt;br /&gt;
0.0.0.0 d.cntv.cn&lt;br /&gt;
0.0.0.0 adguanggao.eee114.com&lt;br /&gt;
0.0.0.0 cctv.adsunion.com&lt;br /&gt;
#我乐网&lt;br /&gt;
0.0.0.0 acs.56.com&lt;br /&gt;
0.0.0.0 acs.agent.56.com&lt;br /&gt;
0.0.0.0 acs.agent.v-56.com&lt;br /&gt;
0.0.0.0 bill.agent.56.com&lt;br /&gt;
0.0.0.0 bill.agent.v-56.com&lt;br /&gt;
0.0.0.0 stat.56.com&lt;br /&gt;
0.0.0.0 stat2.corp.56.com&lt;br /&gt;
0.0.0.0 union.56.com&lt;br /&gt;
0.0.0.0 uvimage.56.com&lt;br /&gt;
0.0.0.0 v16.56.com&lt;br /&gt;
#6间房&lt;br /&gt;
0.0.0.0 pole.6rooms.com&lt;br /&gt;
0.0.0.0 shrek.6.cn&lt;br /&gt;
0.0.0.0 simba.6.cn&lt;br /&gt;
0.0.0.0 union.6.cn&lt;br /&gt;
#优酷网&lt;br /&gt;
0.0.0.0 atm.youku.com&lt;br /&gt;
0.0.0.0 Fvid.atm.youku.com&lt;br /&gt;
0.0.0.0 html.atm.youku.com&lt;br /&gt;
0.0.0.0 lstat.youku.com&lt;br /&gt;
0.0.0.0 speed.lstat.youku.com&lt;br /&gt;
0.0.0.0 stat.youku.com&lt;br /&gt;
0.0.0.0 static.lstat.youku.com&lt;br /&gt;
0.0.0.0 urchin.lstat.youku.com&lt;br /&gt;
0.0.0.0 valb.atm.youku.com&lt;br /&gt;
0.0.0.0 valc.atm.youku.com&lt;br /&gt;
0.0.0.0 valf.atm.youku.com&lt;br /&gt;
0.0.0.0 valo.atm.youku.com&lt;br /&gt;
0.0.0.0 valp.atm.youku.com&lt;br /&gt;
0.0.0.0 vid.atm.youku.com&lt;br /&gt;
0.0.0.0 walp.atm.youku.com&lt;br /&gt;
#土豆网&lt;br /&gt;
0.0.0.0 adextensioncontrol.tudou.com&lt;br /&gt;
0.0.0.0 adplay.tudou.com&lt;br /&gt;
0.0.0.0 iwstat.tudou.com&lt;br /&gt;
0.0.0.0 nstat.tudou.com&lt;br /&gt;
0.0.0.0 stat.tudou.com&lt;br /&gt;
0.0.0.0 stats.tudou.com&lt;br /&gt;
0.0.0.0 tdap.tudou.com&lt;br /&gt;
0.0.0.0 tdcm.tudou.com&lt;br /&gt;
#酷6网&lt;br /&gt;
0.0.0.0 1.allyes.com.cn&lt;br /&gt;
0.0.0.0 analytics.ku6.com&lt;br /&gt;
0.0.0.0 gug.ku6cdn.com&lt;br /&gt;
0.0.0.0 ku6.allyes.com&lt;br /&gt;
0.0.0.0 main.gslb.ku6.com&lt;br /&gt;
0.0.0.0 pic.snyu.com&lt;br /&gt;
0.0.0.0 pq.stat.ku6.com&lt;br /&gt;
0.0.0.0 st.vq.ku6.cn&lt;br /&gt;
0.0.0.0 stat0.888.ku6.com&lt;br /&gt;
0.0.0.0 stat1.888.ku6.com&lt;br /&gt;
0.0.0.0 stat2.888.ku6.com&lt;br /&gt;
0.0.0.0 stat3.888.ku6.com&lt;br /&gt;
0.0.0.0 static.ku6.com&lt;br /&gt;
0.0.0.0 v0.stat.ku6.com&lt;br /&gt;
0.0.0.0 v1.stat.ku6.com&lt;br /&gt;
0.0.0.0 v2.stat.ku6.com&lt;br /&gt;
0.0.0.0 v3.stat.ku6.com&lt;br /&gt;
#激动网&lt;br /&gt;
0.0.0.0 86file.megajoy.com&lt;br /&gt;
0.0.0.0 86get.joy.cn&lt;br /&gt;
0.0.0.0 86log.joy.cn&lt;br /&gt;
#天线视频&lt;br /&gt;
0.0.0.0 casting.openv.com&lt;br /&gt;
0.0.0.0 m.openv.tv&lt;br /&gt;
0.0.0.0 uniclick.openv.com&lt;br /&gt;
#Wo318&lt;br /&gt;
0.0.0.0 wo318.k621.com&lt;br /&gt;
#爆米花&lt;br /&gt;
0.0.0.0 union.pomoho.com&lt;br /&gt;
#乐视网&lt;br /&gt;
0.0.0.0 pro.letv.com&lt;br /&gt;
#巨鲸网&lt;br /&gt;
0.0.0.0 t.top100.cn&lt;br /&gt;
#搜狐高清&lt;br /&gt;
0.0.0.0 images.sohu.com&lt;br /&gt;
#pptv&lt;br /&gt;
0.0.0.0 pp2.pptv.com&lt;br /&gt;
#新浪视频&lt;br /&gt;
0.0.0.0 dcads.sina.com.cn&lt;br /&gt;
#奇艺&lt;br /&gt;
0.0.0.0 afp.qiyi.com&lt;br /&gt;
0.0.0.0 focusbaiduafp.allyes.com&lt;br /&gt;
#迅雷看看网页&lt;br /&gt;
0.0.0.0 advstat.xunlei.com&lt;br /&gt;
0.0.0.0 areainfo.xunlei.com&lt;br /&gt;
0.0.0.0 cl.kankan.xunlei.com&lt;br /&gt;
0.0.0.0 client.stat.xunlei.com&lt;br /&gt;
0.0.0.0 gouwu.vip.xunlei.com&lt;br /&gt;
0.0.0.0 hezuo.down.xunlei.com&lt;br /&gt;
0.0.0.0 iimg.xunlei.com&lt;br /&gt;
0.0.0.0 kkpgv.xunlei.com&lt;br /&gt;
0.0.0.0 kkpgv2.xunlei.com&lt;br /&gt;
0.0.0.0 leiyanstatic.xunlei.com&lt;br /&gt;
0.0.0.0 mediapv.xunlei.com&lt;br /&gt;
0.0.0.0 mtips.xunlei.com&lt;br /&gt;
0.0.0.0 p4pstatic.xunlei.com&lt;br /&gt;
0.0.0.0 pv.kankan.stat.xunlei.com&lt;br /&gt;
0.0.0.0 recommend.xunlei.com&lt;br /&gt;
0.0.0.0 res.stat.xunlei.com&lt;br /&gt;
0.0.0.0 stat.xunlei.com&lt;br /&gt;
0.0.0.0 static.soft.xunlei.com&lt;br /&gt;
0.0.0.0 thunderqtypv.union.xunlei.com&lt;br /&gt;
0.0.0.0 tj.xunlei.com&lt;br /&gt;
0.0.0.0 union.xunlei.com&lt;br /&gt;
0.0.0.0 web.stat.xunlei.com&lt;br /&gt;
0.0.0.0 websts.xunlei.com&lt;br /&gt;
0.0.0.0 wy.xunlei.com&lt;br /&gt;
0.0.0.0 xmlconf.client.xunlei.com&lt;br /&gt;
##迅雷看看播放器&lt;br /&gt;
0.0.0.0  server1.adpolestar.net&lt;br /&gt;
0.0.0.0  mcfg.sandai.net&lt;br /&gt;
0.0.0.0  mpv.sandai.net&lt;br /&gt;
0.0.0.0  mtips.xunlei.com&lt;br /&gt;
0.0.0.0  biz5.sandai.net&lt;br /&gt;
0.0.0.0  kkpgv.xunlei.com&lt;br /&gt;
0.0.0.0  statis.kankan.xunlei.com&lt;br /&gt;
0.0.0.0  float.sandai.net&lt;br /&gt;
0.0.0.0  recommend.xunlei.com&lt;br /&gt;
0.0.0.0  cl.kankan.xunlei.com&lt;br /&gt;
0.0.0.0  advstat.xunlei.com&lt;br /&gt;
0.0.0.0  pubstat.sandai.net&lt;br /&gt;
#209.85.147.109 pop.gmail.com&lt;br /&gt;
#209.85.147.109 smtp.gmail.com&lt;br /&gt;
#66.102.7.19 mail.google.com&lt;br /&gt;
#64.233.189.18 mail.google.com&lt;br /&gt;
#64.233.189.19 mail.google.com&lt;br /&gt;
#64.233.189.83 mail.google.com&lt;br /&gt;
#64.233.189.18 www.gmail.com&lt;br /&gt;
#64.233.189.19 www.gmail.com&lt;br /&gt;
#64.233.189.83 www.gmail.com&lt;br /&gt;
#64.233.189.19 googlemail.l.google.com&lt;br /&gt;
#Picasa&lt;br /&gt;
74.125.39.147   picasa.google.com&lt;br /&gt;
74.125.39.91    photos.google.com&lt;br /&gt;
74.125.39.91    picasaweb.google.com&lt;br /&gt;
74.125.39.93    picasaweb.google.com&lt;br /&gt;
74.125.39.136   picasaweb.google.com&lt;br /&gt;
74.125.39.190   picasaweb.google.com&lt;br /&gt;
74.125.39.91    lh0.ggpht.com&lt;br /&gt;
74.125.39.93    lh1.ggpht.com&lt;br /&gt;
74.125.39.136   lh2.ggpht.com&lt;br /&gt;
74.125.39.190   lh3.ggpht.com&lt;br /&gt;
74.125.39.91    lh4.ggpht.com&lt;br /&gt;
74.125.39.93    lh5.ggpht.com&lt;br /&gt;
74.125.39.136   lh6.ggpht.com&lt;br /&gt;
74.125.39.190   lh7.ggpht.com&lt;br /&gt;
209.85.175.100 groups.google.com&lt;br /&gt;
209.85.225.102 groups.google.com&lt;br /&gt;
64.233.189.102 groups.google.com&lt;br /&gt;
64.233.189.100 groups.google.com&lt;br /&gt;
64.233.189.101 groups.google.com&lt;br /&gt;
64.233.189.101 groups.l.google.com&lt;br /&gt;
74.125.227.2 docs.google.com&lt;br /&gt;
74.125.227.2 docs0.google.com&lt;br /&gt;
74.125.227.2 docs1.google.com&lt;br /&gt;
74.125.227.2 docs2.google.com&lt;br /&gt;
74.125.227.2 docs3.google.com&lt;br /&gt;
74.125.227.2 spreadsheets.google.com&lt;br /&gt;
74.125.153.138 spreadsheets.google.com&lt;br /&gt;
74.125.127.139 spreadsheets.google.com&lt;br /&gt;
74.125.153.113 spreadsheets.google.com&lt;br /&gt;
74.125.153.100 spreadsheets.google.com&lt;br /&gt;
74.125.153.102 spreadsheets.google.com&lt;br /&gt;
74.125.153.101 spreadsheets.google.com&lt;br /&gt;
72.14.203.139 spreadsheets1.google.com&lt;br /&gt;
72.14.203.101 spreadsheets1.google.com&lt;br /&gt;
74.125.153.101 spreadsheets.l.google.com&lt;br /&gt;
209.85.175.100 docs.google.com&lt;br /&gt;
209.85.225.101 docs.google.com&lt;br /&gt;
64.233.189.102 docs.google.com&lt;br /&gt;
64.233.189.101 docs.google.com&lt;br /&gt;
64.233.189.100 docs.google.com&lt;br /&gt;
74.125.127.100 services.google.com&lt;br /&gt;
74.125.127.101 calendar.google.com&lt;br /&gt;
209.85.135.101 calendar.google.com&lt;br /&gt;
74.125.127.100 sites.google.com&lt;br /&gt;
209.85.225.104 reader.google.com&lt;br /&gt;
74.125.39.99 chrome.google.com&lt;br /&gt;
74.125.39.99 clients2.google.com&lt;br /&gt;
#74.125.71.102 plus.google.com&lt;br /&gt;
#74.125.71.101 plus.google.com&lt;br /&gt;
#74.125.71.138 plus.google.com&lt;br /&gt;
#74.125.71.139 plus.google.com&lt;br /&gt;
#74.125.71.100 plus.google.com&lt;br /&gt;
#74.125.71.113 plus.google.com&lt;br /&gt;
#74.125.71.132 lh1.googleusercontent.com&lt;br /&gt;
#74.125.71.132 lh2.googleusercontent.com&lt;br /&gt;
#74.125.71.132 lh3.googleusercontent.com&lt;br /&gt;
#74.125.71.132 lh4.googleusercontent.com&lt;br /&gt;
#74.125.71.132 lh5.googleusercontent.com&lt;br /&gt;
#74.125.71.132 lh6.googleusercontent.com&lt;br /&gt;
#148/29&lt;br /&gt;
203.208.46.148 lh1.googleusercontent.com &lt;br /&gt;
203.208.46.148 lh2.googleusercontent.com &lt;br /&gt;
203.208.46.148 lh3.googleusercontent.com &lt;br /&gt;
203.208.46.148 lh4.googleusercontent.com &lt;br /&gt;
203.208.46.148 lh5.googleusercontent.com &lt;br /&gt;
203.208.46.148 lh6.googleusercontent.com &lt;br /&gt;
203.208.46.148 lh7.googleusercontent.com &lt;br /&gt;
203.208.46.148 s1.googleusercontent.com &lt;br /&gt;
203.208.46.148 s2.googleusercontent.com &lt;br /&gt;
203.208.46.148 images1-focus-opensocial.googleusercontent.com &lt;br /&gt;
203.208.46.148 images2-focus-opensocial.googleusercontent.com &lt;br /&gt;
203.208.46.148 images3-focus-opensocial.googleusercontent.com &lt;br /&gt;
203.208.46.148 webcache.googleusercontent.com &lt;br /&gt;
203.208.46.148 picasaweb.google.com &lt;br /&gt;
203.208.46.148 plus.google.com &lt;br /&gt;
203.208.46.29   youtube.com&lt;br /&gt;
203.208.46.29   www.youtube.com&lt;br /&gt;
203.208.46.29   gdata.youtube.com&lt;br /&gt;
203.208.46.29   m.youtube.com&lt;br /&gt;
203.208.46.29   help.youtube.com&lt;br /&gt;
74.125.71.116   upload.youtube.com&lt;br /&gt;
203.208.46.29   accounts.youtube.com&lt;br /&gt;
203.208.46.29   insight.youtube.com&lt;br /&gt;
203.208.46.29   apiblog.youtube.com&lt;br /&gt;
203.208.46.29   clients1.youtube.com&lt;br /&gt;
203.208.46.29   s.youtube.com&lt;br /&gt;
203.208.46.29   s2.youtube.com&lt;br /&gt;
203.208.46.29   s.ytimg.com&lt;br /&gt;
203.208.46.29   i1.ytimg.com&lt;br /&gt;
203.208.46.29   i2.ytimg.com&lt;br /&gt;
203.208.46.29   i3.ytimg.com&lt;br /&gt;
203.208.46.29   i4.ytimg.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v1.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v2.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v3.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v4.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v5.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v6.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v7.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v8.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v9.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v10.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v11.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v12.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v13.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v14.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v15.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v16.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v17.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v18.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v19.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v20.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v21.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v22.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v23.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v24.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v1.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v2.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v3.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v4.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v5.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v6.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v7.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v8.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v9.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v10.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v11.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v12.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v13.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v14.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v15.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v16.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v17.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v18.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v19.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v20.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v21.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v22.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v23.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v24.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v1.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v2.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v3.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v4.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v5.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v6.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v7.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v8.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v9.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v10.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v11.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v12.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v13.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v14.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v15.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v16.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v17.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v18.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v19.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v20.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v21.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v22.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v23.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v24.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v1.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v2.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v3.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v4.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v5.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v6.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v7.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v8.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v9.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v10.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v11.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v12.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v13.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v14.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v15.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v16.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v17.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v18.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v19.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v20.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v21.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v22.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v23.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v24.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v1.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v2.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v3.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v4.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v5.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v6.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v7.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v8.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v9.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v10.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v11.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v12.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v13.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v14.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v15.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v16.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v17.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v18.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v19.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v20.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v21.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v22.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v23.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v24.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v1.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v2.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v3.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v4.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v5.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v6.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v7.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v8.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v9.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v10.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v11.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v12.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v13.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v14.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v15.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v16.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v17.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v18.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v19.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v20.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v21.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v22.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v23.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v24.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v1.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v2.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v3.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v4.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v5.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v6.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v7.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v8.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v9.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v10.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v11.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v12.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v13.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v14.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v15.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v16.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v17.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v18.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v19.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v20.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v21.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v22.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v23.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v24.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v1.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v2.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v3.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v4.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v5.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v6.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v7.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v8.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v9.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v10.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v11.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v12.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v13.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v14.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v15.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v16.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v17.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v18.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v19.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v20.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v21.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v22.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v23.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   o-o.preferred.sjc07s15.v24.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   r1.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r2.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r3.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r4.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r5.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r6.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r7.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r8.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r9.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r10.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r11.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r12.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r13.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r14.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r15.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r16.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r17.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r18.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r19.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r20.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r21.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r22.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r23.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   r24.pek01s01.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v1.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v2.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v3.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v4.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v5.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v6.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v7.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v8.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v9.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v10.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v11.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v12.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v13.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v14.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v15.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v16.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v17.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v18.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v19.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v20.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v21.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v22.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v23.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v24.cache1.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v1.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v2.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v3.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v4.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v5.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v6.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v7.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v8.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v9.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v10.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v11.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v12.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v13.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v14.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v15.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v16.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v17.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v18.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v19.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v20.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v21.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v22.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v23.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v24.cache2.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v1.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v2.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v3.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v4.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v5.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v6.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v7.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v8.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v9.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v10.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v11.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v12.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v13.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v14.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v15.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v16.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v17.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v18.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v19.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v20.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v21.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v22.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v23.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v24.cache3.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v1.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v2.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v3.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v4.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v5.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v6.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v7.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v8.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v9.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v10.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v11.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v12.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v13.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v14.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v15.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v16.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v17.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v18.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v19.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v20.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v21.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v22.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v23.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v24.cache4.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v1.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v2.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v3.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v4.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v5.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v6.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v7.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v8.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v9.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v10.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v11.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v12.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v13.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v14.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v15.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v16.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v17.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v18.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v19.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v20.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v21.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v22.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v23.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v24.cache5.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v1.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v2.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v3.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v4.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v5.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v6.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v7.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v8.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v9.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v10.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v11.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v12.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v13.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v14.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v15.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v16.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v17.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v18.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v19.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v20.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v21.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v22.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v23.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v24.cache6.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v1.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v2.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v3.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v4.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v5.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v6.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v7.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v8.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v9.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v10.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v11.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v12.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v13.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v14.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v15.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v16.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v17.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v18.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v19.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v20.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v21.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v22.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v23.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v24.cache7.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v1.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v2.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v3.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v4.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v5.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v6.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v7.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v8.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v9.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v10.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v11.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v12.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v13.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v14.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v15.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v16.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v17.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v18.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v19.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v20.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v21.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v22.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v23.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   tc.v24.cache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v1.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v2.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v3.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v4.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v5.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v6.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v7.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v8.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v9.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v10.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v11.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v12.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v13.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v14.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v15.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v16.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v17.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v18.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v19.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v20.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v21.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v22.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v23.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v24.lscache1.c.youtube.com&lt;br /&gt;
203.208.46.29   v1.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v2.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v3.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v4.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v5.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v6.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v7.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v8.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v9.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v10.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v11.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v12.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v13.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v14.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v15.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v16.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v17.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v18.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v19.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v20.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v21.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v22.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v23.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v24.lscache2.c.youtube.com&lt;br /&gt;
203.208.46.29   v1.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v2.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v3.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v4.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v5.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v6.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v7.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v8.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v9.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v10.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v11.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v12.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v13.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v14.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v15.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v16.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v17.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v18.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v19.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v20.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v21.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v22.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v23.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v24.lscache3.c.youtube.com&lt;br /&gt;
203.208.46.29   v1.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v2.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v3.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v4.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v5.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v6.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v7.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v8.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v9.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v10.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v11.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v12.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v13.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v14.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v15.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v16.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v17.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v18.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v19.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v20.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v21.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v22.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v23.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v24.lscache4.c.youtube.com&lt;br /&gt;
203.208.46.29   v1.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v2.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v3.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v4.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v5.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v6.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v7.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v8.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v9.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v10.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v11.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v12.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v13.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v14.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v15.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v16.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v17.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v18.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v19.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v20.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v21.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v22.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v23.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v24.lscache5.c.youtube.com&lt;br /&gt;
203.208.46.29   v1.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v2.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v3.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v4.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v5.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v6.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v7.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v8.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v9.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v10.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v11.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v12.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v13.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v14.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v15.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v16.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v17.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v18.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v19.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v20.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v21.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v22.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v23.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v24.lscache6.c.youtube.com&lt;br /&gt;
203.208.46.29   v1.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v2.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v3.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v4.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v5.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v6.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v7.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v8.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v9.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v10.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v11.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v12.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v13.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v14.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v15.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v16.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v17.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v18.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v19.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v20.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v21.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v22.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v23.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v24.lscache7.c.youtube.com&lt;br /&gt;
203.208.46.29   v1.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v2.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v3.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v4.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v5.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v6.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v7.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v8.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v9.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v10.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v11.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v12.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v13.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v14.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v15.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v16.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v17.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v18.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v19.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v20.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v21.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v22.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v23.lscache8.c.youtube.com&lt;br /&gt;
203.208.46.29   v24.lscache8.c.youtube.com&lt;br /&gt;
#twitter&lt;br /&gt;
199.59.148.13 oauth.twitter.com&lt;br /&gt;
199.59.148.13 twitter.com&lt;br /&gt;
199.59.148.13 www.twitter.com&lt;br /&gt;
199.59.148.13 api.twitter.com&lt;br /&gt;
199.59.148.201 search.twitter.com&lt;br /&gt;
199.59.148.139 userstream.twitter.com&lt;br /&gt;
199.59.148.13 ssl.twitter.com&lt;br /&gt;
199.59.148.13 status.twitter.com&lt;br /&gt;
199.59.148.13 assets0.twitter.com&lt;br /&gt;
199.59.148.13 assets1.twitter.com&lt;br /&gt;
199.59.148.13 assets2.twitter.com&lt;br /&gt;
199.59.148.13 assets3.twitter.com&lt;br /&gt;
199.59.148.13 static.twitter.com&lt;br /&gt;
184.29.36.124 platform.twitter.com&lt;br /&gt;
219.76.10.138 platform0.twitter.com&lt;br /&gt;
199.59.148.206 help.twitter.com&lt;br /&gt;
199.59.148.206 support.twitter.com&lt;br /&gt;
209.84.4.102 si0.twimg.com&lt;br /&gt;
209.84.4.102 si1.twimg.com&lt;br /&gt;
209.84.4.102 si2.twimg.com&lt;br /&gt;
209.84.4.102 si3.twimg.com&lt;br /&gt;
209.84.4.102 si4.twimg.com&lt;br /&gt;
209.84.4.102 si5.twimg.com&lt;br /&gt;
#facebook&lt;br /&gt;
69.63.189.16 facebook.com&lt;br /&gt;
69.63.189.16 www.facebook.com&lt;br /&gt;
69.63.181.31 m.facebook.com&lt;br /&gt;
69.63.181.20 login.facebook.com&lt;br /&gt;
69.63.179.70 secure.facebook.com&lt;br /&gt;
66.220.146.18 apps.facebook.com&lt;br /&gt;
69.63.181.31 touch.facebook.com&lt;br /&gt;
118.214.114.110 s-static.ak.facebook.com&lt;br /&gt;
66.220.147.47 api.facebook.com&lt;br /&gt;
69.63.181.16 zh-CN.facebook.com&lt;br /&gt;
202.157.186.28  static.ak.facebook.com&lt;br /&gt;
202.157.186.34 b.static.ak.facebook.com&lt;br /&gt;
69.63.178.57 secure-profile.facebook.com&lt;br /&gt;
69.63.178.57 secure-media-sf2p.facebook.com&lt;br /&gt;
69.63.178.15 ssl.facebook.com&lt;br /&gt;
69.63.190.18 apps.facebook.com&lt;br /&gt;
118.214.190.105 profile.ak.facebook.com&lt;br /&gt;
#Facebook web&lt;br /&gt;
69.63.187.17 fbcdn.net&lt;br /&gt;
97.65.135.139 external.ak.fbcdn.net&lt;br /&gt;
124.155.222.50 vthumb.ak.fbcdn.net&lt;br /&gt;
97.65.135.163 static.ak.fbcdn.net&lt;br /&gt;
97.65.135.163 b.static.ak.fbcdn.net&lt;br /&gt;
202.157.186.34 creative.ak.fbcdn.net&lt;br /&gt;
118.214.190.128 profile.ak.fbcdn.net&lt;br /&gt;
69.63.176.21 s-hprofile-sf2p.fbcdn.net&lt;br /&gt;
125.56.199.9 photos-a.ak.fbcdn.net&lt;br /&gt;
125.56.199.9 photos-b.ak.fbcdn.net&lt;br /&gt;
125.56.199.9 photos-c.ak.fbcdn.net&lt;br /&gt;
125.56.199.9 photos-d.ak.fbcdn.net&lt;br /&gt;
125.56.199.9 photos-e.ak.fbcdn.net&lt;br /&gt;
125.56.199.9 photos-f.ak.fbcdn.net&lt;br /&gt;
125.56.199.9 photos-g.ak.fbcdn.net&lt;br /&gt;
125.56.199.9 photos-h.ak.fbcdn.net&lt;/li&gt;
&lt;/ol&gt;</content>
    </entry>
  
    <entry>
      <title>Git 恢复删除文件</title>
      <link href="http://saberma.me/git/2011/09/10/git-recover-files.html"/>
      <updated>2011-09-10T00:00:00+08:00</updated>
      <id>http://saberma.me/git/2011/09/10/git-recover-files</id>
      <content type="html">&lt;p&gt;git 恢复删除文件&lt;br /&gt;
2010-04-21 02:13&lt;br /&gt;
git 从使用的角度来说，的确没有svn方便&lt;br /&gt;
svn直接update即可恢复，但git pull却显示already up-to-date&lt;br /&gt;
要查看删除的文件： git ls-files –deleted&lt;/p&gt;
&lt;p&gt;恢复则需要从新checkout： git checkout – &lt;deleted_file&gt;&lt;/p&gt;
&lt;p&gt;多个文件同时操作可以使用xargs&lt;br /&gt;
git ls-fies &lt;del&gt;d | xargs git checkout -&lt;/del&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>AMD服务器DIY</title>
      <link href="http://saberma.me/other/2011/08/25/how-to-diy-a-server.html"/>
      <updated>2011-08-25T00:00:00+08:00</updated>
      <id>http://saberma.me/other/2011/08/25/how-to-diy-a-server</id>
      <content type="html">&lt;h2&gt;&lt;span class=&quot;caps&quot;&gt;CPU&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;目前AMD服务器CPU主要有Opteron(皓龙)4000和6000系列，AMD的CPU都带内存控制器，直接与内存交互，而不再通过北桥芯片&lt;br /&gt;
价格差异点在于内核数量、主频及功耗，功耗节能版对服务器领域来说意义不大，而且价格高昂，不考虑(型号后缀为HE低功耗或EE超低功耗)&lt;/p&gt;
&lt;h3&gt;&lt;a href=&quot;http://www.amd.com/cn/products/server/processors/4000-series-platform/Pages/4000-series-platform.aspx&quot;&gt;4000系列&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;核心数量有4核、6核，最高支持DDR3-1333，核心独占一二级缓存，共享三级缓存&lt;br /&gt;
候选表格如下：&lt;/p&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;td&gt;型号&lt;/td&gt;
		&lt;td&gt;内核&lt;/td&gt;
		&lt;td&gt;主频&lt;/td&gt;
		&lt;td&gt;插槽类型  &lt;/td&gt;
		&lt;td&gt;功耗&lt;/td&gt;
		&lt;td&gt;价格&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;4184&lt;/td&gt;
		&lt;td&gt;6   &lt;/td&gt;
		&lt;td&gt;2.8 &lt;/td&gt;
		&lt;td&gt;Socket C32&lt;/td&gt;
		&lt;td&gt;75W &lt;/td&gt;
		&lt;td&gt;3500&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;4180&lt;/td&gt;
		&lt;td&gt;6   &lt;/td&gt;
		&lt;td&gt;2.6 &lt;/td&gt;
		&lt;td&gt;Socket C32&lt;/td&gt;
		&lt;td&gt;75W &lt;/td&gt;
		&lt;td&gt;2500&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;4130&lt;/td&gt;
		&lt;td&gt;4   &lt;/td&gt;
		&lt;td&gt;2.6 &lt;/td&gt;
		&lt;td&gt;Socket C32&lt;/td&gt;
		&lt;td&gt;75W &lt;/td&gt;
		&lt;td&gt;1650&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;4122&lt;/td&gt;
		&lt;td&gt;4   &lt;/td&gt;
		&lt;td&gt;2.2 &lt;/td&gt;
		&lt;td&gt;Socket C32&lt;/td&gt;
		&lt;td&gt;75W &lt;/td&gt;
		&lt;td&gt;1050&lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;初步选用 4180，性价比高&lt;/p&gt;
&lt;h3&gt;&lt;a href=&quot;http://www.amd.com/cn/products/server/processors/6000-series-platform/Pages/6000-series-platform.aspx&quot;&gt;6000系列&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;核心数量有8核、12核，候选表格如下：&lt;/p&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;td&gt;型号&lt;/td&gt;
		&lt;td&gt;内核&lt;/td&gt;
		&lt;td&gt;主频&lt;/td&gt;
		&lt;td&gt;插槽类型  &lt;/td&gt;
		&lt;td&gt;功耗&lt;/td&gt;
		&lt;td&gt;价格&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;6174&lt;/td&gt;
		&lt;td&gt;12  &lt;/td&gt;
		&lt;td&gt;2.2 &lt;/td&gt;
		&lt;td&gt;Socket G34&lt;/td&gt;
		&lt;td&gt;80W &lt;/td&gt;
		&lt;td&gt;8500&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;6172&lt;/td&gt;
		&lt;td&gt;12  &lt;/td&gt;
		&lt;td&gt;2.1 &lt;/td&gt;
		&lt;td&gt;Socket G34&lt;/td&gt;
		&lt;td&gt;80W &lt;/td&gt;
		&lt;td&gt;7500&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;6168&lt;/td&gt;
		&lt;td&gt;12  &lt;/td&gt;
		&lt;td&gt;1.9 &lt;/td&gt;
		&lt;td&gt;Socket G34&lt;/td&gt;
		&lt;td&gt;80W &lt;/td&gt;
		&lt;td&gt;6000&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;6136&lt;/td&gt;
		&lt;td&gt;8   &lt;/td&gt;
		&lt;td&gt;2.4 &lt;/td&gt;
		&lt;td&gt;Socket G34&lt;/td&gt;
		&lt;td&gt;80W &lt;/td&gt;
		&lt;td&gt;5600&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;6134&lt;/td&gt;
		&lt;td&gt;8   &lt;/td&gt;
		&lt;td&gt;2.3 &lt;/td&gt;
		&lt;td&gt;Socket G34&lt;/td&gt;
		&lt;td&gt;80W &lt;/td&gt;
		&lt;td&gt;3890&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;6128&lt;/td&gt;
		&lt;td&gt;8   &lt;/td&gt;
		&lt;td&gt;2.0 &lt;/td&gt;
		&lt;td&gt;Socket G34&lt;/td&gt;
		&lt;td&gt;80W &lt;/td&gt;
		&lt;td&gt;3111&lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;h3&gt;芯片组&lt;/h3&gt;
&lt;p&gt;使用AMD自家的服务器芯片组:北桥SR5690/SR5670/SR5650、南桥SP5100，详见 &lt;a href=&quot;http://www.amd.com/cn/products/server/processors/Pages/amd-platform-specifications.aspx&quot;&gt;AMD平台规范&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;用于高能效云的SR5650芯片组&lt;/li&gt;
	&lt;li&gt;用于可扩展SMB 的SR5670芯片组&lt;/li&gt;
	&lt;li&gt;用于高I/O系统的SR5690&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;主板&lt;/h2&gt;
&lt;p&gt;主要生产商:超微(Supermicro)、泰安(&lt;span class=&quot;caps&quot;&gt;TYAN&lt;/span&gt;)、Intel、华硕&lt;br /&gt;
具体要求:支持SAS硬盘、DDR3(1333MHZ最大内存至少32&lt;br /&gt;
有些主板带iKVM功能(Keyboard,Video,Mouse)，用来实现远程管理功能(&lt;span class=&quot;caps&quot;&gt;KVM&lt;/span&gt; Over IP)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.supermicro.com/c32/AMD_C32.cfm?pg=MOBO&quot;&gt;超微C32系列主板&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.supermicro.com/g34/AMD_G34.cfm?pg=MOBO&quot;&gt;超微G34系列主板&lt;/a&gt;&lt;/p&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;td&gt;型号   &lt;/td&gt;
		&lt;td&gt;最大内存容量                               &lt;/td&gt;
		&lt;td&gt;插槽&lt;/td&gt;
		&lt;td&gt;数量&lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;结构 &lt;/td&gt;
		&lt;td&gt;价格&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;H8DCL-6&lt;/td&gt;
		&lt;td&gt;128GB Registered &lt;span class=&quot;caps&quot;&gt;ECC&lt;/span&gt; or 32GB Unbuffered &lt;span class=&quot;caps&quot;&gt;ECC&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;C32 &lt;/td&gt;
		&lt;td&gt;2   &lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;  &lt;/td&gt;
		&lt;td&gt;$408&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;H8DG6  &lt;/td&gt;
		&lt;td&gt;256GB Registered &lt;span class=&quot;caps&quot;&gt;ECC&lt;/span&gt; or 64GB Unbuffered &lt;span class=&quot;caps&quot;&gt;ECC&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;G34 &lt;/td&gt;
		&lt;td&gt;2   &lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;E-&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;$573&lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;&lt;a href=&quot;http://www.supermicro.com/wheretobuy/asia.cfm?rgn=133&quot;&gt;代理商&lt;/a&gt;&lt;br /&gt;
海红微电子,深圳市福田区天安数码城创新科技广场A座1803室,0755-83434282&lt;br /&gt;
星宏宝博,深圳市福田区福华一路98号卓越606B-608B,0755-83005009,13823305008,覃碧玉&lt;/p&gt;
&lt;h3&gt;&lt;a href=&quot;http://www.tyan.com.cn/product_boards2.aspx&quot;&gt;泰安主板&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://www.tyan.com.cn/product_boards2_list_socket.aspx?cpuid=4&amp;amp;socketid=24&amp;amp;chipsetid=all&amp;amp;socketnum=all&amp;amp;formfactor=all&quot;&gt;泰安C32系列主板&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.tyan.com.cn/product_boards2_list_socket.aspx?cpuid=4&amp;amp;socketid=25&amp;amp;chipsetid=all&amp;amp;socketnum=all&amp;amp;formfactor=all&quot;&gt;泰安G34系列主板&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在不确定选择哪一个主板的情况下，可以先看主板的编号；要求主板支持SAS，则编号一定要带W字母，比如:WAGM4NRF型号是支持SAS的，而AGM4NRF不支持，具体编号意义可查看 &lt;a href=&quot;http://www.tyan.com.cn/tech/product_matrix.aspx&quot;&gt;产品矩阵&lt;/a&gt; 的底端说明&lt;br /&gt;
所以型号一定要包含WGNR(G=Onboard Gf / N=&lt;span class=&quot;caps&quot;&gt;LAN&lt;/span&gt; / R= &lt;span class=&quot;caps&quot;&gt;RAID&lt;/span&gt; / W= &lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;候选表格，泰安主板AMD系列在国内找不到网上报价，先从 &lt;a href=&quot;newegg.com&quot;&gt;newegg.com&lt;/a&gt; &lt;a href=&quot;http://www.newegg.ca/Product/Productcompare.aspx?Submit=ENE&amp;amp;N=100007628%2050001424%20600008002&amp;amp;IsNodeId=1&amp;amp;bop=And&amp;amp;CompareItemList=302|13-151-227^13-151-227-TS%2C13-151-225^13-151-225-TS%2C13-151-215^13-151-215-TS%2C13-151-214^13-151-214-TS%2C13-151-220^13-151-220-TS&quot;&gt;比较价格&lt;/a&gt;&lt;/p&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;td&gt;型号          &lt;/td&gt;
		&lt;td&gt;最大内存容量         &lt;/td&gt;
		&lt;td&gt;插槽&lt;/td&gt;
		&lt;td&gt;数量&lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt;   &lt;/td&gt;
		&lt;td&gt;主板结构    &lt;/td&gt;
		&lt;td&gt;价格&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;S8010WGM2NR   &lt;/td&gt;
		&lt;td&gt;64GB &lt;span class=&quot;caps&quot;&gt;RDIMM&lt;/span&gt;/16GB &lt;span class=&quot;caps&quot;&gt;UDIMM&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;C32 &lt;/td&gt;
		&lt;td&gt;1   &lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt;   &lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;         &lt;/td&gt;
		&lt;td&gt;$365&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;S8225WAGM4NRF &lt;/td&gt;
		&lt;td&gt;64GB &lt;span class=&quot;caps&quot;&gt;RDIMM&lt;/span&gt;/32GB &lt;span class=&quot;caps&quot;&gt;UDIMM&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;C32 &lt;/td&gt;
		&lt;td&gt;2   &lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt;   &lt;/td&gt;
		&lt;td&gt;Extended &lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;$615&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;S8226WGM3NR   &lt;/td&gt;
		&lt;td&gt;96GB                 &lt;/td&gt;
		&lt;td&gt;C32 &lt;/td&gt;
		&lt;td&gt;2   &lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt;   &lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;SSI&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;EEB&lt;/span&gt;     &lt;/td&gt;
		&lt;td&gt;$560&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;S8230WGM4NR-LE&lt;/td&gt;
		&lt;td&gt;128GB                &lt;/td&gt;
		&lt;td&gt;G34 &lt;/td&gt;
		&lt;td&gt;2   &lt;/td&gt;
		&lt;td&gt;SAS2.0&lt;/td&gt;
		&lt;td&gt;Extended &lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;$550&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;S8230WGM4NR   &lt;/td&gt;
		&lt;td&gt;128GB                &lt;/td&gt;
		&lt;td&gt;G34 &lt;/td&gt;
		&lt;td&gt;2   &lt;/td&gt;
		&lt;td&gt;SAS2.0&lt;/td&gt;
		&lt;td&gt;Extended &lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;$580&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;S8236WGM3NR   &lt;/td&gt;
		&lt;td&gt;128GB                &lt;/td&gt;
		&lt;td&gt;G34 &lt;/td&gt;
		&lt;td&gt;2   &lt;/td&gt;
		&lt;td&gt;SAS2.0&lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;SSI&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;EEB&lt;/span&gt;     &lt;/td&gt;
		&lt;td&gt;$570&lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;&lt;a href=&quot;http://www.tyan.com.cn/wtb_asia.aspx#CHINA&quot;&gt;华南区代理商&lt;/a&gt;&lt;br /&gt;
深圳市亿时空科技有限公司,深圳市福田区华强北路宝华大厦A629室,0755-88863168,孙先生&lt;/p&gt;
&lt;h2&gt;内存&lt;/h2&gt;
&lt;p&gt;以下应用技术也是影响内存价格的重要因素&lt;/p&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;td&gt;Unbuffered Ecc &lt;span class=&quot;caps&quot;&gt;DIMM&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;低端服务器工作站内存&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;Registered &lt;span class=&quot;caps&quot;&gt;DIMM&lt;/span&gt;    &lt;/td&gt;
		&lt;td&gt;高端服务器工作站内存&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;Fully Buffered &lt;span class=&quot;caps&quot;&gt;DIMM&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;全缓冲服务器内存    &lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;在产品报价上看到产品名称带FB的，一般都为全缓冲服务器内存，暂不需要考虑此类产品&lt;/p&gt;
&lt;p&gt;要带ECC纠错技术，通过IC颗粒的分布可以看出是否带有ECC功能，ECC比普通NO ECC内存多1颗IC芯片&lt;br /&gt;
买DDR3的，电压低至1.5v，数据传输率(800/1066/1333/1600)&lt;/p&gt;
&lt;p&gt;为了让双通道技术发挥作用，假如需要的内存总量为8G的，则买两条4G的，分别插入 &lt;strong&gt;同颜色&lt;/strong&gt; 的DIMM&lt;/p&gt;
&lt;p&gt;候选表格如下:&lt;/p&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;td&gt;型号                     &lt;/td&gt;
		&lt;td&gt;价格&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;Ramax &lt;span class=&quot;caps&quot;&gt;REG&lt;/span&gt;/DDR3/1333/4G   &lt;/td&gt;
		&lt;td&gt;959 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;三星8GB DDR3 1333 &lt;span class=&quot;caps&quot;&gt;REG&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;ECC&lt;/span&gt;&lt;/td&gt;
		&lt;td&gt;799 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;三星4GB DDR3 1333 &lt;span class=&quot;caps&quot;&gt;ECC&lt;/span&gt;    &lt;/td&gt;
		&lt;td&gt;350 &lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;h2&gt;硬盘&lt;/h2&gt;
&lt;p&gt;最大的选择点在于是选择传统的机械硬盘还是SSD固态硬盘，后者在IOPS上有极大地物理优势，但价格较高&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;机械硬盘HDD&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;这里只考虑希捷的硬盘，选用SAS2.0（串行连接SCSI）6Gb/s接口；2.5英寸的Savvio 15K系列没有货源；只能选择3.5英寸&lt;br /&gt;
根据 &lt;a href=&quot;http://www.seagate.com/www/zh-cn/products/enterprise-hard-drives/cheetah-15k&quot;&gt;希捷官网面向企业级Cheetah® 15K&lt;/a&gt; 的描述，支持SAS2.0，15K的候选表格如下:&lt;/p&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;td&gt;型号                                     &lt;/td&gt;
		&lt;td&gt;编号       &lt;/td&gt;
		&lt;td&gt;缓存&lt;/td&gt;
		&lt;td&gt;盘片&lt;/td&gt;
		&lt;td&gt;报价&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;希捷 Cheetah(捷豹) 15K.7 &lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt; 6Gb/秒 300GB&lt;/td&gt;
		&lt;td&gt;ST3300657SS&lt;/td&gt;
		&lt;td&gt;16MB&lt;/td&gt;
		&lt;td&gt;2   &lt;/td&gt;
		&lt;td&gt;1520&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;希捷 Cheetah(捷豹) 15K.7 &lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt; 6Gb/秒 450GB&lt;/td&gt;
		&lt;td&gt;ST3450857SS&lt;/td&gt;
		&lt;td&gt;16MB&lt;/td&gt;
		&lt;td&gt;3   &lt;/td&gt;
		&lt;td&gt;1840&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;希捷 Cheetah(捷豹) 15K.7 &lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt; 6Gb/秒 600GB&lt;/td&gt;
		&lt;td&gt;ST3600057SS&lt;/td&gt;
		&lt;td&gt;16MB&lt;/td&gt;
		&lt;td&gt;4   &lt;/td&gt;
		&lt;td&gt;2410&lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;固态硬盘SSD&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如果服务器应用并不需要海量存储，可以选择SSD固态硬盘。SSD产品非常多，主要选择适用企业应用的产品&lt;/p&gt;
&lt;p&gt;固态硬盘的价格差异点在于主控、存储方式、容量&lt;/p&gt;
&lt;p&gt;主控：连接闪存和外部SATA接口，决定数据要存储在哪个闪存block，常见品牌有:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;intel 芯片(PC29AS21BA0)采用34nm颗粒工艺的Gen2版本，X25-E Extreme SATA系列专用于服务器，也为威刚、金士顿等品牌代工&lt;/li&gt;
	&lt;li&gt;SandForce 芯片(SF-1565TA2-&lt;span class=&quot;caps&quot;&gt;SBH&lt;/span&gt;)的SF1500面向服务器，代表性产品:海盗船Force系列&lt;/li&gt;
	&lt;li&gt;Jmicron &lt;strong&gt;别买来做服务器&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;存储方式分为:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;acronym title=&quot;单层式储存&quot;&gt;&lt;span class=&quot;caps&quot;&gt;SLC&lt;/span&gt;&lt;/acronym&gt; 一个block只记录0和1数值，速度快(特别是随机写)，稳定，寿命长(10万次擦写)，成本高&lt;/li&gt;
	&lt;li&gt;&lt;acronym title=&quot;多层式储存&quot;&gt;&lt;span class=&quot;caps&quot;&gt;MLC&lt;/span&gt;&lt;/acronym&gt; 一个block记录00,01,11,10四组数值，存储空间翻倍，寿命短(1万次擦写)，成本低&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;候选表格如下(尺寸都为2.5英寸,NAND闪存类型都为SLC):&lt;/p&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;td&gt;型号                 &lt;/td&gt;
		&lt;td&gt;编号           &lt;/td&gt;
		&lt;td&gt;读取速度&lt;/td&gt;
		&lt;td&gt;写入速度&lt;/td&gt;
		&lt;td&gt;接口类型   &lt;/td&gt;
		&lt;td&gt;价格&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;Intel X25-E 50nm(32G)&lt;/td&gt;
		&lt;td&gt;SSDSA2SH032G1GN&lt;/td&gt;
		&lt;td&gt;250MB/S &lt;/td&gt;
		&lt;td&gt;170MB/S &lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;SATA&lt;/span&gt; II    &lt;/td&gt;
		&lt;td&gt;2385&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;Intel X25-E 50nm(64G)&lt;/td&gt;
		&lt;td&gt;SSDSA2SH064G101&lt;/td&gt;
		&lt;td&gt;250MB/S &lt;/td&gt;
		&lt;td&gt;170MB/S &lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;SATA&lt;/span&gt; II    &lt;/td&gt;
		&lt;td&gt;4550&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;希捷Pulsar XT.2(100G)&lt;/td&gt;
		&lt;td&gt;ST100FX0002    &lt;/td&gt;
		&lt;td&gt;360MB/S &lt;/td&gt;
		&lt;td&gt;300MB/S &lt;/td&gt;
		&lt;td&gt;&lt;acronym title=&quot;6-Gb/s&quot;&gt;&lt;span class=&quot;caps&quot;&gt;SAS&lt;/span&gt;&lt;/acronym&gt;&lt;/td&gt;
		&lt;td&gt;    &lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;4K随机读写性能，顺序读写速度对于大数据量来说非常重要，但作为系统盘(即非单纯的数据存储)，最关键的还是4k随机读写这一参数&lt;/p&gt;
&lt;p&gt;供应商:&lt;/p&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;td&gt;名称         &lt;/td&gt;
		&lt;td&gt;地址                   &lt;/td&gt;
		&lt;td&gt;联系人&lt;/td&gt;
		&lt;td&gt;电话         &lt;/td&gt;
		&lt;td&gt;手机       &lt;/td&gt;
		&lt;td&gt;网店                               &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;风驰计算机   &lt;/td&gt;
		&lt;td&gt;华强北国利大厦1711-1716&lt;/td&gt;
		&lt;td&gt;杨颖  &lt;/td&gt;
		&lt;td&gt;0755 83743198&lt;/td&gt;
		&lt;td&gt;13823752475&lt;/td&gt;
		&lt;td&gt;&lt;a href=&quot;http://m.pconline.com.cn/shop495935&quot;&gt;网址&lt;/a&gt;&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;服务器专卖   &lt;/td&gt;
		&lt;td&gt;现代之窗b座8楼8i       &lt;/td&gt;
		&lt;td&gt;谢先生&lt;/td&gt;
		&lt;td&gt;             &lt;/td&gt;
		&lt;td&gt;13715330262&lt;/td&gt;
		&lt;td&gt;&lt;a href=&quot;http://shop34747127.taobao.com&quot;&gt;网址&lt;/a&gt;     &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;LBC服务器专卖&lt;/td&gt;
		&lt;td&gt;赛格电子市场5楼        &lt;/td&gt;
		&lt;td&gt;黄先生&lt;/td&gt;
		&lt;td&gt;             &lt;/td&gt;
		&lt;td&gt;13510979215&lt;/td&gt;
		&lt;td&gt;&lt;a href=&quot;http://diyservers.taobao.com&quot;&gt;网址&lt;/a&gt;       &lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;h2&gt;机箱&lt;/h2&gt;
&lt;h3&gt;大小&lt;/h3&gt;
&lt;p&gt;宽(48.26cm＝19英寸)，高(1u=4.445cm的倍数)&lt;br /&gt;
长度主要分为两组&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;标准组 长度约为625－725毫米，支持双CPU服务器主板(含12×13英寸超大尺寸)&lt;/li&gt;
	&lt;li&gt;短款组 长度约为360－525毫米，仅支持单CPU服务器主板&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;主板结构&lt;/h3&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt; 12&amp;#8243;&amp;#215;9.5&amp;#8243; (30.5cmx24.2cm)&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;caps&quot;&gt;MEB&lt;/span&gt; 16.2&amp;#8243;&amp;#215;13&amp;#8243; (411&amp;#215;330mm)&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;caps&quot;&gt;SSI&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;EEB&lt;/span&gt; 12&amp;#8243;&amp;#215;13&amp;#8243; (305&amp;#215;330mm)&lt;/li&gt;
	&lt;li&gt;&lt;span class=&quot;caps&quot;&gt;EATX&lt;/span&gt; 12&amp;#8243;&amp;#215;13&amp;#8243; (305&amp;#215;330mm) 大小于EEB相同，但是两者不可替换使用(因为螺丝口都不一样)&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;散热&lt;/h3&gt;
&lt;p&gt;重中之重，安装6个以上的风扇&lt;br /&gt;
主要散热点为CPU、主板芯片组、内存、硬盘&lt;/p&gt;
&lt;h3&gt;&lt;a href=&quot;http://www.fywx.cc/Product_List.php?root_id=5&amp;amp;cat_id=28&quot;&gt;超微机箱&lt;/a&gt;&lt;/h3&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;td&gt;型号                        &lt;/td&gt;
		&lt;td&gt;&lt;span class=&quot;caps&quot;&gt;CPU&lt;/span&gt;  &lt;/td&gt;
		&lt;td&gt;适用主板           &lt;/td&gt;
		&lt;td&gt;硬盘位      &lt;/td&gt;
		&lt;td&gt;IO slots    &lt;/td&gt;
		&lt;td&gt;电源功率&lt;/td&gt;
		&lt;td&gt;报价&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC815TQ-560UV/SC815TQ-560UB &lt;/td&gt;
		&lt;td&gt;DP/UP&lt;/td&gt;
		&lt;td&gt;13.68&amp;#8243;&amp;#215;13&amp;#8243;E-&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;    &lt;/td&gt;
		&lt;td&gt;4&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;2x FF, 1x LP&lt;/td&gt;
		&lt;td&gt;560W    &lt;/td&gt;
		&lt;td&gt;3200&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC815TQ-560V/SC815TQ-560B   &lt;/td&gt;
		&lt;td&gt;DP   &lt;/td&gt;
		&lt;td&gt;12&amp;#8243;&amp;#215;13&amp;#8243;E-&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;       &lt;/td&gt;
		&lt;td&gt;4&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FF, 1x LP&lt;/td&gt;
		&lt;td&gt;560W    &lt;/td&gt;
		&lt;td&gt;3200&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC815TQ-560CV/SC815TQ-560CB &lt;/td&gt;
		&lt;td&gt;DP   &lt;/td&gt;
		&lt;td&gt;(12&amp;quot;,13.68&amp;quot;)x10&amp;quot;ATX&lt;/td&gt;
		&lt;td&gt;4&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FF       &lt;/td&gt;
		&lt;td&gt;560W    &lt;/td&gt;
		&lt;td&gt;    &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC813TQ-520/SC813TQ-520B    &lt;/td&gt;
		&lt;td&gt;DP/UP&lt;/td&gt;
		&lt;td&gt;12&amp;#8243;&amp;#215;13&amp;#8243;E-&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;       &lt;/td&gt;
		&lt;td&gt;4&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FF, 1x LP&lt;/td&gt;
		&lt;td&gt;520W    &lt;/td&gt;
		&lt;td&gt;3178&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC813TQ-520C/SC813TQ-520CB  &lt;/td&gt;
		&lt;td&gt;DP/UP&lt;/td&gt;
		&lt;td&gt;12&amp;#8243;&amp;#215;13&amp;#8243;E-&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;       &lt;/td&gt;
		&lt;td&gt;4&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FF       &lt;/td&gt;
		&lt;td&gt;520W    &lt;/td&gt;
		&lt;td&gt;    &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC813TQ-500/SC813TQ-500B    &lt;/td&gt;
		&lt;td&gt;DP   &lt;/td&gt;
		&lt;td&gt;12&amp;#8243;&amp;#215;13&amp;#8243;E-&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;       &lt;/td&gt;
		&lt;td&gt;4&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FH, 1x LP&lt;/td&gt;
		&lt;td&gt;500W    &lt;/td&gt;
		&lt;td&gt;3743&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC813MFTQ-520CB             &lt;/td&gt;
		&lt;td&gt;DP/UP&lt;/td&gt;
		&lt;td&gt;12&amp;#8243;&amp;#215;10&amp;#8243;&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;         &lt;/td&gt;
		&lt;td&gt;4&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FH       &lt;/td&gt;
		&lt;td&gt;520W    &lt;/td&gt;
		&lt;td&gt;2635&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC813MTQ-520C/SC813MTQ-520CB&lt;/td&gt;
		&lt;td&gt;DP/UP&lt;/td&gt;
		&lt;td&gt;12&amp;#8243;&amp;#215;10&amp;#8243;&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;         &lt;/td&gt;
		&lt;td&gt;4&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FH       &lt;/td&gt;
		&lt;td&gt;520W    &lt;/td&gt;
		&lt;td&gt;2688&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC813MT-420C/SC813MS-420CB  &lt;/td&gt;
		&lt;td&gt;DP/UP&lt;/td&gt;
		&lt;td&gt;12&amp;#8243;&amp;#215;10&amp;#8243;&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;         &lt;/td&gt;
		&lt;td&gt;4&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FH       &lt;/td&gt;
		&lt;td&gt;420W    &lt;/td&gt;
		&lt;td&gt;    &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC813MT-410C/SC813MT-410CB  &lt;/td&gt;
		&lt;td&gt;DP/UP&lt;/td&gt;
		&lt;td&gt;12&amp;#8243;&amp;#215;10&amp;#8243;&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;         &lt;/td&gt;
		&lt;td&gt;4&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FH       &lt;/td&gt;
		&lt;td&gt;410W    &lt;/td&gt;
		&lt;td&gt;    &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC813MT-300C/SC813MT-300CB  &lt;/td&gt;
		&lt;td&gt;DP/UP&lt;/td&gt;
		&lt;td&gt;12&amp;#8243;&amp;#215;10&amp;#8243;&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;         &lt;/td&gt;
		&lt;td&gt;4&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FH       &lt;/td&gt;
		&lt;td&gt;300W    &lt;/td&gt;
		&lt;td&gt;    &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC811TQ-520/SC811TQ-520B    &lt;/td&gt;
		&lt;td&gt;DP/UP&lt;/td&gt;
		&lt;td&gt;12&amp;#8243;&amp;#215;10&amp;#8243;&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;         &lt;/td&gt;
		&lt;td&gt;2&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FH       &lt;/td&gt;
		&lt;td&gt;520W    &lt;/td&gt;
		&lt;td&gt;2368&lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt;SC811TQ-350B                &lt;/td&gt;
		&lt;td&gt;DP/UP&lt;/td&gt;
		&lt;td&gt;12&amp;#8243;&amp;#215;10&amp;#8243;&lt;span class=&quot;caps&quot;&gt;ATX&lt;/span&gt;         &lt;/td&gt;
		&lt;td&gt;2&amp;#215;3.5英寸SAS&lt;/td&gt;
		&lt;td&gt;1x FH       &lt;/td&gt;
		&lt;td&gt;350W    &lt;/td&gt;
		&lt;td&gt;    &lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;p&gt;型号带Twin，是专为双子星产品而设计的，1u空间可以装入2块主板；&lt;br /&gt;
型号带Q，支持SAS/SATA；S，支持SCSI；R，冗余双电源，U指支持单路主板；V或者B指颜色&lt;br /&gt;
IO slots:FF=全高，全长的扩展卡;FH=全高，半长的扩展卡;LP=矮板扩展卡&lt;/p&gt;
&lt;h2&gt;其他&lt;/h2&gt;
&lt;p&gt;操作过程一定要带防静电手套&lt;br /&gt;
在查询时应该多使用&amp;quot;实测&amp;quot;、&amp;quot;评测&amp;quot;、&amp;quot;企业级&amp;quot;、&amp;quot;如何选购&amp;quot;，以最大可能地了解各种配件在实际中的使用情况&lt;/p&gt;
&lt;h2&gt;参考资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://news.mydrivers.com/1/167/167758.htm&quot;&gt;AMD服务器新平台第二波：Opteron 4100登场&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.amd.com/cn/products/server/processors/Pages/server-processors.aspx&quot;&gt;AMD服务器平台&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://detail.zol.com.cn/servercpu_index/subcate383_55_list_s2775_1.html&quot;&gt;&lt;span class=&quot;caps&quot;&gt;AMD&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;CPU&lt;/span&gt; 报价&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.liusuping.com/it-tech/server-rdimm-udimm.html&quot;&gt;UDIMM与RDIMM区别&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://hi.baidu.com/tyc6982/blog/item/b75d55ce519deb37b700c870.html&quot;&gt;如何选购固态硬盘&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://storage.it168.com/a2011/0104/1145/000001145668_all.shtml&quot;&gt;测试探究SSD固态硬盘性能下降的谜题&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.ittong.net/News_37191.html&quot;&gt;DIY服务器机箱组装经验谈&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
   
    <entry>
      <title>虚拟化开发环境</title>
      <link href="http://saberma.me/linux/2011/03/03/vagrant-virtual-develop-enviroment.html"/>
      <updated>2011-03-03T00:00:00+08:00</updated>
      <id>http://saberma.me/linux/2011/03/03/vagrant-virtual-develop-enviroment</id>
      <content type="html">&lt;p&gt;&lt;a href=&quot;https://github.com/saberma/shopqi&quot;&gt;ShopQi&lt;/a&gt; 中应用到的技术越来越多，开发环境的搭建变得越来越繁琐，这对开源项目的团队协作是相当不利的&lt;br /&gt;
试想，每个程序员的偏好都不同，所使用的操作系统，编辑器都是五花八门的，在开发过程中由于开发环境不一致出现问题的不在少数，调试难度也大&lt;/p&gt;
&lt;p&gt;所以，很多公司要求所有的开发机器不能随意安装软件，要保持开发环境高度一致&lt;br /&gt;
这种强制限制虽然让人感到不自由，但在公司做软件，也算情有可原&lt;/p&gt;
&lt;p&gt;而做开源项目就不同了，我们要尽可能提供便利，减少安装过程对原有环境的影响&lt;br /&gt;
要实现这一目标是非常困难的，还好，现在有了Vagrant&lt;/p&gt;
&lt;h2&gt;Vagrant&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/develop/vagrant.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Vargant是构建虚拟化开发环境的工具，它是用ruby开发的，并以gem方面发布，它会帮我们&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;创建一个Ubuntu10.04版本的32位VirtualBox虚拟机，并应用chef安装项目所需的ruby、数据库、应用服务器程序等&lt;/li&gt;
	&lt;li&gt;将宿主机项目所在的目录与虚拟机共享，我们在宿主机用喜欢的编辑器修改程序，虚拟机中的开发环境可以立即读取到&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这样就可以保证项目组成员的开发环境是一致的,不一定是rails项目才适用,java php或其他的都是可以使用vagrant&lt;/p&gt;
&lt;p&gt;有时候,我们需要跟进开发多个项目,有的用java,有的用ruby,有的使用mysql,有的使用mongodb&lt;br /&gt;
把这些都装起来也没问题,但是有点浪费性能了,同一时间我们只会开发一个项目&lt;br /&gt;
用vagrant我们可以很好的解决这类问题,每个项目一个虚拟机,需要时才启动&lt;/p&gt;
&lt;h3&gt;下载&lt;/h3&gt;
&lt;p&gt;虚拟机的操作系统镜像文件是经过定制的，在vargant中引入的镜像文件称为&amp;quot;Box&amp;quot;&lt;br /&gt;
我们先下载这个镜像文件，地址如下&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://files.vagrantup.com/lucid32.box&quot;&gt;http://files.vagrantup.com/lucid32.box&lt;/a&gt;&lt;br /&gt;
假设下载后放至~/lucid32.box&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;同时需要下载VirtualBox程序，并安装&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;http://www.virtualbox.org/wiki/Downloads&quot;&gt;http://www.virtualbox.org/wiki/Downloads&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;安装&lt;/h3&gt;
&lt;p&gt;安装前请确保宿主机已经安装了ruby和rubygem&lt;/p&gt;
&lt;pre&gt;
gem install bundler vagrant --no-ri --no-rdoc&lt;/pre&gt;
&lt;h3&gt;创建虚拟机&lt;/h3&gt;
&lt;p&gt;先引入刚才下载的镜像文件，作为vagant管理下的一个box，以后每次要生成一个用于开发的虚拟机，都会从这个box中复制出来&lt;/p&gt;
&lt;pre&gt;
vagrant box add lucid32 ~/lucid32.box
#进入项目目录
cd ~/Documents/shopqi
#初始化，生成配置文件Vagrantfile
vagrant init lucid32
#生成项目虚拟机
vagrant up&lt;/pre&gt;
&lt;p&gt;等一会儿，一个ubuntu的虚拟机就建好了&lt;/p&gt;
&lt;h3&gt;在虚拟机上安装开发环境&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/vagrant/pstree.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;vagrant可以根据chef指定的cookbook recipe进行安装，关于chef的介绍可以参考 &lt;a href=&quot;/linux/2011/01/27/chef-for-automate-deploy.html&quot;&gt;应用chef构建服务器集群自动化部署与管理&lt;/a&gt;&lt;br /&gt;
这里采用的是不依赖chef服务器的chef-solo方式，recipe采用 &lt;a href=&quot;https://github.com/saberma/shopqi&quot;&gt;ShopQi&lt;/a&gt; 服务器部署的cookbook&lt;br /&gt;
指定recipe，需要修改Vagrantfile，增加以下内容&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;config.vm.provision :chef_solo do |chef|&lt;br /&gt;
　chef.recipe_url = &amp;#8220;https://dl.dropbox.com/u/19519145/shopqi/chef-solo.tar.gz&amp;#8221;&lt;br /&gt;
　chef.add_recipe &amp;#8220;develop&amp;#8221;&lt;br /&gt;
end&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;chef-solo.tar.gz文件是包含cookbooks集合的压缩包&lt;/p&gt;
&lt;pre&gt;
#进入cookbooks所在目录后运行命令
tar zcvf chef-solo.tar.gz ./cookbooks&lt;/pre&gt;
&lt;p&gt;develop cookbook会引入开发机所需要的依赖recipe， &lt;a href=&quot;https://github.com/saberma/chef-repo/blob/master/cookbooks/develop/recipes/default.rb&quot;&gt;查看内容&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;启动虚拟机&lt;/h3&gt;
&lt;pre&gt;
vagrant up
#如果已经启动，只想更新或者调试recipe，运行vagrant provision&lt;/pre&gt;
&lt;p&gt;如果你和我一样,喜欢rvm来管理ruby版本,并安装了除system自带的ruby,则需要修改/etc/profile,否则gems会被安装在自带ruby之下&lt;br /&gt;
参考 &lt;a href=&quot;http://rvm.beginrescueend.com/integration/vagrant/&quot;&gt;http://rvm.beginrescueend.com/integration/vagrant/&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;ssh登录虚拟机&lt;/h3&gt;
&lt;p&gt;之后，我们可以登录虚拟机，像以前一样执行rake等命令&lt;/p&gt;
&lt;pre&gt;
vagrant ssh
#查看项目目录，会发现与宿主机的当前目录内容一致
ls /vagrant&lt;/pre&gt;
&lt;p&gt;刚才引入的cookbook包含了nginx recipe，所以我们可以看看虚拟机上nginx是否能正常访问了&lt;/p&gt;
&lt;pre&gt;
wget -qO- 127.0.0.1:3000&lt;/pre&gt;
&lt;p&gt;結果返回:&lt;/p&gt;
&lt;pre&gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;title&amp;gt;Welcome to nginx!&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body bgcolor=&quot;white&quot; text=&quot;black&quot;&amp;gt;
&amp;lt;center&amp;gt;&amp;lt;h1&amp;gt;Welcome to nginx!&amp;lt;/h1&amp;gt;&amp;lt;/center&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;&lt;/pre&gt;
&lt;p&gt;说明能正常访问，为了能在宿主机上用浏览器访问它，我们需要进行端口映射&lt;br /&gt;
修改VagrantFile，加入以下内容:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Vagrant::Config.run do |config|&lt;br /&gt;
　# Forward guest port 3000 to host port 8088 and name the mapping &amp;#8220;web&amp;#8221;&lt;br /&gt;
　config.vm.forward_port(&amp;#8220;web&amp;#8221;, 3000, 8088)&lt;br /&gt;
end&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;用浏览器打开 &lt;a href=&quot;http://127.0.0.1:8088&quot;&gt;http://127.0.0.1:8088&lt;/a&gt; 就可以访问了&lt;/p&gt;
&lt;h3&gt;打包发布&lt;/h3&gt;
&lt;p&gt;现在开发环境已经安装好了，整个过程非常高效。更进一步，我们可以把已经做好的环境打包成镜像文件，分发给其他人，他们就可以瞬间建好开发环境了。&lt;/p&gt;
&lt;p&gt;准备pkg文件,此文件只用于定义映射端口,会被合并至Vagrantfile文件中,内容一般为&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Vagrant::Config.run do |config|&lt;br /&gt;
  #Forward nginx&lt;br /&gt;
  config.vm.forward_port(&amp;#8220;web&amp;#8221;, 3000, 8088)&lt;br /&gt;
end&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
#执行打包
vagrant package --vagrantfile Vagrantfile.pkg&lt;/pre&gt;
&lt;p&gt;执行后当前目录会生成package.box文件&lt;/p&gt;
&lt;h3&gt;关闭虚拟机&lt;/h3&gt;
&lt;pre&gt;
vagrant halt&lt;/pre&gt;
&lt;h2&gt;测试&lt;/h2&gt;
&lt;h3&gt;单元测试&lt;/h3&gt;
&lt;p&gt;还是跟以前一样&lt;/p&gt;
&lt;h3&gt;验收测试&lt;/h3&gt;
&lt;p&gt;由于cucumber使用的@javascript，需要打开浏览器测试ajax。而虚拟机并未安装桌面，此测试进行不了。&lt;br /&gt;
开源社区中有不少技术可以进行headless后台测试，但都不成熟.&lt;/p&gt;
&lt;p&gt;所以,我们只能在宿主机上进行这样的测试了,这样的话,宿主机又要安装项目的相关插件,这可不少.&lt;br /&gt;
有什么办法能让插件跟着项目跑,而不把插件安装到系统上呢?&lt;/p&gt;
&lt;p&gt;答案是可以的,我们在虚拟机上使用bundle install安装插件的时候,指定参数&amp;#8212;path vendor/bundle，将插件安装在项目的vendor/bundle目录，这样在宿主机就不用再安装这些插件了。&lt;br /&gt;
还有,我们的测试数据库还在虚拟机上,还得修改 &lt;code&gt;Vagrantfile&lt;/code&gt; ,把mongodb,redis-server,nodejs等服务的端口映射至宿主机&lt;br /&gt;
直接在宿主机上运行以下命令就可以测试了&lt;/p&gt;
&lt;pre&gt;
bundle exec cucumber features&lt;/pre&gt;
&lt;p&gt;注意:将gems打包后,会导致在虚拟机运行rails各种命令时,速度巨慢,原因是virtaulbox共享目录的bug:随着目录内文件数的增长,对共享目录的访问会很慢&lt;br /&gt;
解决方案是应用nfs共享目录,具体查看这里 &lt;a href=&quot;http://vagrantup.com/docs/nfs.html&quot;&gt;http://vagrantup.com/docs/nfs.html&lt;/a&gt; 和 &lt;a href=&quot;http://vagrantup.com/docs/host_only_networking.html&quot;&gt;http://vagrantup.com/docs/host_only_networking.html&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;
#宿主机需要安装nfs服务
sudo apt-get install nfs-kernel-server&lt;/pre&gt;
&lt;h3&gt;进入rails控制器&lt;/h3&gt;
&lt;p&gt;经过上面的处理,插件已经安装好了,但是由于rails并未安装进系统,使用以下命令是进不了控制台的&lt;/p&gt;
&lt;pre&gt;
rails c&lt;/pre&gt;
&lt;p&gt;得在项目目录下,运行&lt;/p&gt;
&lt;pre&gt;
script/rails c&lt;/pre&gt;
&lt;h2&gt;报错&lt;/h2&gt;
&lt;h3&gt;找不到client.pem&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;[default] I cannot read /etc/chef/client.pem, which you told me to use to sign requests!: stderr&lt;br /&gt;
[default]  (: stderr&lt;br /&gt;
[default] Chef::Exceptions::PrivateKeyMissing: stderr&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这也太奇怪了，用的是chef-solo方式，而非chef-server，怎么也需要client.pem?&lt;br /&gt;
原来是部分cookbook使用了search方法，此方法用于从chef-server中查找相应的信息&lt;/p&gt;
&lt;p&gt;解决方法是在cookbook中加入判断条件，开发环境部署时不调用search，生产环境才调用&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;node[:instance_role]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;&amp;#8216;unknown&amp;#8217;: unknown terminal type.&lt;/h3&gt;
&lt;p&gt;很不幸，这是vagrant的一个bug，详情参考 &lt;a href=&quot;https://github.com/mitchellh/vagrant/commit/77a1b9a6efe4f5cdc99343e844835fc790a64c28&quot;&gt;commit#77a1b9a6efe4f5cdc993&lt;/a&gt;&lt;br /&gt;
解决方法，更新vagrant至0.7.3，不过，这个版本还没有发布，只能先手动修改本地gem的代码了&lt;/p&gt;
&lt;h3&gt;&lt;span class=&quot;caps&quot;&gt;FATAL&lt;/span&gt;: No cookbook found in [&amp;#8220;/tmp/vagrant-chef/cookbooks-0&amp;#8221;, &amp;#8220;/tmp/vagrant-chef/cookbooks&amp;#8221;], make sure cookbook_path is set correctly.&lt;/h3&gt;
&lt;p&gt;这是vagrant的一个bug,详情请看&lt;br /&gt;
&lt;a href=&quot;https://github.com/mitchellh/vagrant/issues#issue/308&quot;&gt;https://github.com/mitchellh/vagrant/issues#issue/308&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github.com/mitchellh/vagrant/issues/closed#issue/297&quot;&gt;https://github.com/mitchellh/vagrant/issues/closed#issue/297&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;不影响使用,作者正在修复&amp;#8230;&lt;/p&gt;
&lt;h3&gt;运行chef-solo过程的其他错误?&lt;/h3&gt;
&lt;pre&gt;
#登录虚拟机
vagrant ssh
#在虚拟机运行chef-solo,显示更显示的debug信息
cd /tmp/vagrant-chef
sudo chef-solo -c solo.rb -j dna.json -l debug&lt;/pre&gt;
&lt;p&gt;如果希望vagrant命令运行时都显示详细信息,可以配置Vagrantfile&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;config.vm.provision :chef_solo do |chef|&lt;br /&gt;
　chef.log_level = :debug&lt;br /&gt;
end&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;参考资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://vagrantup.com/&quot;&gt;Vagrant官网&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://vagrantup.com/docs/provisioners/chef_solo.html&quot;&gt;chef_solo配置&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://tickets.opscode.com/browse/CHEF-1115&quot;&gt;client.pem error&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github.com/fnichol/wiki-notes/wiki/Creating-An-Ubuntu-10.10-x32-Vagrant-Box&quot;&gt;Creating An Ubuntu 10.10 x32 Vagrant Box&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://wiki.csinitiative.com/display/tri/Setting+up+a+Vagrant+VM+for+TriSano&quot;&gt;Setting up a Vagrant VM for TriSano&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://wiki.opscode.com/display/chef/Vagrant&quot;&gt;opscode vagrant&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>我的Ubuntu</title>
      <link href="http://saberma.me/linux/2011/02/24/my-ubuntu.html"/>
      <updated>2011-02-24T00:00:00+08:00</updated>
      <id>http://saberma.me/linux/2011/02/24/my-ubuntu</id>
      <content type="html">&lt;p&gt;我安装的Ubuntu版本是10.04，代号Lucid，32位，以下为安装后的配置过程&lt;/p&gt;
&lt;h2&gt;安装升级&lt;/h2&gt;
&lt;h3&gt;基本安装&lt;/h3&gt;
&lt;pre&gt;
#换源，试来试去，还是台湾的源最快
sudo wget https://gist.github.com/raw/352828/ca1d292be9a10fe01b7e0b72d65a74b781683311/sources.list -O /etc/apt/sources.list
sudo apt-get update
sudo apt-get upgrade
#ibus输入法，比Fcitx好用
sudo add-apt-repository ppa:shawn-p-huang/ppa 
sudo apt-get update
sudo apt-get install ibus-gtk ibus-pinyin ibus-pinyin-db-open-phrase ibus-table-wubi
im-switch -s ibus
#chrome浏览器
sudo apt-get install chromium-browser&lt;/pre&gt;
&lt;h3&gt;开发安装&lt;/h3&gt;
&lt;p&gt;虽然我已经把项目移至虚拟化开发环境中，但有些小项目还是需要在宿主机开发的，所以本地的基础开发环境还是要建立，而像mongodb、redis、nginx这些就不要再安装了，通通移至虚拟机&lt;/p&gt;
&lt;pre&gt;
#git
sudo apt-get install git-core openssl
#rvm
bash &amp;lt; &amp;lt;( curl http://rvm.beginrescueend.com/releases/rvm-install-head )
rvm install 1.9.2
rvm 1.9.2 --default
#or sometimes we will get:no such file to load -- openssl (LoadError)
cd ~/.rvm/src/ruby-1.9.2-*/ext/openssl
ruby extconf.rb
make &amp;amp;&amp;amp; make install
#irb should support readline. rmagick need.
sudo apt-get install ncurses-dev libreadline6 libreadline-dev graphicsmagick libmagick9-dev
cd ~/.rvm/src/ruby-1.9.2-*/ext/readline
ruby extconf.rb
make &amp;amp;&amp;amp; make install
#vim编辑神器
sudo apt-get install vim vim-ruby&lt;/pre&gt;
&lt;h2&gt;基本配置&lt;/h2&gt;
&lt;h3&gt;关闭特效&lt;/h3&gt;
&lt;p&gt;用于开发的机子当然是性能优先了&lt;/p&gt;
&lt;p&gt;右击桌面-[Change Desktop BackGround]-[Visual Effects]&lt;br /&gt;
选中[None]&lt;/p&gt;
&lt;h3&gt;自动隐藏任务栏&lt;/h3&gt;
&lt;p&gt;自动隐藏顶端及底端的任务栏，使浏览器及编辑器的窗口可显示的空间最大化&lt;/p&gt;
&lt;p&gt;右击任务栏-[Properties]-[General]&lt;br /&gt;
选中[Autohide]&lt;/p&gt;
&lt;h3&gt;自动记忆&lt;/h3&gt;
&lt;p&gt;关机时已经打开了哪些程序（浏览器、包括terminal中的各个tab），重新开机后会自动打开。&lt;br /&gt;
[System]-[Perferences]-[Startup Applications]-[Options]&lt;br /&gt;
勾选[Automatically remember running applications when logging out]&lt;/p&gt;
&lt;p&gt;顺便把[Startup Programs]中不需要开机启动的程序关闭掉，如Bluetooth Manager&lt;/p&gt;
&lt;h2&gt;Shell&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/ubuntu/zsh.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;安装终极Shell zsh，拥有更强的补全功能(常用工具的参数补全)&lt;/p&gt;
&lt;pre&gt;
sudo apt-get install zsh
#引入增强插件,支持git,rails等补全，可选多种外观皮肤
wget https://github.com/robbyrussell/oh-my-zsh/raw/master/tools/install.sh -O - | sh
#zsh作为默认shell，重启后生效
chsh -s /bin/zsh&lt;/pre&gt;
&lt;p&gt;修改zsh配置，定义需要引入的插件，修改 &lt;code&gt;~/.zshrc&lt;/code&gt; 的plugins值为:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;plugins=(command-not-found git rails ruby vagrant)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/robbyrussell/oh-my-zsh/wiki/themes&quot;&gt;zsh外观皮肤大全&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins&quot;&gt;zsh插件大全&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;具体有哪些补全功能呢，可以查看列表&lt;/p&gt;
&lt;pre&gt;
#-h不列出文件名
grep -h -r -e '^alias' ~/.oh-my-zsh&lt;/pre&gt;
&lt;h2&gt;浏览器&lt;/h2&gt;
&lt;h2&gt;参考资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://wiki.ubuntu.org.cn/Qref/Source&quot;&gt;Ubuntu中文wiki&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://code.google.com/p/ibus/wiki/Ubuntu&quot;&gt;Ibus install&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>应用chef安装openvpn</title>
      <link href="http://saberma.me/linux/2011/02/13/use-chef-to-install-openvpn-in-burst-vps.html"/>
      <updated>2011-02-13T00:00:00+08:00</updated>
      <id>http://saberma.me/linux/2011/02/13/use-chef-to-install-openvpn-in-burst-vps</id>
      <content type="html">&lt;h2&gt;burst vps&lt;/h2&gt;
&lt;p&gt;之前买了burst的vps，现在准备为它安装openvpn&lt;br /&gt;
使用openvpn需要先登录后台管理 &lt;a href=&quot;https://184.82.225.10:2408&quot;&gt;https://184.82.225.10:2408/index.php&lt;/a&gt;&lt;br /&gt;
在Networking &amp;amp; Utilities 启用 Enable Tun/Tap&lt;/p&gt;
&lt;h2&gt;安装openvpn&lt;/h2&gt;
&lt;p&gt;假设vps ip为188.188.188.188&lt;br /&gt;
ssh密码为123456&lt;/p&gt;
&lt;p&gt;把这台vps当成vpn服务器，实现无障碍访问互联网&lt;/p&gt;
&lt;pre&gt;
export EDITOR=vim
knife role create vpn&lt;/pre&gt;
&lt;p&gt;knife会打开vim，将内容修改为:&lt;/p&gt;
&lt;pre&gt;
{
  &quot;name&quot;: &quot;vpn&quot;,
  &quot;description&quot;: &quot;openvpn server&quot;,
  &quot;json_class&quot;: &quot;Chef::Role&quot;,
  &quot;default_attributes&quot;: {
    &quot;chef&quot;: {
      &quot;server_url&quot;: &quot;https://api.opscode.com/organizations/#{YOUR COMPANY!}&quot;,
      &quot;cache_path&quot;: &quot;/var/chef/cache&quot;,
      &quot;backup_path&quot;: &quot;/var/chef/backup&quot;,
      &quot;validation_client_name&quot;: &quot;#{YOUR COMPANY!}-validator&quot;,
      &quot;run_path&quot;: &quot;/var/chef&quot;
    }
  },
  &quot;override_attributes&quot;: {
  },
  &quot;chef_type&quot;: &quot;role&quot;,
  &quot;run_list&quot;: [
    &quot;recipe[openvpn::default]&quot;
  ]
}&lt;/pre&gt;
&lt;p&gt;修改完后退出vim，会提示已经&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Created (or updated) role[vpn]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;下载相应的cookbook&lt;/p&gt;
&lt;pre&gt;
#此命令最常用
knife cookbook site vendor openvpn&lt;/pre&gt;
&lt;p&gt;远程生成服务端的keys，以下命令在本地执行&lt;br /&gt;
在bash，dot点号命令与source命令一样，把文件加载至shell内存空间&lt;/p&gt;
&lt;p&gt;修改/cookbooks/openvpn/templates/default/server.up.sh.erb，加入以下内容&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;/sbin/sysctl -w net.ipv4.ip_forward=1&lt;br /&gt;
/sbin/iptables -t nat -A &lt;span class=&quot;caps&quot;&gt;POSTROUTING&lt;/span&gt; -s &amp;lt;%= @openvpn[:subnet] &lt;span&gt;&amp;gt;/&amp;lt;&lt;/span&gt;= @openvpn[:netmask] &lt;span&gt;&amp;gt; -j &lt;span class=&quot;caps&quot;&gt;SNAT&lt;/span&gt;  &amp;#8212;to-source &amp;lt;&lt;/span&gt;= @openvpn[:local] %&amp;gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;修改cookbooks/openvpn/recipes/default.rb，加入变量&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;template &amp;#8220;/etc/openvpn/server.up.sh&amp;#8221; do&lt;br /&gt;
　source &amp;#8220;server.up.sh.erb&amp;#8221;&lt;br /&gt;
　variables :openvpn =&amp;gt; node[:openvpn]&lt;br /&gt;
end&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
cd files/default/easy-rsa
. vars
rake server&lt;/pre&gt;
&lt;p&gt;为node加入role&lt;/p&gt;
&lt;pre&gt;
knife node list
#以上查看node id，假如为201166，现在查看node的run_list
#加入刚才新增的role
knife node run_list add 201166 &quot;role[vpn]&quot;
knife cookbook upload -a&lt;/pre&gt;
&lt;p&gt;远程登录vps，开始按run_list运行指定recipe&lt;/p&gt;
&lt;pre&gt;
ssh root@188.188.188.188
chef-client&lt;/pre&gt;
&lt;p&gt;在本地配置vpn client&lt;/p&gt;
&lt;pre&gt;
sudo apt-get install openvpn
cd files/default/easy-rsa
. vars
#注意不要运行多次，多次运行的时候请更换name，否则生成的.crt文件会为空
rake client name=&quot;client&quot; gateway=&quot;188.188.188.188&quot;
sudo mkdir /etc/openvpn
cd /etc/openvpn
sudo cp /tmp/client.zip .
sudo unzip client.zip&lt;/pre&gt;
&lt;p&gt;修改DNS，否则就算边上vpn也不能访问twitter等，修改 &lt;code&gt;/etc/resolv.conf&lt;/code&gt;为:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;nameserver 8.8.8.8&lt;br /&gt;
nameserver 8.8.4.4&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;测试&lt;/p&gt;
&lt;pre&gt;
#在服务端运行
openvpn --config /etc/openvpn/server.conf --script-security 2
#在客户端运行
sudo openvpn --config /etc/openvpn/client.conf&lt;/pre&gt;
&lt;p&gt;此时，再通过浏览器访问的google.com不会再跳转至google.com.hk了&lt;/p&gt;
&lt;h2&gt;ssh通道?&lt;/h2&gt;
&lt;p&gt;除了vpn，我们还可以使用ssh通道访问受限网站&lt;/p&gt;
&lt;pre&gt;
#autossh支持断线重连
sudo apt-get install autossh
autossh -M 2000 -N -v root@188.188.188.188 -D 127.0.0.1:7070&lt;/pre&gt;
&lt;p&gt;结合&amp;quot;chrome proxy switch&amp;quot;:https://chrome.google.com/extensions/detail/caehdcpeofiiigpdhbabniblemipncjj?hl=zh-cn 可以让浏览器自动切换代理&lt;/p&gt;
&lt;h2&gt;调试&lt;/h2&gt;
&lt;h3&gt;日志&lt;/h3&gt;
&lt;pre&gt;
tail -f /var/log/openvpn.log&lt;/pre&gt;
&lt;h2&gt;参考资源&lt;br /&gt;
&lt;a href=&quot;http://www.lenghost.cn/vps/burstnet-vps-openvpn-install/&quot;&gt;BurstNET的VPS安装OpenVPN教程总结&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://openvpn.net/index.php/open-source/documentation/howto.html&quot;&gt;Openvpn Document&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://wiki.wowubuntu.com/blog/ubuntu_ssh_tunneling&quot;&gt;ssh tunneling&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://imyue.net/?p=1167&quot;&gt;Chrome自动使用代理&lt;/a&gt;&lt;/h2&gt;</content>
    </entry>
  
    <entry>
      <title>应用chef构建服务器集群自动化部署与管理</title>
      <link href="http://saberma.me/linux/2011/01/27/chef-for-automate-deploy.html"/>
      <updated>2011-01-27T00:00:00+08:00</updated>
      <id>http://saberma.me/linux/2011/01/27/chef-for-automate-deploy</id>
      <content type="html">&lt;p&gt;为了将rails程序部署到服务器上，需要做的工作有&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;安装服务器各组件，如libcurl等&lt;/li&gt;
	&lt;li&gt;配置服务器，如用户管理、iptable等&lt;/li&gt;
	&lt;li&gt;安装数据库&lt;/li&gt;
	&lt;li&gt;安装缓存服务&lt;/li&gt;
	&lt;li&gt;安装配置前端应用服务器&lt;/li&gt;
	&lt;li&gt;安装rvm&lt;/li&gt;
	&lt;li&gt;安装项目所需gems&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;以上工作属于新服务器到位后的一次性工作，而项目更新升级的工作属于不定期重复性工作，大致如下：&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;下载最新源代码&lt;/li&gt;
	&lt;li&gt;运行数据库脚本&lt;/li&gt;
	&lt;li&gt;重新启动应用服务器&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;此外，日常工作还包括服务器的监控、维护等&lt;/p&gt;
&lt;p&gt;当项目规模不大，服务器只有一两台时，可以手动或者应用 &lt;a href=&quot;https://github.com/capistrano/capistrano&quot;&gt;Capistrano&lt;/a&gt; 及 &lt;a href=&quot;https://github.com/mbailey/deprec&quot;&gt;deprec&lt;/a&gt; 自动处理&lt;/p&gt;
&lt;h3&gt;capistrano的缺点&lt;/h3&gt;
&lt;p&gt;在应用capify安装某些组件的过程中，如果出现问题，只能进入源代码检查相应的recipe，因为capistrano的recipe相对来说是隐性的&lt;br /&gt;
比如，安装之前，我们不知道mysql的安装会是通过package直接安装还是通过下载source本地编译后安装，也无法获知其版本&lt;br /&gt;
而当recipe不符合你的要求时，需要对其进行改造的成本比较大&lt;/p&gt;
&lt;p&gt;随着项目规模的不断扩大，比如，有了专门的数据库服务器，甚至是数据库服务器集群，这时候capistrano就会显示力不从心了&lt;br /&gt;
我们需要有专业的服务器管理配置工具来统一管理所有的服务器，这类工具不少，这里只介绍chef&lt;/p&gt;
&lt;h2&gt;Chef&lt;/h2&gt;
&lt;h3&gt;Chef是一个什么样的工具&lt;/h3&gt;
&lt;p&gt;想像一下我们现在需要搭建一台mysql database slave服务器，安装过程我们手动操作了&lt;br /&gt;
没过多久，我们需要第二台，这时候我们会想，如果之后安装第一台的时候把操作过程执行的命令写成脚本&lt;br /&gt;
现在安装第二台，运行一下脚本就行了，节约时间而且不容易出错&lt;/p&gt;
&lt;p&gt;chef就相当于这样的一个脚本管理工具，但功能要强大得多，可定制性强&lt;br /&gt;
chef将脚本命令代码化，定制时只需要修改代码，安装的过程就是执行代码的过程&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;架构图&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/chef/chef.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h3&gt;Chef的三种管理模式&lt;/h3&gt;
&lt;p&gt;1. Chef-Solo&lt;/p&gt;
&lt;p&gt;由一台普通电脑控制所有的服务器，不需要专设一台chef-server&lt;/p&gt;
&lt;p&gt;2. Client-Server&lt;/p&gt;
&lt;p&gt;所有的服务器作为chef-client，统一由chef-server进行管理，管理包括安装、配置等工作&lt;br /&gt;
chef-server可以自建，但安装的东西较多，由于使用solr作为全文搜索引擎，还需要安装java&lt;/p&gt;
&lt;p&gt;3. Opscode Platform&lt;/p&gt;
&lt;p&gt;类似于Client-Server，只是Server端不需要自建，而是采用 &lt;a href=&quot;http://www.opscode.com&quot;&gt;http://www.opscode.com&lt;/a&gt; 提供的chef-server服务，本文描述以此方式为主，免费帐号可以管理5个服务器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/chef/opscode.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h3&gt;Library程序库&lt;/h3&gt;
&lt;p&gt;程序库是定义的module方法，可以在chef中任何地方被调用，在方法体内可以执行与数据库等资源的交互动作&lt;br /&gt;
详见 &lt;a href=&quot;http://wiki.opscode.com/display/chef/Libraries&quot;&gt;Libraries&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;操作对象&lt;/h3&gt;
&lt;p&gt;chef可以通过recipe指定新建目录、生成配置文件、安装gems等操作，可控性非常强&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;新建目录&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;新建目录/data，owner为node[:user]指定的内容，权限代码为0755&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;directory &amp;#8220;/data&amp;#8221; do&lt;br /&gt;
　owner node[:user]&lt;br /&gt;
　mode 0755&lt;br /&gt;
end&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;生成配置文件&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;以someservice.conf.erb为模板，生成/data/someservice.conf配置文件，生成时会传递参数applications给模板&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;template &amp;#8220;/data/someservice.conf&amp;#8221; do&lt;br /&gt;
　owner node[:user]&lt;br /&gt;
　mode 0644&lt;br /&gt;
　source &amp;#8220;someservice.conf.erb&amp;#8221; &lt;br /&gt;
　variables({&lt;br /&gt;
　　:applications =&amp;gt; node[:apps]&lt;br /&gt;
　})&lt;br /&gt;
end&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;把一台新的vps纳入chef管理&lt;/h2&gt;
&lt;p&gt;假设vps ip为188.188.188.188&lt;br /&gt;
ssh密码为123456&lt;/p&gt;
&lt;h3&gt;注册&lt;/h3&gt;
&lt;p&gt;到 &lt;a href=&quot;https://cookbooks.opscode.com/users/new&quot;&gt;https://cookbooks.opscode.com/users/new&lt;/a&gt; 注册帐号&lt;br /&gt;
通过邮件认证后，进入控制台 &lt;a href=&quot;https://manage.opscode.com&quot;&gt;https://manage.opscode.com&lt;/a&gt; 创建organization&lt;br /&gt;
按提示下载两个链接文件至~/Downloads: Download validation key | Generate knife config&lt;br /&gt;
点击右上角的用户名，下载链接文件至~/Download: Get a new private key&lt;/p&gt;
&lt;p&gt;下载后的knife.txt要改名为knife.rb&lt;br /&gt;
&lt;strong&gt;以上三个文件请妥善保管，下载之后opscode平台不再保存这些文件&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;本地安装&lt;/h3&gt;
&lt;pre&gt;
gem install chef net-ssh-multi --no-ri --no-rdoc
cd ~/Documents
git clone git://github.com/opscode/chef-repo.git
cd chef-repo
mkdir -p .chef&lt;/pre&gt;
&lt;pre&gt;
# USERNAME和ORGANIZATION改为实际的文件名称
cd ~/Downloads
cp USERNAME.pem ~/Documents/chef-repo/.chef
cp ORGANIZATION-validator.pem ~/Documents/chef-repo/.chef
cp knife.rb ~/Documents/chef-repo/.chef&lt;/pre&gt;
&lt;pre&gt;
#测试连接opscode platform
knife client list
#成功连接则显示validator的数组，如
#[ &quot;shopqi-validator&quot; ]&lt;/pre&gt;
&lt;h3&gt;为vps安装ruby及chef客户端环境&lt;/h3&gt;
&lt;pre&gt;
knife bootstrap 188.188.188.188 -u root -P 123456
#ssh登录服务器不再需要输入密码
ssh root@188.188.188.188 'sh -c &quot;mkdir ~/.ssh&quot;'
scp ~/.ssh/id_rsa.pub root@188.188.188.188:/root/.ssh/authorized_keys&lt;/pre&gt;
&lt;h3&gt;远程测试是否安装正常&lt;/h3&gt;
&lt;pre&gt;
ssh root@188.188.188.188
chef-client
#如果出现错误，可使用调试模式
chef-client -l debug&lt;/pre&gt;
&lt;h2&gt;让vps运行第一个cookbook&lt;/h2&gt;
&lt;p&gt;安装完服务器操作系统后，第一件事情就是更新软件&lt;br /&gt;
一般情况下，我们会在服务器上运行命令&lt;/p&gt;
&lt;pre&gt;
sudo apt-get update&lt;/pre&gt;
&lt;p&gt;现在我们要通过chef来指定vps运行此命令&lt;/p&gt;
&lt;h3&gt;本地安装apt cookbook&lt;/h3&gt;
&lt;pre&gt;
#此命令最常用，会从opscode官网 &quot;http://cookbooks.opscode.com/&quot;:http://cookbooks.opscode.com/ 下载cookbook
knife cookbook site vendor apt&lt;/pre&gt;
&lt;p&gt;为node加入recipe&lt;/p&gt;
&lt;pre&gt;
knife node list
#以上查看node id，假如为201166，现在查看node的run_list
knife node show 201166 -r
#加入apt recipe到vps的run list中
knife node run_list add 201166 &quot;recipe[apt]&quot;
knife node show 201166 -r
knife cookbook upload -a&lt;/pre&gt;
&lt;h3&gt;远程登录vps，开始按run_list运行指定recipe&lt;/h3&gt;
&lt;pre&gt;
ssh root@188.188.188.188
chef-client
#每次本地更新后都要在远程运行chef-client比较麻烦，可以使用以下命令，设置为后台程序运行
chef-client -i 3600 -s 600&lt;/pre&gt;
&lt;h2&gt;安装ruby-on-rails3&lt;/h2&gt;
&lt;h3&gt;下载cookbook&lt;/h3&gt;
&lt;pre&gt;
#参数-d要求下载依赖的cookbook
knife cookbook site vendor rvm -d
#此cookbook调用了chef内置的deploy resource，实现类似于capistrano的部署功能
#但此cookbook还依赖了java cookbook等，忽略它们即可
knife cookbook site vendor application -d&lt;/pre&gt;
&lt;h3&gt;新增apps data bag&lt;/h3&gt;
&lt;p&gt;data bag相当于全局变量，application cookcook需要根据apps指定role,recipe等参数&lt;/p&gt;
&lt;pre&gt;
export EDITOR=vim
#参考 &quot;https://github.com/opscode/cookbooks/tree/master/application&quot;:https://github.com/opscode/cookbooks/tree/master/application 将json粘贴进来
#退出vim时，data bag会被自动上传至chef server，本地不保存
knife data bag create apps 55true
#保存至本地
mkdir data_bags/apps
knife data bag show apps 55true &amp;gt; data_bags/apps/55true.json
knife data bag from file apps 55true.json&lt;/pre&gt;
&lt;h3&gt;新增role rails&lt;/h3&gt;
&lt;pre&gt;
export EDITOR=vim
knife role create rails&lt;/pre&gt;
&lt;h3&gt;Tip&lt;/h3&gt;
&lt;p&gt;服务器集群中可能会区分出production, staging环境，也可能同一应用部署在多台服务器中，但只需由其中的一台服务器运行数据库迁徙脚本&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;新增production, staging等role，设置app_environment attribute，分配至相应的node，这样可以重复使用deploy cookbook&lt;/li&gt;
	&lt;li&gt;新增app_name_run_migrations role，设置run_migrations attribute&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;常用cookbook&lt;/h2&gt;
&lt;p&gt;以下列出在 &lt;a href=&quot;https://github.com/opscode/cookbooks&quot;&gt;https://github.com/opscode/cookbooks&lt;/a&gt; 中常用的cookbook&lt;/p&gt;
&lt;h3&gt;apt&lt;/h3&gt;
&lt;p&gt;此recipt会运行apt-get update，用于更新操作系统&lt;/p&gt;
&lt;h3&gt;runit&lt;/h3&gt;
&lt;p&gt;用于保证unicorn等服务时刻处于运行状态&lt;br /&gt;
runsvdir服务会不停地监测/etc/sv目录下的服务目录，每个目录对应一个runsv服务&lt;br /&gt;
如果某个runsv服务出现故障停止了,runsvdir会自动重新启动它&lt;/p&gt;
&lt;pre&gt;
#sv服务不启动时查看日志
ps -ef | grep runsvdir
#查看服务的状态
sv stat unicorn_server
#查看服务的日志
tail -f /etc/sv/unicorn_server/log/main/current&lt;/pre&gt;
&lt;h3&gt;bluepill&lt;/h3&gt;
&lt;p&gt;runit保证了服务的运行，bluepill保证进程的cpu、memory占用率处于正常水平&lt;/p&gt;
&lt;h3&gt;users&lt;/h3&gt;
&lt;p&gt;新增用户，用户定义在users data bag中&lt;/p&gt;
&lt;h3&gt;mongodb&lt;/h3&gt;
&lt;p&gt;安装1.6.5版本的mongo server&lt;br /&gt;
&lt;a href=&quot;https://github.com/papercavalier/mongodb-cookbook&quot;&gt;https://github.com/papercavalier/mongodb-cookbook&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;unicorn&lt;/h3&gt;
&lt;p&gt;经过对比，还是选择37signal的unicorn cookbook，因为支持多app部署，而unicornapp不支持(opscode官方已经删除此cookbook)。为了对unicorn子线程进行监控，两者都使用了bluepill取代God进行监控。&lt;br /&gt;
注意：在production环境下，rails3默认不会处理public目录下静态文件的请求，所以不能像dev环境下直接通过指定端口访问某个unicorn服务&lt;/p&gt;
&lt;h3&gt;application&lt;/h3&gt;
&lt;p&gt;&lt;del&gt;这个包含太多的依赖cookbook了，经过以上的实践，还是觉得不用它了，因为里面对rails项目有用的就是deploy部分，自己重写一个也很容易&lt;/del&gt;&lt;/p&gt;
&lt;h2&gt;注意事项&lt;/h2&gt;
&lt;p&gt;在service或者definition中传递参数时，如果将父params需要级联传递下去，得手动为params赋值至其他变量，因为在service或者definition块中，params参数已经被当前块覆盖了&lt;br /&gt;
详情参考：&amp;quot;http://tickets.opscode.com/browse/&lt;span class=&quot;caps&quot;&gt;CHEF&lt;/span&gt;-422&amp;quot;&lt;/p&gt;
&lt;h2&gt;参考资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://www.slideshare.net/adamhjk/infrastructure-automation-with-chef&quot; title=&quot;Read This First&quot;&gt;Infrastructure Automation with Chef&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.themomorohoax.com/2010/07/31/ruby-chef-tutorial&quot;&gt;Getting started with Chef tutorial&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.agileweboperations.com/getting-started-with-the-opscode-chef-platform-configuration-management-in-the-cloud&quot;&gt;Getting Started With The Opscode Chef Platform – Configuration Management In The Cloud&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.agileweboperations.com/how-to-deploy-ruby-on-rails-with-the-opscode-chef-application-cookbook&quot;&gt;How to Deploy Ruby on Rails With The Opscode Chef Application Cookbook&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://brainspl.at/articles/2009/01/31/cooking-with-chef-101&quot;&gt;Cooking with Chef 101&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.slideshare.net/adamhjk/why-startups-need-automated-infrastructures&quot;&gt;Why Startups Need Automated Infrastructures&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://wiki.opscode.com/display/chef/Deploy+Resource&quot;&gt;Deploy Resource&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://github.com/opscode/cookbooks/tree/master/application&quot;&gt;application cookbook&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://smarden.org/runit/&quot;&gt;runit&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>应用node.js,redis,resque构建实时项目</title>
      <link href="http://saberma.me/rails/2011/01/10/node-js-juggeraut-redis-resque.html"/>
      <updated>2011-01-10T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2011/01/10/node-js-juggeraut-redis-resque</id>
      <content type="html">&lt;p&gt;我对javascript语言还是很喜欢，所以对node.js这么有创意的东西，很早就开始关注了。&lt;br /&gt;
据说在实时领域的表现非常好，资源占用也不多，很想实践一番，以后正式项目有对实时性的需求，就可以放心地使用node.js了。&lt;/p&gt;
&lt;p&gt;所以我决定将 &lt;a href=&quot;https://github.com/saberma/55true&quot;&gt;55true&lt;/a&gt; 重新开发，加入即时问答的机制，普通功能开发上使用rails3，而实时性上应用node.js。&lt;br /&gt;
虽然node.js相关的框架已经非常多，也有类似于rails的MVC框架，但是毕竟发展时间还不长，所以使用rails结合node.js的方式进行开发是个不错的发展方式，各取所长。&lt;/p&gt;
&lt;h2&gt;Node.js&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/redis/nodejs.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;node.js是一种可以用js来编写的服务端程序&lt;/p&gt;
&lt;p&gt;这次使用 &lt;a href=&quot;https://github.com/maccman/juggernaut&quot;&gt;https://github.com/maccman/juggernaut&lt;/a&gt; 框架，结合redis，实现rails与node.js服务的交互。&lt;br /&gt;
node.js的发展非常的快，有类似于rails bundler的插件管理工具npm，但为降低node.js相关框架的管理复杂度，我直接将juggernaut及其依赖的js文件都放在 &lt;a href=&quot;https://github.com/saberma/55true&quot;&gt;55true&lt;/a&gt; 的根目录。&lt;/p&gt;
&lt;h3&gt;安装&lt;/h3&gt;
&lt;pre&gt;
cd ~/Downloads
wget http://nodejs.org/dist/node-v0.2.6.tar.gz
tar -xzvf node-v0.2.6.tar.gz
cd node-v0.2.4
./configure
make
make install&lt;/pre&gt;
&lt;h3&gt;Juggernaut&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/maccman/juggernaut&quot;&gt;Juggernaut&lt;/a&gt; 是包含服务端及客户端的实时解决方案，最初服务端是用ruby eventmachine实现的。&lt;br /&gt;
node.js出来后，整个框架就用node.js重写了&lt;/p&gt;
&lt;h3&gt;启动Juggeranut&lt;/h3&gt;
&lt;pre&gt;
#node server.js
sudo node server.js&lt;/pre&gt;
&lt;p&gt;使用root帐号启动，否则firefox客户端访问会报错&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Flash is optional, but it&amp;#8217;s the default fallback for Firefox (until the beta is released). Start the server using root if you want Flash support. It needs to open a restricted por&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Redis&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/redis/redis.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;redis是类似于memcached的高性能键值缓存工具，但它支持更多的值类型、功能更加丰富，且可以将存储内容定时持久化到磁盘中，是NoSQL家庭中出色的一员&lt;/p&gt;
&lt;h3&gt;安装&lt;/h3&gt;
&lt;pre&gt;
wget https://github.com/antirez/redis/tarball/2.2.0-rc2
tar -xzvf antirez-redis-2.2.0-rc2-0-g0540df2.tar.gz
cd antirez-redis-b703b5d
make
sudo make install&lt;/pre&gt;
&lt;h3&gt;客户端&lt;/h3&gt;
&lt;pre&gt;
redis-cli&lt;/pre&gt;
&lt;h3&gt;调试&lt;/h3&gt;
&lt;p&gt;运行客户端后，输入命令&lt;/p&gt;
&lt;pre&gt;
monitor&lt;/pre&gt;
&lt;h3&gt;注意expire&lt;/h3&gt;
&lt;p&gt;redis的expire命令有限制，执行此命令后，对key进行的任何操作都将先对key进行清空操作，详见 &lt;a href=&quot;http://redis.io/topics/expire&quot;&gt;http://redis.io/topics/expire&lt;/a&gt;&lt;br /&gt;
2.1.3以上版本不存在这个限制，但未正式发布稳定版，2.1正式发布时会更改为2.2版本&lt;/p&gt;
&lt;p&gt;具体表现如下:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;redis&amp;gt; set a 100&lt;br /&gt;
OK&lt;br /&gt;
redis&amp;gt; expire a 600&lt;br /&gt;
(integer) 1&lt;br /&gt;
redis&amp;gt; incr a&lt;br /&gt;
(integer) 1&lt;br /&gt;
redis&amp;gt; get a&lt;br /&gt;
&amp;#8220;1&amp;#8221; #正常来说，应返回101，因为还key还没有过期&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如果对这个限制敏感，可以尝试 &lt;a href=&quot;http://redis.io/download&quot;&gt;2.2.0rc2版本&lt;/a&gt;&lt;br /&gt;
&lt;code&gt;make&lt;/code&gt; 之后最好再执行下 &lt;code&gt;make test&lt;/code&gt; 测试是否正常，我试过，确实不再存在上面说的奇怪表现&lt;/p&gt;
&lt;h3&gt;redis-rb&lt;/h3&gt;
&lt;p&gt;redis支持多语言实现的客户端访问，redis-rb是redis的客户端之一，基于ruby语言实现。&lt;br /&gt;
redis-rb中的方法名称与redis的一致&lt;/p&gt;
&lt;h2&gt;Resque&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/redis/resque.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;resque是基于redis的后台任务组件，能把任何类或模块作为任务在后台执行，且自带前台管理功能，方便查看执行情况。&lt;/p&gt;
&lt;h3&gt;使用&lt;/h3&gt;
&lt;p&gt;1. 编写任务&lt;/p&gt;
&lt;pre&gt;
class WorkerClass
  @queue = &quot;demo&quot;
  def self.perform(args)
    sleep 3 
    puts &quot;Doing something complex with  #{args}&quot;
  end
end&lt;/pre&gt;
&lt;p&gt;2. 进入任务队列&lt;/p&gt;
&lt;pre&gt;
require &quot;resque&quot;
Resque.enqueue(WorkerClass, args)&lt;/pre&gt;
&lt;p&gt;3. 运行任务&lt;/p&gt;
&lt;h3&gt;与rails3整合&lt;/h3&gt;
&lt;p&gt;0. 配置redis&lt;br /&gt;
新增 &lt;code&gt;config/redis.yml&lt;/code&gt; 文件，加入以下内容&lt;/p&gt;
&lt;pre&gt;
defaults: &amp;amp;defaults
  host: localhost
  port: 6379

development:
  &amp;lt;&amp;lt;: *defaults

test:
  &amp;lt;&amp;lt;: *defaults

staging:
  &amp;lt;&amp;lt;: *defaults

production:
  &amp;lt;&amp;lt;: *defaults
&lt;/pre&gt;
&lt;p&gt;1. 加载resque&lt;/p&gt;
&lt;pre&gt;
echo &quot;require 'resque'&quot; &amp;gt; config/initializers/load_resque.rb
config = YAML::load(File.open(&quot;#{Rails.root}/config/redis.yml&quot;))[Rails.env]
Resque.redis = Redis.new(:host =&amp;gt; config['host'], :port =&amp;gt; config['port'])&lt;/pre&gt;
&lt;p&gt;2. 由于worker类都放在app/jobs，因此需要指定rails加载此目录&lt;br /&gt;
修改 &lt;code&gt;config/application.rb&lt;/code&gt;，加入以下内容&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;config.autoload_paths += %W(#{config.root}/app/jobs)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;3. 加入rake任务&lt;br /&gt;
修改 @RakeFile@，加入以下内容&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;require &amp;#8216;resque/tasks&amp;#8217;&lt;br /&gt;
task &amp;#8220;resque:setup&amp;#8221; =&amp;gt; :environment&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;第二句指明运行 &lt;code&gt;resque:setup&lt;/code&gt; 前先初始化rails环境&lt;/p&gt;
&lt;h3&gt;运行resque后台任务&lt;/h3&gt;
&lt;pre&gt;
QUEUE=* rake resque:work&lt;/pre&gt;
&lt;h3&gt;查看任务执行情况&lt;/h3&gt;
&lt;pre&gt;
#运行resque前台管理服务器
resque-web -p 8282&lt;/pre&gt;
&lt;p&gt;打开浏览器，访问 &lt;a href=&quot;http://0.0.0.0:8282&quot;&gt;http://0.0.0.0:8282&lt;/a&gt;&lt;br /&gt;
前台可以查看失败的worker及其日志，可以手动执行retry操作&lt;/p&gt;
&lt;h3&gt;定时任务&lt;/h3&gt;
&lt;p&gt;如需定时执行任务，可以使用 &lt;a href=&quot;https://github.com/bvandenbos/resque-scheduler&quot;&gt;resque-scheduler&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;测试&lt;/h3&gt;
&lt;p&gt;在测试的时候我们不需要测试过程与resque是异步的,否则resque执行的时候数据可能已经被清空了,使用resque_spec插件可以让resque worker立即执行&lt;/p&gt;
&lt;p&gt;详情查看 &lt;a href=&quot;https://github.com/leshill/resque_spec&quot;&gt;https://github.com/leshill/resque_spec&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;参考资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://redis.io/commands&quot;&gt;Resque commands&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://github.com/defunkt/resque&quot;&gt;Resque github repository&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://blog.redistogo.com/2010/07/26/resque-with-redis-to-go/&quot;&gt;Resque with redis to go&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://rubylearning.com/blog/2010/11/08/do-you-know-resque/&quot;&gt;Do you know resque&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://blog.llamarada.net/?p=2202&quot;&gt;resque-scheduler, resque, rails integration, redis&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>部署rails项目到heroku，并使用mongohq文档数据库</title>
      <link href="http://saberma.me/rails/2010/12/23/deploy-rails-app-to-heroku-and-use-mongohq.html"/>
      <updated>2010-12-23T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2010/12/23/deploy-rails-app-to-heroku-and-use-mongohq</id>
      <content type="html">&lt;h2&gt;简介&lt;/h2&gt;
&lt;h3&gt;Heroku&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/heroku/heroku.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;heroku作为rails项目的托管商，具有功能完备、操作简单等优点，而且提供免费服务&lt;br /&gt;
免费项目只提供一个应用服务进程(即只同时在线1个)，提供5m免费关系型数据库&lt;/p&gt;
&lt;h3&gt;MongoHQ&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/heroku/mongohq.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;p&gt;mongohq提供mongodb文档数据库的在线存储服务&lt;br /&gt;
免费帐号每个数据库有16m的存储空间，heroku已经支持mongohq，将之纳入addons中&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;因此，想要把迷你型或实验性的项目放到网上，又想免费，heroku是最好的选择了&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这几天想要查找域名，需要批量查找5-8位拼音组合的.com域名(四位的已绝迹)&lt;br /&gt;
所以写了个程序批量查找有效域名，放到heroku上。&lt;/p&gt;
&lt;h2&gt;安装heroku&lt;/h2&gt;
&lt;pre&gt;
gem install heroku --no-ri -no-rdoc&lt;/pre&gt;
&lt;h3&gt;安装其他&lt;/h3&gt;
&lt;p&gt;rails3及mongodb等环境的安装，可参考 &lt;a href=&quot;http://github.com/saberma/shopqi&quot;&gt;http://github.com/saberma/shopqi&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;新增项目&lt;/h2&gt;
&lt;h3&gt;新增rails项目&lt;/h3&gt;
&lt;pre&gt;
rails new test_heroku
cd test_heroku
#修改GemFile，加入必要的Gem
#...
#生成mongoid配置文件
rails g mongoid:config
git init
git add .
git commit -m &quot;new app&quot;&lt;/pre&gt;
&lt;h3&gt;新建heroku app&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;先到 &lt;a href=&quot;heroku.com&quot;&gt;heroku.com&lt;/a&gt; 注册帐号&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
heroku create test_heroku
#按提示输入注册时的帐号和密码&lt;/pre&gt;
&lt;h3&gt;加入MongoHQ Addon&lt;/h3&gt;
&lt;pre&gt;
heroku addons:add mongohq:free
#查看新增的数据库信息(MONGOHQ_URL部分)
heroku config --long&lt;/pre&gt;
&lt;p&gt;修改 &lt;code&gt;config/mongoid.yml&lt;/code&gt;, production只留以下内容&lt;/p&gt;
&lt;pre&gt;
production:
  uri: &amp;lt;%= ENV['MONGOHQ_URL'] %&amp;gt;&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;mongoid已经支持uri参数了，不需要像mongohq官方文档描述的那样，增加config/initialize/mongo.rb文件&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;部署至heroku&lt;/h3&gt;
&lt;pre&gt;
git push heroku master&lt;/pre&gt;
&lt;h3&gt;测试&lt;/h3&gt;
&lt;p&gt;浏览器访问 &lt;a href=&quot;http://test_heroku.heroku.com&quot;&gt;http://test_heroku.heroku.com&lt;/a&gt; ，看是否显示rails的信息&lt;/p&gt;
&lt;h2&gt;在MongoHQ中查看数据&lt;/h2&gt;
&lt;ol&gt;
	&lt;li&gt;登录 &lt;a href=&quot;https://mongohq.com/databases&quot;&gt;MongoHQ&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;点击右边栏按钮&amp;quot;Add a Remote Connection&amp;quot;&lt;/li&gt;
	&lt;li&gt;输入Name和URI，确定&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;URI为heroku中通过 &lt;code&gt;heroku config --long&lt;/code&gt; 查看到的MONGOHQ_URL内容&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;heroku常用命令&lt;/h2&gt;
&lt;pre&gt;
# 运行rake
heroku rake db:seed
# 运行控制台
# 查看运行进行
heroku ps
# 查看日志
heroku logs
# 查看参数
heroku config --long
# 重命名(子域名)
heroku rename newname
heroku console&lt;/pre&gt;
&lt;h2&gt;参考资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://docs.heroku.com/&quot;&gt;Heroku Docs&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://docs.mongohq.com/ruby-heroku-addon&quot;&gt;MongoHQ Heroku Addon&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://github.com/nbrochu/bulkdom&quot;&gt;Batch Search Domains&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://vimim.googlecode.com/files/fcitx.phrase.pinyin.txt&quot;&gt;Fcitx Phrase Pinyin&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://open-phrase.googlecode.com/files/phrase_pinyin_freq_sc_20090402.txt.bz2&quot;&gt;Pinyin Frequence&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>在Ubuntu环境下安装最土团购开源php程序</title>
      <link href="http://saberma.me/php/2010/12/18/zuitu-tuangou-php-install-in-ubuntu.html"/>
      <updated>2010-12-18T00:00:00+08:00</updated>
      <id>http://saberma.me/php/2010/12/18/zuitu-tuangou-php-install-in-ubuntu</id>
      <content type="html">&lt;h2&gt;下载&lt;/h2&gt;
&lt;p&gt;在最土官网下载&lt;br /&gt;
&lt;a href=&quot;http://notice.zuitu.com/down/ZuituGo_V1.6.tar.gz&quot;&gt;http://notice.zuitu.com/down/ZuituGo_V1.6.tar.gz&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;安装mysql数据库&lt;/h2&gt;
&lt;p&gt;sudo apt-get install mysql-server&lt;/p&gt;
&lt;h2&gt;安装php环境&lt;/h2&gt;
&lt;pre&gt;
#apache
sudo apt-get install apache2
#php5(默认带有mbstring组件)
sudo apt-get install php5
#配置APACHE+PHP
sudo apt-get install libapache2-mod-php5
sudo /etc/init.d/apache2 restart
#mysql相关
sudo apt-get install libapache2-mod-auth-mysql
sudo apt-get install php5-mysql
sudo /etc/init.d/apache2 restart&lt;/pre&gt;
&lt;h2&gt;安装程序&lt;/h2&gt;
&lt;p&gt;将压缩包中的wwwroot下的内容解压至/var/www目录下&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如需修改apache webroot黙认路径，请修改/etc/apache2/sites-enabled/000-default文件&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
#修改目录归属于当前用户saberma
chown saberma /var/www
#修改目录可写权限
chmod a+w static/user
chmod a+w static/team
chmod a+w include/compiled
chmod a+w include/configure
chmod a+w include/data/
chmod a+w include/template/&lt;/pre&gt;
&lt;h2&gt;配置&lt;/h2&gt;
&lt;p&gt;浏览器打开 &lt;code&gt;http://localhost/install.php&lt;/code&gt;&lt;br /&gt;
输入数据库密码后点击安装即可&lt;/p&gt;
&lt;p&gt;安装完成后需要手动删除install.php&lt;/p&gt;
&lt;pre&gt;
rm /var/www/install.php&lt;/pre&gt;
&lt;h2&gt;调试&lt;/h2&gt;
&lt;h3&gt;打开日志&lt;/h3&gt;
&lt;p&gt;为方便初期调试错误，需要打开错误日志输出功能&lt;br /&gt;
修改 &lt;code&gt;/etc/php5/apache2/php.ini&lt;/code&gt; 的以下内容&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;error_reporting = E_ALL&lt;br /&gt;
display_error = on&lt;br /&gt;
html_errors = on&lt;br /&gt;
log_errors = off&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;查看php环境信息&lt;/h3&gt;
&lt;p&gt;在网站根目录中新增phpinfo.php文件，内容如下&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;lt;?php phpinfo()?&amp;gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;浏览器打开phpinfo.php，即可看到环境信息&lt;/p&gt;
&lt;h2&gt;部署&lt;/h2&gt;
&lt;p&gt;一般情况下，PHP的虚拟空间只能使用ftp，而项目代码使用git进行版本控制&lt;br /&gt;
为了让git管理下的项目代码能够直接发送至ftp，需要安装 &lt;a href=&quot;http://github.com/resmo/git-ftp&quot;&gt;git-ftp&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;
#ubuntu10.04下的安装过程
sudo -s
add-apt-repository ppa:resmo/git-ftp
aptitude update
aptitude install git-ftp
exit&lt;/pre&gt;
&lt;p&gt;配置ftp地址、用户名及密码&lt;/p&gt;
&lt;pre&gt;
git config git-ftp.user saberma
git config git-ftp.url ftp.example.com
git config git-ftp.password secr3t&lt;/pre&gt;
&lt;p&gt;修改文件后，使用以下命令部署&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;git ftp push&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;参考资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://www.zuitu.com/download_new.html&quot;&gt;最土官网下载说明&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>开发iphone游戏确实能赚钱</title>
      <link href="http://saberma.me/iphone/2010/11/26/iphone-game-developer-do-to-make-money.html"/>
      <updated>2010-11-26T00:00:00+08:00</updated>
      <id>http://saberma.me/iphone/2010/11/26/iphone-game-developer-do-to-make-money</id>
      <content type="html">&lt;h2&gt;收到iphone汇过来的美元了&lt;/h2&gt;
&lt;p&gt;上个月，我发现我的信用卡帐号多了164.62美元(显示-164.62)，难道苹果结算了，想想应该不可能，我那小游戏没那么快能卖够150美元的，再说了要是结了总会给我发邮件通知吧。&lt;/p&gt;
&lt;p&gt;所以我就想是不是银行出错了，就在我犹豫着是用了再说，还是主动报告给银行的时候，我登录了 &lt;a href=&quot;https://itunesconnect.apple.com&quot;&gt;https://itunesconnect.apple.com&lt;/a&gt; (之前都是用 &lt;a href=&quot;appannie.com&quot;&gt;appannie.com&lt;/a&gt; 看报表，直观很多)，咦:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/iphone/payment.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;图片显示在9月2日apple确实汇了美元过来了:)，根据apple开发协议，都是月初结账，150美元起才会汇款&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;开发这个小游戏的初衷就是想了解下iphone程序及游戏的开发流程，所以能不能赚钱、赚多赚少都没有关系&lt;br /&gt;
现在出乎我意料的是，竟然不会亏钱了，之前加入apple会员时，交纳的99美元年费也回来了，所以结论是：&lt;/p&gt;
&lt;p&gt;&lt;b&gt;如果你专注iphone游戏开发，绝对是可以赚到钱的&lt;/b&gt;&lt;/p&gt;
&lt;p&gt;我在6月份辞职后就不再花精力在iphone app的开发上了，专注于 &lt;a href=&quot;https://github.com/saberma/shopqi&quot;&gt;shopqi独立网店平台&lt;/a&gt; 的开发，因为人的精力有限，要把事情做好的话，同一时间只能做一件事&lt;/p&gt;
&lt;h2&gt;如果您准备进入iphone开发领域，我给点小建议:&lt;/h2&gt;
&lt;ol&gt;
	&lt;li&gt;创意不是最重要的，有创意最好，没创意就先做点小的，掌握技术、市场，熟悉这些后一有创意就可以快速开发出来了，关注是能不能做到精致&lt;/li&gt;
	&lt;li&gt;宣传很重要，一定要在各大iphone论坛发贴介绍，特别是国内的 &lt;a href=&quot;http://www.cocoachina.com&quot;&gt;cocoachina.com&lt;/a&gt; ，发放推广码求review&lt;/li&gt;
	&lt;li&gt;一定要经常更新，记住敏捷开发中的 &lt;code&gt;小步快进&lt;/code&gt; 原则，apple的推广码有数量限制，每次更新，推广码数量也会重新起算&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;参考资源&lt;/h2&gt;
&lt;p&gt;游戏的主页: &lt;a href=&quot;http://www.55xiaoyou.com&quot;&gt;http://www.55xiaoyou.com&lt;/a&gt;&lt;br /&gt;
游戏源代码地址: &lt;a href=&quot;http://github.com/saberma/BrainShot&quot;&gt;http://github.com/saberma/BrainShot&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;BrainShot具有以下特征&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;基于cocos2d开发(&lt;a href=&quot;http://www.cocos2d-iphone.org/&quot;&gt;http://www.cocos2d-iphone.org&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;兼容iphone,ipad&lt;/li&gt;
	&lt;li&gt;兼容免费版、收费版，用户下载的免费版可以直接升级至收费版(即应用了In App Purchases)&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;对初学者还是有点参考价值&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;说说在此之前的另一个iphone app&lt;/h2&gt;
&lt;p&gt;如果您有iphone，但没有mac机，可以参考我之前写的文章 &lt;a href=&quot;/2010/02/24/iphone-development.html&quot;&gt;在ubuntu上开发iphone app&lt;/a&gt;&lt;br /&gt;
相应的程序源代码地址: &lt;a href=&quot;http://github.com/saberma/iphone&quot;&gt;http://github.com/saberma/iphone&lt;/a&gt;&lt;br /&gt;
此demo程序实现以下功能：&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;显示客户用户名等信息的列表，可进行增删改操作&lt;/li&gt;
	&lt;li&gt;可以给客户拍照，并保存&lt;/li&gt;
	&lt;li&gt;即时将客户信息无线上传至远程服务端&lt;/li&gt;
	&lt;li&gt;支持mac平台下开发、ubuntu环境下开发&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这个程序是以前公司安排的demo开发任务，给意向客户演示用的，demo包括两个后台服务端和iphone客户端两部分，难度很大。&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;之前没有接触过mac操作系统、开发环境 &lt;code&gt;XCode&lt;/code&gt; 不懂、开发语言 &lt;code&gt;Object C&lt;/code&gt; 、相应的开发框架 &lt;code&gt;cocos2d&lt;/code&gt; 也不了解&lt;/li&gt;
	&lt;li&gt;时间很紧，就10天，白天上班还得开发另一个项目(进度也很急)的工作流引擎，只能晚上做&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;但是，最后还是做出来了，每天晚上做到12点左右，累是很累(之后连续半年肚脐对应的后背颈椎老痛)，却很开心，这是我最喜欢的项目之一。&lt;br /&gt;
现在每每回想起来，都会对我的领导谢总和张总心存感激之情，给了我太多的实践机会。&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>应用gitflow建立代码开发标准化流程</title>
      <link href="http://saberma.me/git/2010/10/25/git-flow.html"/>
      <updated>2010-10-25T00:00:00+08:00</updated>
      <id>http://saberma.me/git/2010/10/25/git-flow</id>
      <content type="html">&lt;p&gt;我们已经使用git进行版本管理，为更好地进行协同开发工作，需要对流程进行规范&lt;br /&gt;
&lt;strong&gt;&lt;a href=&quot;http://github.com/saberma/shopqi&quot;&gt;shopqi网店平台&lt;/a&gt; 产品开发将遵循此流程&lt;/strong&gt;, 以下对git的开发流程进行描述&lt;/p&gt;
&lt;h2&gt;开发流程&lt;/h2&gt;
&lt;p&gt;在开发的过程中存在以下情况:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;情况1: 开发新特性&lt;br /&gt;
情况2: 紧急修正生产环境中报告的Bug&lt;br /&gt;
情况3: 支援其他成员，帮忙调试&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;假如我们在master主分支中进行新特性的开发，这时如果发生情况2，处理起来比较麻烦。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;正确的实践应该是:&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;master主分支保致与对外发布的版本同步&lt;/li&gt;
	&lt;li&gt;每个新特性(feature)都有独立的分支&lt;/li&gt;
	&lt;li&gt;将多个新特性(feature)分支合并至发布(release)分支&lt;/li&gt;
	&lt;li&gt;待发布(release)分支完成后再合并至master主分支，正式对外发布&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;应用gitflow&lt;/h2&gt;
&lt;p&gt;gitflow是开源的标准化git流程协助工具，项目地址在 &lt;a href=&quot;http://github.com/nvie/gitflow&quot;&gt;http://github.com/nvie/gitflow&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;安装(Ubuntu环境)&lt;/h3&gt;
&lt;pre&gt;
wget -qO- --no-check-certificate http://github.com/nvie/gitflow/raw/develop/contrib/gitflow-installer.sh | sudo sh
sudo apt-get install opt&lt;/pre&gt;
&lt;p&gt;其他操作系统安装gitflow请参考 &lt;a href=&quot;http://github.com/nvie/gitflow&quot;&gt;http://github.com/nvie/gitflow&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;使用方法&lt;/h3&gt;
&lt;pre&gt;
#初始化(提问时回车就好)
git flow init&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;开发新特征&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
git flow feature start &amp;lt;name&amp;gt; [&amp;lt;base&amp;gt;]
git flow feature finish &amp;lt;name&amp;gt;
#列出新特征分支
git flow feature&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;准备发布版本&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
git flow release start &amp;lt;name&amp;gt; [&amp;lt;base&amp;gt;]
git flow release finish &amp;lt;name&amp;gt;
#列出发布分支
git flow release&lt;/pre&gt;
&lt;p&gt;&amp;lt; base &amp;gt;是位于develop分支的commit&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;修正紧急Bug&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
git flow hotfix start &amp;lt;name&amp;gt; [&amp;lt;base&amp;gt;]
git flow hotfix finish &amp;lt;name&amp;gt;
#列出修正分支
git flow hotfix&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;支援其他成员工作&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
git flow support start &amp;lt;name&amp;gt; &amp;lt;base&amp;gt;
#没有finish?(待实践)
#列出支援分支
git flow support&lt;/pre&gt;
&lt;p&gt;&amp;lt; base &amp;gt;是位于master分支的commit&lt;/p&gt;
&lt;h2&gt;结合github&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;上传未完成的feature分支&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
#git push REMOTENAME BRANCHNAME
#一般情况下REMOTENAME即为origin, BRANCHNAME为以feature/为前缀的分支名称
git push origin feature/orders&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;注意:对于develop分支，由于所有成员的本地库中都有，所以不能上传&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;http://nvie.com/posts/a-successful-git-branching-model/&quot;&gt;A successful Git branching model&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://jeffkreeftmeijer.com/2010/why-arent-you-using-git-flow/&quot;&gt;Why aren&amp;#8217;t you using git-flow?&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://help.github.com/remotes/&quot;&gt;github remotes&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;</content>
    </entry>
  
    <entry>
      <title>应用jekyll构建基于github page的博客</title>
      <link href="http://saberma.me/other/2010/09/20/saberma-github-page-blog-build-with-jekyll.html"/>
      <updated>2010-09-20T00:00:00+08:00</updated>
      <id>http://saberma.me/other/2010/09/20/saberma-github-page-blog-build-with-jekyll</id>
      <content type="html">&lt;p&gt;基于github page的博客好处:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;简单至极，且完全免费&lt;br /&gt;
可以支持rss订阅，评论功能&lt;br /&gt;
依赖于git，文章原生支持版本控制(对比)，更有利于知识库类文章&lt;br /&gt;
可以使用vim编写文章，写的时候像在写代码，更符合程序员的习惯&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;本博客此次除了启用全新个人域名saberma.me，将做以下调整&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;美化网站风格，更加的清新:)&lt;br /&gt;
页面布局调整为html5、css3架构&lt;br /&gt;
文章可按分类显示&lt;br /&gt;
代码增加高亮显示&lt;br /&gt;
增加rss feed输出&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;挑个新的博客模板&lt;/h2&gt;
&lt;p&gt;要求是基于html5、css3的免费模板，google之，发现个好地方: &lt;a href=&quot;http://freehtml5templates.com&quot;&gt;http://freehtml5templates.com&lt;/a&gt;&lt;br /&gt;
一页一页的挑吧，总会找到自己喜欢的，可以根据右下角的Tag Cloud进行筛选，现在看到本站的新样子就是找好久才看中的模板&lt;/p&gt;
&lt;h2&gt;绑定独立域名&lt;/h2&gt;
&lt;p&gt;在godaddy中注册 &lt;a href=&quot;http://saberma.em&quot;&gt;saberma.me&lt;/a&gt; 域名，.me专用于博客类型，但比.com贵一些，且没有优惠&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;注册完域名后，在域名管理中增加A record并指向207.97.227.245&lt;/li&gt;
	&lt;li&gt;在你的github项目下增加CNAME文件，内容为你的域名，如 &lt;a href=&quot;http://github.com/saberma/saberma.github.com/blob/master/CNAME&quot;&gt;http://github.com/saberma/saberma.github.com/blob/master/&lt;span class=&quot;caps&quot;&gt;CNAME&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;具体参考 &lt;a href=&quot;http://pages.github.com&quot;&gt;http://pages.github.com&lt;/a&gt; 中 &lt;code&gt;Custom Domains&lt;/code&gt; 部分的内容&lt;/p&gt;
&lt;h2&gt;pygments代码高亮&lt;/h2&gt;
&lt;h3&gt;安装pygments&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;# On Ubuntu 安装&lt;/span&gt;
sudo apt-get install python-pygments
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://wiki.github.com/mojombo/jekyll/install&quot;&gt;完整安装说明&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;生成高亮显示的css文件&lt;/h3&gt;
&lt;p&gt;选择喜欢的样式，记下名称&lt;br /&gt;
&lt;a href=&quot;http://pygments.org/demo/6622&quot;&gt;http://pygments.org/demo/6622&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我选择的是fruity style，作为pygmentize命令style的参数值&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;# 生成相应的css&lt;/span&gt;
pygmentize -S fruity -f html &amp;gt; stylesheets/syntax.css
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;http://pygments.org/docs/quickstart/&quot;&gt;参考pygments Command line usage&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;如何使用&lt;/h3&gt;
&lt;p&gt;语法高亮的代码段&lt;/p&gt;
&lt;pre&gt;
{% highlight ruby %}
def foo
  puts 'foo'
end
{% endhighlight %}
&lt;/pre&gt;
&lt;p&gt;highlight后面第一个参数为language，如php，也可以是ruby控制台irb，更多lanuages可以查询 &lt;a href=&quot;http://pygments.org/docs/lexers/&quot;&gt;http://pygments.org/docs/lexers/&lt;/a&gt;&lt;br /&gt;
第一个参数为必填，不填会导致_site目录生成不了相应的html文件，第二个参数显示行号&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://wiki.github.com/mojombo/jekyll/liquid-extensions&quot;&gt;参考jekyll说明&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Markdown标记与Liquid逻辑处理&lt;/h2&gt;
&lt;h3&gt;两个知识点&lt;/h3&gt;
&lt;ul&gt;
	&lt;li&gt;为避免直接编写html代码，编写文章时，内容需要加入标记信息，即Markdown&lt;/li&gt;
	&lt;li&gt;博客中都是需要经过处理的，比如逻辑判断处理、循环处理，jekyll应用liquid模板语言进行这些处理&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Markdown&lt;/h3&gt;
&lt;p&gt;标记语言有很多种，如textile&lt;br /&gt;
这些标记语言会被标记引擎转换，输出成相应的目标格式（大部分情况是输出成html）&lt;br /&gt;
引擎也有很多种，不同的编程语言有不同的实现，ruby常用的引擎有RedCloth&lt;/p&gt;
&lt;h3&gt;Liquid&lt;/h3&gt;
&lt;p&gt;简单来说，凡是看到{{}}或者{% %}包含的内容都是会被Liquid引擎处理的&lt;/p&gt;
&lt;p&gt;比如*将日期格式化*的liquid语句&lt;/p&gt;
&lt;pre&gt;
{{ post.date | date_to_string }}
&lt;/pre&gt;
&lt;p&gt;除了标记的Liquid语法外，jekyll还扩展出了几个便利的方法，其中有上面介绍的highlight方法&lt;br /&gt;
&lt;a href=&quot;http://wiki.github.com/mojombo/jekyll/liquid-extensions&quot;&gt;jekyll liquid扩展&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://github.com/tobi/liquid/wiki/Liquid-for-Designers&quot;&gt;liquid参考资料&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;整合评论&lt;/h2&gt;
&lt;p&gt;由于github page最终生成的都是静态html页面，所以是没有评论功能呢&lt;br /&gt;
但我们利用disqus实现在线评论功能，先到 &lt;a href=&quot;http://disqus.com&quot;&gt;http://disqus.com&lt;/a&gt; 注册帐号(免费)&lt;br /&gt;
注册成功后，为简单起见，只要把 &lt;code&gt;_includes/post.html&lt;/code&gt; 中的saberma替换为你的注册帐号就行了(disqus_url输入你实际的域名)&lt;/p&gt;
&lt;h2&gt;整合rss订阅&lt;/h2&gt;
&lt;p&gt;因为jekyll可以生成blogs列表，所以我们可以编写atom.xml，由jekyll生成最终xml结果&lt;br /&gt;
&lt;a href=&quot;/atom.xml&quot;&gt;这是我的atom.xml文件&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;将生成的xml地址提交至 &lt;a href=&quot;http://www.feedsky.com&quot;&gt;feedsky.com&lt;/a&gt; ，由feedsky进行管理和美化&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://elemel.se/2009/01/25/setting-up-an-atom-feed-at-github-pages.html&quot;&gt;Setting Up an Atom Feed at GitHub Pages&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;你也想弄一个github page博客?&lt;/h2&gt;
&lt;p&gt;最快的做法是 &lt;a href=&quot;http://github.com/saberma/saberma.github.com&quot;&gt;fork我的博客&lt;/a&gt; ，git clone到你的电脑&lt;br /&gt;
然后修改成你的，具体需要调整的地方是:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;删除_posts中的文章&lt;/li&gt;
	&lt;li&gt;按上面介绍的[整合评论]修改 &lt;code&gt;_includes/post.htm&lt;/code&gt; 文件&lt;/li&gt;
	&lt;li&gt;按上面介绍的[整合rss]修改 &lt;code&gt;atom.xml&lt;/code&gt; 文件&lt;/li&gt;
	&lt;li&gt;修改CNAME的内容为你的独立域名&lt;/li&gt;
	&lt;li&gt;运行jekyll，看看效果&lt;/li&gt;
	&lt;li&gt;上传!ok，访问你的blog地址看看&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;参考资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.envylabs.com/2009/08/publishing-a-blog-with-github-pages-and-jekyll/&quot;&gt;publishing-a-blog-with-github-pages-and-jekyll&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://github.com/mojombo/jekyll/wiki&quot;&gt;jekyll wiki&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://pages.github.com&quot;&gt;http://pages.github.com&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>Rails入门</title>
      <link href="http://saberma.me/rails/2010/03/25/rails-tips.html"/>
      <updated>2010-03-25T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2010/03/25/rails-tips</id>
      <content type="html">&lt;h2&gt;覆盖ActiveRecord属性读写方法&lt;/h2&gt;
&lt;p&gt;比如需要将属性photo的值进行Base64解码后再写入数据库中，可重写方法&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;photo&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encoded_photo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;write_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:photo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Base64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;decode64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encoded_photo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;photo&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Base64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encode64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;read_attribute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:photo&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2&gt;扩展&lt;/h2&gt;
&lt;p&gt;在rails项目中有时需要对model类进行扩展&lt;br /&gt;
比如扩展方法view_id，以获取包含model id和name的字符串&lt;/p&gt;
&lt;p&gt;可以在models目录下新增extensions目录，新增 &lt;code&gt;base.rb&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Extensions&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;Base&lt;/span&gt;
    &lt;span class=&quot;kp&quot;&gt;extend&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ActiveSupport&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Concern&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;module&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;InstanceMethods&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;view_id&lt;/span&gt;
        &lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;downcase&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&amp;quot;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;查看 &lt;a href=&quot;https://github.com/rails/rails/blob/master/activesupport/lib/active_support/concern.rb&quot;&gt;concern源码&lt;/a&gt; 其中的append_features方法在module被include的时候会被调用&lt;br /&gt;
因此扩展类中引入ActiveSupport::Concern类后，会自动include InstanceMethods，如有ClassMethods方法，也会自动extend&lt;/p&gt;
&lt;p&gt;在需要扩展的model类(比如Foo类)中引入扩展类&lt;/p&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;ruby&quot;&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Foo&lt;/span&gt;
  &lt;span class=&quot;kp&quot;&gt;include&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Extensions&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Base&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;参考:&lt;br /&gt;
&lt;a href=&quot;http://ihower.tw/blog/archives/3949&quot;&gt;深入Rails3: ActiveSupport::Concern&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>iphone开发</title>
      <link href="http://saberma.me/iphone/2010/02/24/iphone-development.html"/>
      <updated>2010-02-24T00:00:00+08:00</updated>
      <id>http://saberma.me/iphone/2010/02/24/iphone-development</id>
      <content type="html">&lt;h2&gt;开发目标&lt;/h2&gt;
&lt;p&gt;尝试在mac开发iphone应用，在暂时没拿到apple license前使用(linux)ToolChain编译到越狱后的iphone上测试&lt;br /&gt;
实践结果表示，ToolChain可以稳定的部署至已越狱的iphone上，如果报错(某个实例无法响应某方法)，一般是由于编译时未包含所有的m文件(OBJS变量未包含所有m文件所在目录)&lt;/p&gt;
&lt;h2&gt;搭建开发环境&lt;/h2&gt;
&lt;p&gt;官方SDK开发出的软件需要由苹果进行认证后才能在iphone上安装，费用为99美元，并可在AppStore上销售，苹果提成30%，且开发环境只能在苹果机上搭建&lt;br /&gt;
非官方SDK无须认证，不用交费，开发环境可在任何操作系统进行，缺点是开发过程较为烦琐&lt;/p&gt;
&lt;p&gt;支持3.1&lt;br /&gt;
&lt;a href=&quot;http://code.google.com/p/iphonedevonlinux/wiki/Installation&quot;&gt;iphonedevonlinux&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;del&gt;支持2.2&lt;/del&gt;&lt;br /&gt;
&lt;del&gt;&lt;a href=&quot;http://pimpmiphone.info/howto/install-open-toolchain-on-ubuntu.html&quot;&gt;install-open-toolchain-on-ubuntu&lt;/a&gt;&lt;/del&gt;&lt;br /&gt;
&lt;del&gt;iptc.sh报错，修改appIdKey，增加&lt;/del&gt;-no-check-certificate参数后的版本-&lt;br /&gt;
&lt;del&gt;&lt;a href=&quot;http://gist.github.com/raw/314175/422ce51bfad557af9ea55a45e3acf3451edfa46a/iptc.sh&quot;&gt;iptc.sh&lt;/a&gt;&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;&lt;del&gt;使用iptc.sh可以不看以下内容&lt;/del&gt;&lt;br /&gt;
&lt;del&gt;&lt;a href=&quot;http://code.google.com/p/iphone-dev/wiki/Building&quot;&gt;安装toolchain非官方SDK&lt;/a&gt;&lt;/del&gt;&lt;/p&gt;
&lt;h2&gt;Mac机上的iphone开发&lt;/h2&gt;
&lt;p&gt;注意：模拟器上不支持摄相头，只能通过程序自动判断在模拟器上使用照片浏览，而在iphone上使用camera&lt;/p&gt;
&lt;p&gt;&lt;del&gt;&lt;a href=&quot;http://developer.apple.com/iphone/library/documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html&quot;&gt;应用CoreData持久化数据的例子&lt;/a&gt;&lt;/del&gt;&lt;br /&gt;
不使用CoreData，改用SqlitePersistentObjects，见常用框架&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://developer.apple.com/iphone/library/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedFeatures/AdvancedFeatures.html#//apple_ref/doc/uid/TP40007072-CH14-SW13&quot;&gt;调用摄像头照相的例子&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://developer.apple.com/iphone/library/documentation/Xcode/Conceptual/iphone_development/200-iPhone_Development_FAQ/faq.html&quot;&gt;iphone simulator不支持camera&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;问题&lt;/h2&gt;
&lt;h3&gt;ToolChain编译时找不到Foundation/Foundation.h中的类，如NSData&lt;/h3&gt;
&lt;p&gt;需要在每个报错的source文件中手动加入&lt;/p&gt;
&lt;pre&gt;
#import &amp;lt;Foundation/Foundation.h&amp;gt;
&lt;/pre&gt;
&lt;p&gt;后来发现原来是没有引入Prefix.pch预编译头文件&lt;br /&gt;
在编译时加入以下参数，问题解决&lt;/p&gt;
&lt;pre&gt;
CFLAGS += -include ./*_Prefix.pch
CFLAGS += -x objective-c-header
&lt;/pre&gt;
&lt;h3&gt;如何在编译时引入libsqlite.3.0.dylib&lt;/h3&gt;
&lt;pre&gt;
#LDFLAGS中加入参数
-lsqlite3.0
&lt;/pre&gt;
&lt;h3&gt;ToolChain编译时找不到项目中依赖的h文件&lt;/h3&gt;
&lt;p&gt;暂时没能找到自动查找所有递归子目录的方法，笨拙的办法是在编译时手工加上-Idir参数&lt;/p&gt;
&lt;pre&gt;
CFLAGS += -I./Classes/ObjectiveResource
CFLAGS += -I./Classes/SQLPO/
#有多少子目录就加多少个-I参数
&lt;/pre&gt;
&lt;h3&gt;ToolChain在链接成可执行文件时报错&lt;/h3&gt;
&lt;pre&gt;
Undefined symbols:
  &quot;_main&quot;, referenced from:
        __start in crt1.o
ld: symbol(s) not found
collect2: ld returned 1 exit status
make: *** [HelloToolChain] Error 1
&lt;/pre&gt;
&lt;p&gt;提示内容是，在编译后的o文件中找不到main方法&lt;/p&gt;
&lt;p&gt;经过多次尝试，发现是由于编译main.m时带上了参数&lt;/p&gt;
&lt;pre&gt;
CFLAGS += -include ./*_Prefix.pch
CFLAGS += -x objective-c-header
&lt;/pre&gt;
&lt;p&gt;针对main.m编译时去掉这两个参数后再进行链接就ok了&lt;/p&gt;
&lt;p&gt;为了由MakeFile自动处理main.m的编译，可以加入以下make target，即加入CFLAGS参数&lt;/p&gt;
&lt;pre&gt;
main.o: main.m
  $(CC) -c $&amp;lt; -o $@
&lt;/pre&gt;
&lt;h3&gt;如何处理plist文件中的变量($(PRODUCT_NAME)等)&lt;/h3&gt;
&lt;pre&gt;
#使用sed替换
cat $(PROJECTNAME)-Info.plist | sed 's/$${PRODUCT_NAME.*}/$(PROJECTNAME)/' | sed 's/$${EXECUTABLE_NAME}/$(PROJECTNAME)/' &amp;gt;  $(BUILDDIR)/$(APPFOLDER)/Info.plist
&lt;/pre&gt;
&lt;h3&gt;ssh上传文件至iphone后无法显示图标&lt;/h3&gt;
&lt;p&gt;这个问题比较奇怪，删除iphone.app目录，再kill SpringBoard后会显示出来&lt;/p&gt;
&lt;h3&gt;在iphone上运行直接跳出&lt;/h3&gt;
&lt;p&gt;ssh到iphone的应用目录，直接使用./iphone_运行，报以下错误&lt;/p&gt;
&lt;pre&gt;
2010-03-24 17:04:00.023 iphone_[1281:903] *** Assertion failure in UIApplicationMain(), /SourceCache/UIKit/UIKit-984.38/UIApplication.m:1069
2010-03-24 17:04:00.038 iphone_[1281:903] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Unable to instantiate the UIApplication delegate instance. No class named iphoneAppDelegate is loaded.'
2010-03-24 17:04:00.063 iphone_[1281:903] Stack: (
  853417245,
  845594132,
  852966195,
  872039017,
  817832324,
  8872,
  8572,
  8216
)
terminate called after throwing an instance of 'NSException'
Abort trap
&lt;/pre&gt;
&lt;p&gt;第一个原因是MakeFile中的OBJS没有加入Classes目录下的.m文件，补上以下内容问题解决:&lt;/p&gt;
&lt;pre&gt;
OBJS+=$(patsubst %.m,%.o,$(wildcard $(SRCDIR)/*.m))
&lt;/pre&gt;
&lt;p&gt;还是报相同的错，在注释以下语句后问题解决&lt;/p&gt;
&lt;pre&gt;
#CFLAGS += -x objective-c-header
&lt;/pre&gt;
&lt;h2&gt;debug iphone&lt;/h2&gt;
&lt;p&gt;将应用部署至iphone真机后，出问题时只能通过日志记录的方法进行调试了&lt;br /&gt;
方法是打开syslogd守护进程，将NSLog的内容重定向至系统日志中&lt;/p&gt;
&lt;h2&gt;常用开源框架&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://code.google.com/p/sqlitepersistentobjects/&quot; title=&quot;activerecord&quot;&gt;sqlitepersistentobjects&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://iphoneonrails.com/&quot; title=&quot;activeresource&quot;&gt;object resource&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.cocos2d-iphone.org&quot;&gt;cocos2d&lt;/a&gt;&lt;br /&gt;
cocos2d是开发游戏必备框架，支持物理引擎，碰撞检测&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://code.google.com/p/json-framework/&quot; title=&quot;已包含进object resource&quot;&gt;json framework&lt;/a&gt;&lt;br /&gt;
如需支持上传照片，需要将照片编码为base64字符后使用json上传，具体代码如下&lt;br /&gt;
&lt;pre&gt;&lt;br /&gt;
NSData &lt;strong&gt;photoData = UIImagePNGRepresentation(fragment);&lt;br /&gt;
NSString&lt;/strong&gt; photoString = [photoData base64Encoding];&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;h2&gt;iTunes Connect&lt;/h2&gt;
&lt;p&gt;注意上传binary时要保证Icon.png的大小为57X57pixel&lt;br /&gt;
使用xcode编译时要选择Device Distribution编译,使用模拟器编译上传时会提示签名无效&lt;/p&gt;
&lt;h2&gt;制作iphone app site&lt;/h2&gt;
&lt;p&gt;在heroku中新增app&lt;br /&gt;
加入Custom Domains指定域名,使用Zerigo DNS作为域名解释服务器(即godaddy中的nameserver指向zerigo)&lt;br /&gt;
&lt;a href=&quot;http://www.progressivered.com/cu3er/&quot;&gt;应用cu3er制作幻灯片&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;参考资源&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://www.yifeiyang.net/category/embedded/iphone-embedded/&quot;&gt;易飞扬博客&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.iphonedevfaq.com/index.php?title=Main_Page&quot;&gt;iphone faq&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.fosk.it/how-to-enable-syslog-on-iphone-fw-2x-for-debugging.html&quot;&gt;How to enable Syslog on iPhone fw 2.x for debugging&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.joyiphone.net/MySpace/Icon/PhotoUpload.aspx&quot;&gt;iphone圆角图标制作&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.curioustimes.de/iphonesimulatorcropper/&quot;&gt;iPhone Simulator Cropper&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.jaml.co.uk/simcap.html&quot; title=&quot;截图推荐,支持ipad&quot;&gt;SimCap&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://iphoneincubator.com/blog/debugging/how-to-create-conditional-log-statements-in-xcode&quot;&gt;how to create debug flag&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>Git使用</title>
      <link href="http://saberma.me/git/2010/01/26/git.html"/>
      <updated>2010-01-26T00:00:00+08:00</updated>
      <id>http://saberma.me/git/2010/01/26/git</id>
      <content type="html">&lt;h2&gt;基本概念&lt;/h2&gt;
&lt;h3&gt;存储&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;WorkSpace ==&amp;gt; Git Index ==&amp;gt; Git Local Repository ==&amp;gt; Git Remote Repository&lt;br /&gt;
Git数据在各个存储空间中的迁徙示意图&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;/images/article/git-transport.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;
&lt;h3&gt;submodule&lt;/h3&gt;
&lt;p&gt;主项目中可能需要使用其他项目(比如juggernaut，简称项目B)的功能，将项目B直接拷贝过来当然可行&lt;br /&gt;
但这样的话，项目B以后更新的内容就无法及时更新过来了&lt;/p&gt;
&lt;p&gt;正确的做法应该是把项目B作为主项目的submodule，通过以下语句引入&lt;/p&gt;
&lt;pre&gt;
git submodule add git://github.com/maccman/juggernaut.git vendor/others/juggernaut&lt;/pre&gt;
&lt;h2&gt;常用命令&lt;/h2&gt;
&lt;h3&gt;基本&lt;/h3&gt;
&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;bash&quot;&gt;&lt;span class=&quot;c&quot;&gt;#检查当前修改、新增的文件&lt;/span&gt;
git status 

&lt;span class=&quot;c&quot;&gt;#新增分支，对于大范围的修改，应先使用此命令创建分支&lt;/span&gt;
git checkout -b 分支名

&lt;span class=&quot;c&quot;&gt;#显示所有分支列表，前面有星号的为当前分支&lt;/span&gt;
git branch

&lt;span class=&quot;c&quot;&gt;#切换至另一个分支&lt;/span&gt;
git checkout 分支名

&lt;span class=&quot;c&quot;&gt;#检查修改内容&lt;/span&gt;
git diff
git diff --color

&lt;span class=&quot;c&quot;&gt;#将新增的文件加入版本控制&lt;/span&gt;
git add .

&lt;span class=&quot;c&quot;&gt;#add之后，检查修改内容&lt;/span&gt;
git diff HEAD

&lt;span class=&quot;c&quot;&gt;#提交。也可以使用git commit -a -m &amp;#39;描述&amp;#39;，此命令包含了git add .&lt;/span&gt;
git commit -m &lt;span class=&quot;s1&quot;&gt;&amp;#39;修改内容的描述&amp;#39;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;#使用commit提交本地后，在保证所有测试用例通过的情况下，可以上传至远程版本服务器&lt;/span&gt;
git push
&lt;span class=&quot;c&quot;&gt;#注意，如果别人已经有上传了新的改动至服务器，则应将远程版本同步下来&lt;/span&gt;
git pull
&lt;span class=&quot;c&quot;&gt;#执行后，git会进行自动合并操作，失败的会提示用户手动合并(直接修改文件，并去掉git&amp;lt;&amp;lt;====等冲突标记)&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#将修改过的文件重新commit后上传&lt;/span&gt;
git push

&lt;span class=&quot;c&quot;&gt;#查看某个文件的修改历史&lt;/span&gt;
git log -p app/controllers/grids_controller.rb

&lt;span class=&quot;c&quot;&gt;#获取以前版本的文件&lt;/span&gt;
git checkout 0d7371d574 public/open-flash-chart.swf
&lt;span class=&quot;c&quot;&gt;#0d7371d574为commit号前的n位数值，此值可以通过查看文件的修改历史获取到&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h3&gt;对比差异&lt;/h3&gt;
&lt;pre&gt;
#可视化左右分栏对比
git difftool foo.rb&lt;/pre&gt;
&lt;h3&gt;冲突处理&lt;/h3&gt;
&lt;p&gt;当本地修改的代码与其他人员已提交的代码发生冲突时,git会显示需要手动合并的冲突文件&lt;br /&gt;
我们可以手动打开编辑冲突,当冲突文件多的时候就有点麻烦,其实git为我们提供了批量合并工具&lt;/p&gt;
&lt;pre&gt;
#指定使用vimdiff进行编辑
git mergetool --tool=vimdiff&lt;/pre&gt;
&lt;p&gt;以上命令会依次显示待编辑的窗口,每个窗口分三个子窗口,依次为local,merge,remote文件&lt;br /&gt;
中间子窗口的merge文件就是我们要编辑命令的文件了,其他两个不用修改&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>ArcGIS(Flex+Rest)</title>
      <link href="http://saberma.me/other/2010/01/18/arcgis-rest-flex.html"/>
      <updated>2010-01-18T00:00:00+08:00</updated>
      <id>http://saberma.me/other/2010/01/18/arcgis-rest-flex</id>
      <content type="html">&lt;h2&gt;ArcGIS Server&lt;/h2&gt;
&lt;h3&gt;概述&lt;/h3&gt;
&lt;p&gt;地理信息应用系统的后台服务器使用ArcGIS Server，前端使用Flex，之间运用Rest进行通信&lt;/p&gt;
&lt;h3&gt;安装&lt;/h3&gt;
&lt;p&gt;部署ArcGIS的服务器使用windows2003 server，打上SP2补丁&lt;br /&gt;
在ArcGIS Server 9.3版本的安装光盘中，选择安装ArcGIS Server for the Java Platform&lt;br /&gt;
安装后在开始菜单中的ArcGIS程序组运行Post install，程序会创建几个用户、用户组，并增加相应的SOM、SOC等服务&lt;/p&gt;
&lt;p&gt;注意：&lt;br /&gt;
不用安装.Net Platform&lt;br /&gt;
不要使用administrator替换默认的用户(否则可能会出现权限问题)&lt;/p&gt;
&lt;h3&gt;配置&lt;/h3&gt;
&lt;p&gt;在程序组中打开ArcGIS Server Manager，增加一个服务add new service&lt;/p&gt;
&lt;h3&gt;检查&lt;/h3&gt;
&lt;p&gt;打开浏览器，输入地址:http://localhost:8399/arcgis/rest/&lt;br /&gt;
能正常访问就算成功&lt;/p&gt;
&lt;h2&gt;Flex&lt;/h2&gt;
&lt;h3&gt;安装Flex &lt;span class=&quot;caps&quot;&gt;SDK&lt;/span&gt;&lt;/h3&gt;
&lt;pre&gt;
wget http://download.macromedia.com/pub/flex/sdk/flex_sdk_3.5.zip
unzip flex_sdk_3.5.zip -d /usr/local/flex
wget http://downloads2.esri.com/Support/downloads/ao_/arcgis_api_for_flex_1_3.zip
unzip arcgis_api_for_flex_1_3.zip /ArcGIS_Flex/libs/agslib-1.3-2009-10-31.swc -d /usr/local/flex/frameworks/libs/

#在~/.bashrc中加入
export FLEX_HOME=/usr/local/flex
export PATH=$PATH:$FLEX_HOME/bin

#检查安装是否正确
mxmlc --version
&lt;/pre&gt;
&lt;h2&gt;注意事项&lt;/h2&gt;
&lt;h3&gt;清除Rest缓存&lt;/h3&gt;
&lt;p&gt;如果使用http://arcgishost:8399/arcgis/rest没有看到最新的MapServer&lt;br /&gt;
则需要进入http://192.168.1.47:8399/arcgis/rest/admin,选择Clear Cache Options,单击Clear Cache Now&lt;/p&gt;
&lt;h3&gt;Flash跨域访问&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://bbs.esrichina-bj.cn/ESRI/viewthread.php?tid=37243&quot;&gt;问题描述&lt;/a&gt;&lt;br /&gt;
crossdomain.xml要放在ArcGIS安装目录ArcGIS\java\web_output下&lt;/p&gt;
&lt;h3&gt;Rest中访问tile报404&lt;/h3&gt;
&lt;p&gt;在Map Server的caching中选中create tiles on demand，并且不要选中Allow clients to cache tiles locally&lt;/p&gt;
&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://resources.esri.com/help/9.3/arcgisserver/apis/flex/samples/index.html&quot;&gt;&lt;span class=&quot;caps&quot;&gt;ESRI&lt;/span&gt; Flex Sample&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://bbs.esrichina-bj.cn/ESRI/thread-47413-1-1.html&quot;&gt;ArcGIS RIA背景&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://bbs.esrichina-bj.cn/ESRI/thread-47700-1-1.html&quot;&gt;ArcGIS &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; For Flex基础开发&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://bbs.esrichina-bj.cn/ESRI/thread-48031-1-1.html&quot;&gt;ArcGIS &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; For Flex高级开发&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://webhelp.esri.com/arcgisserver/9.3/java/index.htm#geoprocessing/guide_-1963186772.htm&quot;&gt;制作Geoproccessing示例&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>如何开始rails项目</title>
      <link href="http://saberma.me/rails/2009/12/29/development-skills.html"/>
      <updated>2009-12-29T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/12/29/development-skills</id>
      <content type="html">&lt;p&gt;为了能胜任ruby项目的开发工作，你需要逐步掌握以下技能&lt;/p&gt;
&lt;h2&gt;1.安装操作系统(Linux)&lt;/h2&gt;
&lt;p&gt;经过实践，rails项目可以顺利在windows、linux(Ubuntu)、unix(solaris)下运行&lt;br /&gt;
但推荐使用的平台仍是Linux，所以你至少需要熟悉以下内容&lt;/p&gt;
&lt;h3&gt;安装&lt;/h3&gt;
&lt;p&gt;我们开发环境使用的是Ubuntu，安装后请阅读速配指南了解ubuntu的基本配置&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://wiki.ubuntu.org.cn/articles/i/n/s/Install_Ubuntu_desktop_8.04_a2e3.html&quot;&gt;Ubuntu安装&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://wiki.ubuntu.org.cn/Qref/Hardy&quot;&gt;Ubuntu速配指南&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;熟悉常用命令&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/ckboss/archive/2009/05/03/4144318.asp&quot;&gt;Linux常用命令&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/2009/11/23/linux.html&quot;&gt;常用命令联合使用&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;安装xp虚拟机&lt;/h3&gt;
&lt;p&gt;安装xp虚拟机操作系统是为了使用rtx、使用ie访问项目，具体步骤:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.virtualbox.org/wiki/Linux_Downloads&quot;&gt;安装virtualbox&lt;/a&gt;&lt;br /&gt;
宿主操作系统为&amp;quot;Ubuntu 8.04 LTS&amp;quot;,按电脑的cpu架构选择i386或者AMD的virtualbox安装包&lt;/p&gt;
&lt;p&gt;在virtualbox安装windowns xp精简版&lt;br /&gt;
&lt;a href=&quot;http://www.lupaworld.com/340814/viewspace-139349&quot;&gt;ubuntu下安装xp指南&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;2.熟悉开发工具(Vim)&lt;/h2&gt;
&lt;p&gt;经过对netbean、RadRails、Vim的使用，最终选择了Vim作为我们的IDE&lt;br /&gt;
vim可以让你在开发过程中尽量减少对鼠标的使用，提高编写效率&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/lxrm_fly/archive/2007/08/13/1741206.aspx&quot;&gt;Vim快速入门&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/2009/10/10/vim.html&quot;&gt;Vim安装使用&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;3.了解Ruby&lt;/h2&gt;
&lt;p&gt;你需要知道模块、类、继承等概念&lt;br /&gt;
知道循环，判断等语句&lt;br /&gt;
了解String,File等类的常用方法,知道API可以在哪里查询到&lt;/p&gt;
&lt;p&gt;要不断实践ruby，irb命令是你的最重要的朋友&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.javaeye.com/topic/55826&quot;&gt;二十分钟入门&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/2009/12/18/ruby-tips.html&quot;&gt;Ruby延伸&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://cloud.github.com/downloads/saberma/saberma.github.com/ProgrammingRuby1.9.pdf&quot;&gt;Programming Ruby 1.9&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;4.熟悉Rails&lt;/h2&gt;
&lt;p&gt;你需要知道rails的以下内容:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://biaoming.javaeye.com/blog/36212&quot;&gt;项目的目录结构&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;rails项目中，也是遵循MVC模式的，开发一个功能时，可根据需要选择以下生成器&lt;/p&gt;
&lt;pre&gt;
#看一下有哪些生成器(Installed Generators)
script/generate
#项目中常用以下生成器
#生成控制器、实体、整合(包括控制器、视图、实体)
script/generate rspec_controller
script/generate rspec_model
script/generate rspec_scaffold
&lt;/pre&gt;
&lt;p&gt;url请求将由rails的哪些控制器中的哪些方法进行处理，需要了解&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://blackanger.blog.51cto.com/140924/122055&quot;&gt;route机制&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;出现问题时多查看后台日志&lt;br /&gt;
主要检查由前端页面传递至后台的参数params是否正常&lt;br /&gt;
并检查控制器对数据库进行操作的SQL是否正确&lt;/p&gt;
&lt;pre&gt;
#查看开发环境的日志
tail -f log/development.log
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/l-rubyrails/&quot;&gt;Rails快速入门&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.letrails.cn/archives/rails-2-2-i18n-tutorials/&quot;&gt;I18n国际化&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://cloud.github.com/downloads/saberma/saberma.github.com/Agile_Web_Development_with_Rails.pdf&quot;&gt;Agile Web Development&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://cloud.github.com/downloads/saberma/saberma.github.com/advanced_rails_recipes.pdf&quot;&gt;Advanced Rails Recipes&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;在rails项目中，要遵守［不重复发明轮子］的原则，在开发功能(非业务)前可以先找找&lt;br /&gt;
&lt;a href=&quot;http://ruby-toolbox.com/&quot;&gt;Ruby工具箱&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;要不断实践rails，script/console命令是你的最重要的朋友&lt;/p&gt;
&lt;h2&gt;5.前端技术&lt;/h2&gt;
&lt;p&gt;前端技术中的视图层是采用haml框架生成的，haml代码会转换为html代码，最终在浏览器中显示&lt;br /&gt;
另外包含javascript,css两部分&lt;br /&gt;
在项目中javascript主要使用jQuery框架编写js代码&lt;br /&gt;
css部分使用haml中的sass编写css代码&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.21shipin.com/html/12496.shtml&quot;&gt;html入门_共8小节&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://haml-lang.com/tutorial.html&quot;&gt;haml入门&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.prglab.com/blog/js-tutorial&quot;&gt;javascript入门&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.cainiao8.com/web/css.html&quot;&gt;css入门&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.k99k.com/jQuery_getting_started.html&quot;&gt;jQuery入门&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/2009/09/12/jquery-plugin.html&quot;&gt;jQuery常用插件&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://jsgears.com/thread-402-1-1.html&quot;&gt;jQuery最佳实践之delegate&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://sass-lang.com/tutorial.html&quot;&gt;sass入门&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;6.数据库(Mysql)&lt;/h2&gt;
&lt;p&gt;经过实践，rails项目可以连接Mysql,Oracle,Sqlserver，随时可以进行切换&lt;br /&gt;
在开发时，我们使用Mysql作为本地数据库，所以你至少需要掌握Mysql数据库&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.xingyl.com/?m=blog&amp;amp;id=57&quot;&gt;Mysql入门&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;7.文档数据库(NoSQL)&lt;/h2&gt;
&lt;p&gt;先看看各大NoSQL软件的对比&lt;br /&gt;
&lt;a href=&quot;http://robbin.javaeye.com/blog/524977&quot;&gt;NoSQL数据库探讨之一 － 为什么要用非关系数据库？&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://renial.javaeye.com/blog/684829&quot;&gt;NoSQL介绍及MongoDB入门&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://blog.csdn.net/lolinzhang/archive/2009/07/16/4353699.aspx&quot;&gt;Mongodb入门&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;mongodb最全最好的学习资料是在官网(支持中文但很不全)，上面还有一个TRY IT OUT，可以直接在线学习简单操作&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.mongodb.org/display/DOCS/Ruby+Language+Center&quot;&gt;ruby数据库驱动说明&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果采用NoSQL，则rails中就不能再使用ActiveRecord了，需要要对应的ORM&lt;br /&gt;
推荐使用mongoid，虽然没有mongomapper那么功能全面，好在对rails3的支持更好(率先支持activemodel等)&lt;/p&gt;
&lt;p&gt;mongoid也处于活跃开发期，所以最新资料只能看官网，最稳妥的资料只能看代码了&lt;br /&gt;
&lt;a href=&quot;http://mongoid.org/docs/installation/&quot;&gt;mongoid官方文档&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;基于nosql的开源项目现在还比较少，可以参考刚起步的shopqi&lt;br /&gt;
&lt;a href=&quot;http://github.com/saberma/shopqi&quot;&gt;shopqi网店平台&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;8.测试&lt;/h2&gt;
&lt;p&gt;为保证项目质量，开发过程中需要遵循测试驱动开发&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.lycom.de/past/tags/cucumber&quot;&gt;黄瓜测试入门&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.letrails.cn/archives/20/&quot;&gt;Rspec入门&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;9.版本控制Git和GitHub&lt;/h2&gt;
&lt;p&gt;以上技能掌握后，项目代码就需要进行版本控制及代码托管了&lt;/p&gt;
&lt;p&gt;国内公司一般都是自建代码托管服务器，所用版本控制软件大多使用SVN,&lt;span class=&quot;caps&quot;&gt;VSS&lt;/span&gt;,&lt;span class=&quot;caps&quot;&gt;CVS&lt;/span&gt;&lt;br /&gt;
前两个我倒是用过，但我还是要极力推荐Git&lt;br /&gt;
Git原生支持分布式代码管理(KO &lt;span class=&quot;caps&quot;&gt;VSS&lt;/span&gt;)，直观的冲突处理机制(KO &lt;span class=&quot;caps&quot;&gt;SVN&lt;/span&gt;)&lt;/p&gt;
&lt;p&gt;而基于Git的托管服务器Github，可以说是开源界的改革，使得开源项目真正地开源!&lt;br /&gt;
任何开发者可以直接获取开源代码，或追加功能或打补丁，之后只要按个按钮就可以向原作者请求合并&lt;br /&gt;
当然了，合并之前一般需要开发者编写好测试用例，保证代码的正确，同时不破坏原有功能&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/2010/01/26/git.html&quot;&gt;Git使用&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;如果公司只有svn服务器，折衷的办法就是本地使用git，再远程提交至svn&lt;br /&gt;
&lt;a href=&quot;/2009/09/09/git-to-svn.html&quot;&gt;SVN集中存储&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;其他资源&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;http://thinkvitamin.com/web-design-2/learn-web-design-free-tutorial-videos/&quot;&gt;Learn Web Design&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>ruby入门</title>
      <link href="http://saberma.me/rails/2009/12/18/ruby-tips.html"/>
      <updated>2009-12-18T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/12/18/ruby-tips</id>
      <content type="html">&lt;h2&gt;ruby入门&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://apidock.com/ruby&quot;&gt;Ruby API查询&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.rubular.com&quot;&gt;Ruby 正则表达式查询&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;ruby技巧&lt;/h2&gt;
&lt;h3&gt;字符串转数组&lt;/h3&gt;
&lt;pre&gt;
s = &quot;a=1&amp;amp;b=2&quot;
a = s.split(/&amp;amp;|=/)
#[&quot;a&quot;, &quot;1&quot;, &quot;b&quot;, &quot;2&quot;]
&lt;/pre&gt;
&lt;h3&gt;数组转为哈希&lt;/h3&gt;
&lt;pre&gt;
a = [&quot;a&quot;, &quot;1&quot;, &quot;b&quot;, &quot;2&quot;]
#*号可以将数组中的字符串展开
Hash[*a]
#{&quot;a&quot;=&amp;gt;&quot;1&quot;, &quot;b&quot;=&amp;gt;&quot;2&quot;}
&lt;/pre&gt;
&lt;h3&gt;char的ASCII值&lt;/h3&gt;
&lt;pre&gt;
#ASCII值转为char
120.chr
#char转为ASCII值
'x'.ord
#查看字符串的ASCII值
&quot;love&quot;.chars.map(&amp;amp;:ord)
&lt;/pre&gt;
&lt;h3&gt;字符编码转换&lt;/h3&gt;
&lt;pre&gt;
require 'iconv'
#conv(to, from, str)
Iconv.conv('gb2312', 'utf-8', '中国')
&lt;/pre&gt;
&lt;h3&gt;字符串转换为类&lt;/h3&gt;
&lt;pre&gt;
Kernel.const_get 'Integer'
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;http://www.kuqin.com/rubycndocument/man/addlib/Iconv.html&quot;&gt;Iconv&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>soap客户端</title>
      <link href="http://saberma.me/rails/2009/12/03/ruby-soap-client.html"/>
      <updated>2009-12-03T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/12/03/ruby-soap-client</id>
      <content type="html">&lt;h2&gt;选择&lt;/h2&gt;
&lt;p&gt;ruby带有soap4r的插件，可以用于访问web service服务接口，但不支持basic_auth、WS-Security&lt;br /&gt;
因此选用handsoap作为客户端插件&lt;/p&gt;
&lt;h2&gt;安装&lt;/h2&gt;
&lt;pre&gt;
#curb在window下安装很麻烦，改为指定httpclient
#sudo gem install handsoap curb nokogiri httpclient --no-ri --no-rdoc
sudo gem install handsoap nokogiri httpclient --no-ri --no-rdoc
#如果安装curb过程报cannot find -lcur错误，则运行
sudo apt-get install libcurl4-openssl-dev
&lt;/pre&gt;

&lt;pre&gt;
#environment.rb中加入
config.gem 'handsoap', :lib =&amp;gt; 'handsoap', :source =&amp;gt; &quot;http://gems.github.com&quot;

#curb在window下安装很麻烦，改为指定httpclient，environment.rb中最底部加入
Handsoap.http_driver=:httpclient
&lt;/pre&gt;
&lt;h2&gt;使用&lt;/h2&gt;
&lt;pre&gt;
#生成客户端类
script/generate handsoap http://192.168.1.20:8081/cmis/webService/ciisStatService?wsdl
&lt;/pre&gt;
&lt;p&gt;配置管理员需要配置的地方在这里(用户、密码、接口地址)&lt;/p&gt;
&lt;pre&gt;
#生成的连接地址加入environments/production.rb中
CIIS_USERNAME = 'cogent'
CIIS_PASSWORD = 'cogent'

CIIS_STAT_SERVICE_IMPL_SERVICE_ENDPOINT = {
  :uri =&amp;gt; 'http://192.168.1.20:8081/cmis/webService/ciisStatService',
  :version =&amp;gt; 1
}
&lt;/pre&gt;

&lt;pre&gt;
#script/console
s = Ciis::PopService.find_pop '%'
#获取列表对象
s.list
#获取列表对象中的内容
s.list.first.name
#获取属性值
s.size
&lt;/pre&gt;
&lt;h2&gt;调试&lt;/h2&gt;
&lt;p&gt;使用soapui访问webservice接口，确保服务正常&lt;br /&gt;
为了监控客户端与服务器的交互内容，可使用tcpmon架设代理&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://sourceforge.net/projects/soapui/files/soapui/3.0.1&quot;&gt;soapui&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://tcpmon.dev.java.net&quot;&gt;tcpmon&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://boyun.sh.cn/blog/?p=1076&quot;&gt;soapui简要介绍&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;注意，连接接口时要设置用户名密码，双击某个接口方法的请求(一般为request1)，点击弹出的右边窗口左下方的[Aut]，输入用户名、密码&lt;br /&gt;
然后在Request1窗口中点击右键，选择[Add &lt;span class=&quot;caps&quot;&gt;WSS&lt;/span&gt; Username Token]，会看到请求的xml中增加了用户名、密码&lt;/p&gt;
&lt;h2&gt;问题&lt;/h2&gt;
&lt;pre&gt;
#按照handsoap官方说明无法实现ws-security的访问
#提示Security processing failed (actions mismatch)
#经过尝试，以下调用是成功的
  def on_create_document(doc)
    #register namespaces for the request
    doc.alias 'tns', 'http://ws.stat.wsif.cogent.com/'
    doc.alias 's', 'http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd'
    header = doc.find(&quot;Header&quot;)
    header.add &quot;s:Security&quot; do |s| 
      #增加此节点，否则会报错
      s.add &quot;s:UsernameToken&quot; do |t|                                                                                                                         
        t.add &quot;s:Username&quot;, &quot;cogent&quot;
        t.add &quot;s:Password&quot;, &quot;cogent&quot;
      end 
    end 
  end
&lt;/pre&gt;
&lt;p&gt;［第二个问题］开发环境下报错：ArgumentError: A copy of Ciis::PopService has been removed from the module tree but is still active!&lt;/p&gt;
&lt;pre&gt;
#重现步骤
script/console
  Ciis::PopService.find_pop('%') 
  reload!
  #再次执行报错
  Ciis::PopService.find_pop('%')
&lt;/pre&gt;
&lt;p&gt;产品环境下没问题，但由于开发环境下class会被缓存，而handsoap静态方法引用了实例对象&lt;br /&gt;
在handsoap源代码中发现以下语句&lt;/p&gt;
&lt;pre&gt;
@@instance = {}
def self.instance
  @@instance[self.to_s] ||= self.new
end 
def self.method_missing(method, *args, &amp;amp;block)
  if instance.respond_to?(method)
    instance.__send__ method, *args, &amp;amp;block
  else
    super
  end 
end
&lt;/pre&gt;
&lt;p&gt;因此在开发环境下需要重载instance静态方法&lt;/p&gt;
&lt;pre&gt;
#config/initializers/fixed_handsoap_reload_error.rb
unless development?
  module Handsoap
    class Service
      def self.instance
        self.new
      end 
    end 
  end 
end
&lt;/pre&gt;

&lt;pre&gt;
#测试是否解决问题了
script/console
  #确保每次获取的实例对象不一样
  Ciis::PopService.instance
  Ciis::PopService.instance
&lt;/pre&gt;</content>
    </entry>
  
    <entry>
      <title>Linux常用命令</title>
      <link href="http://saberma.me/linux/2009/11/23/linux.html"/>
      <updated>2009-11-23T00:00:00+08:00</updated>
      <id>http://saberma.me/linux/2009/11/23/linux</id>
      <content type="html">&lt;h2&gt;常用命令&lt;/h2&gt;
&lt;pre&gt;
#执行上次命令
!!&lt;/pre&gt;
&lt;pre&gt;
#进入上次访问的目录
cd -&lt;/pre&gt;
&lt;pre&gt;
#将上一条命令中的 foo 替换为 bar，并执行
^foo^bar&lt;/pre&gt;
&lt;pre&gt;
#快速备份或复制文件
cp filename{,.bak}&lt;/pre&gt;
&lt;pre&gt;
#计算器，直接输入表达式(如1+1)会返回结果(2)
bc&lt;/pre&gt;
&lt;h2&gt;系统的修改文件名和文本内的某个文字&lt;/h2&gt;
&lt;h3&gt;修改文件名&lt;/h3&gt;
&lt;pre&gt;
#看下哪些文件中有要替换的文件名
git status 
#其中issue是原文件名,inspect是用于替换的文件名
sed -i 's/issue/inspect/g' `git status | grep inspect | grep '\.' | awk '{print  $2}'`&lt;/pre&gt;
&lt;h3&gt;替换文本内的文字&lt;/h3&gt;
&lt;pre&gt;
#查看哪些文件下有可能有要修改的文字
ls 
#其中Issue是原文字,Inspect是替换文字, spec是含有Issue的文件
sed -i 's/Issue/Inspect/g' `grep -r -l Issue spec` &lt;/pre&gt;
&lt;pre&gt;
#为所有rb文件添加编码声明
find app -iname '*.rb' | xargs sed -i '1 i\# encoding: utf-8'&lt;/pre&gt;
&lt;h2&gt;脚本自动启动&lt;/h2&gt;
&lt;pre&gt;
sudo cp /etc/init.d/single /etc/init.d/domains
#...修改domains的内容...
sudo update-rc.d domains defaults&lt;/pre&gt;
&lt;h2&gt;进程相关&lt;/h2&gt;
&lt;pre&gt;
#查看当前进程
ps aux
#查看当前进程树
pstree&lt;/pre&gt;
&lt;h2&gt;本机信息&lt;/h2&gt;
&lt;h3&gt;linux版本信息&lt;/h3&gt;
&lt;pre&gt;
cat /etc/issue
uname -a&lt;/pre&gt;
&lt;h3&gt;运行时间&lt;/h3&gt;
&lt;pre&gt;
uptime&lt;/pre&gt;
&lt;h3&gt;显示所有用户的列表&lt;/h3&gt;
&lt;pre&gt;
cat /etc/passwd | cut -f 1 -d :
&lt;/pre&gt;</content>
    </entry>
  
    <entry>
      <title>memcached安装使用</title>
      <link href="http://saberma.me/rails/2009/11/03/memcached.html"/>
      <updated>2009-11-03T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/11/03/memcached</id>
      <content type="html">&lt;h1&gt;安装&lt;/h1&gt;
&lt;pre&gt;
wget http://cloud.github.com/downloads/saberma/saberma.github.com/memcached-1.4.4.tar.gz
tar vxf memcached*.tar.gz 
cd memcached*
#这一步有问题看下一节内容
sudo ./configure
sudo make &amp;amp;&amp;amp; sudo make install

#测试安装结果，有问题看下一节内容
memcached -vv
#出现一堆的调试信息表示正常,CTRL+C退出

#安装ruby客户端memcached-client
sudo gem install memcache-client --no-ri --no-rdoc
&lt;/pre&gt;

&lt;pre&gt;
#configurate时遇到错误则要安装libevent：
checking for libevent directory... configure: error: libevent is required.  You can get it from http://www.monkey.org/~provos/libevent/
#安装libevent
cd ..
wget http://www.monkey.org/~provos/libevent-1.4.12-stable.tar.gz
tar vxf libevent*.tar.gz
cd libevent*
./configure &amp;amp;&amp;amp; sudo make &amp;amp;&amp;amp; sudo make install
cd ../memcached*
&lt;/pre&gt;

&lt;pre&gt;
#memcached -vv报以下错误：
#memcached: error while loading shared libraries: libevent-1.4.so.2: cannot open shared object file: No such file or directory
#执行以下语句
sudo ln -s /usr/local/lib/libevent-1.4.so.2 /lib/
&lt;/pre&gt;
&lt;h1&gt;启动&lt;/h1&gt;
&lt;pre&gt;
#分配20m内存
memcached -d -m 20 -l 127.0.0.1
&lt;/pre&gt;
&lt;h1&gt;测试客户端访问&lt;/h1&gt;
&lt;pre&gt;
irb
require 'rubygems'
require 'memcache'

m = MemCache.new '127.0.0.1'

m.set('key','result',5)
#应该可以看缓存结果

m.get('key')
#5秒后再看，应该返回nil
m.get('key')
&lt;/pre&gt;
&lt;h1&gt;在rails中使用&lt;/h1&gt;
&lt;pre&gt;
#一般用法
#fetch方法会先到memcached中获取数据，获取不到时才会执行User.all生成数据并写入缓存
@list = Rails.cache.fetch(&quot;user_list&quot;){ User.all }
#设置缓存 30分钟后失效
@list = Rails.cache.fetch(&quot;user_list&quot;, :expires_in =&amp;gt; 30.minutes){ User.all }
&lt;/pre&gt;
&lt;h1&gt;结合cache-money&lt;/h1&gt;
&lt;p&gt;cache-money是twitter.com开源的分布式缓存框架，功能强大&lt;br /&gt;
实现读取数据时插件自动写入缓存，数据更新删除更新缓存&lt;br /&gt;
默认使用id缓存，其他字段需要在model中指定要缓存的字段&lt;/p&gt;
&lt;pre&gt;
#用户一般通过User.find_by_login('saberma')方式获取
class User &amp;lt; ActiveRecord::Base
  index :login
end
&lt;/pre&gt;
&lt;h2&gt;安装&lt;/h2&gt;
&lt;pre&gt;
sudo gem install nkallen-cache-money --no-ri --no-rdoc
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/nkallen/cache-money&quot;&gt;cache-money指南&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;配置&lt;/h2&gt;
&lt;pre&gt;
#config/memcached.yml中的ttl用于设置默认过期时间(秒)，默认为1周
#cache-money中设置的过期周期默认为1天，可通过在index方法后增加ttl参数自定义
class User &amp;lt; ActiveRecord::Base
  index :login, :ttl =&amp;gt; 60.minutes
end
&lt;/pre&gt;
&lt;h2&gt;调试&lt;/h2&gt;
&lt;pre&gt;
#可以直接通过模型类获取索引信息
#多少个索引
User.indices.size
#第一个索引的过期周期
User.indices[0].ttl
&lt;/pre&gt;
&lt;h2&gt;统计&lt;/h2&gt;
&lt;pre&gt;
#stats查看命中率等
telnet 127.0.0.1 11211
stats
#查看内存块分配情况
stats slabs
&lt;/pre&gt;
&lt;h1&gt;参考资源&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;http://www.gisblogs.net/post/183.html&quot;&gt;集思博客&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>Vim使用</title>
      <link href="http://saberma.me/vim/2009/10/10/vim.html"/>
      <updated>2009-10-10T00:00:00+08:00</updated>
      <id>http://saberma.me/vim/2009/10/10/vim</id>
      <content type="html">&lt;h2&gt;安装&lt;/h2&gt;
&lt;pre&gt;
sudo apt-get install libncurses-dev ncurses-term
wget ftp://ftp.vim.org/pub/vim/unix/vim-7.2.tar.bz2
tar -xvf vim-7.2.tar.bz2
cd vim72
./configure --enable-multibyte --enable-rubyinterp
sudo make
sudo make install

#安装rails的vim插件
git clone git://github.com/saberma/vimfiles.git ~/.vim
ln -s ~/.vim/vimrc ~/.vimrc
&lt;/pre&gt;
&lt;p&gt;#Mac操作系统下需要安装MacVIM,否则Fuzzy_finder无法使用(原生的vim没有包含ruby)&lt;br /&gt;
Download MacVim. Then, in your ~/.bash_profile type in the following:&lt;br /&gt;
alias vim=”/Applications/MacVim.app/Contents/MacOS/Vim”&lt;/p&gt;
&lt;h2&gt;Vim常用命令&lt;/h2&gt;
&lt;pre&gt;
#打开类似于textmate的查找文件功能,支持目录限制符/
ctrl + t 
#历史文件列表
ctrl + b
#刷新查找时显示的候选文件
\r
#打开浏览器查看Rails帮助
shift + RR
#打开浏览器查看Ruby帮助
shift + RB

#大小写转换
#选中要转换的字符
vw
#转换为大写字母
shift + u
#转换为小写字母
u

#字符串前后增加双引号
ysiw&quot;
#字符串前后双引号改为单引号
cs&quot;'
#去掉字符串前后单引号
ds'
&lt;/pre&gt;

&lt;pre&gt;
#格式化已识别的文件内容
gg=G
&lt;/pre&gt;
&lt;h2&gt;多窗口&lt;/h2&gt;
&lt;p&gt;在Normal模式下，按ctrl+n可以新开一个横向窗口&lt;br /&gt;
在按ctrl+t打开文件列表后，按CTRL+K可以新开一个纵向窗口&lt;/p&gt;
&lt;p&gt;ctrl+w+k可以将焦点切换至向上的窗口,k可以换为h、j、l等控制其他方向&lt;/p&gt;
&lt;p&gt;在打开的文件中，按ctrl+g可以查看文件所在位置&lt;/p&gt;
&lt;h2&gt;Vim的代码片段(snippet)&lt;/h2&gt;
&lt;p&gt;在eclipse中编写java时，输入main按下tab键时，eclipse会自动插入整段main方法&lt;br /&gt;
这就是IDE常用的snippet功能了,VIM当然也是支持的&lt;/p&gt;
&lt;p&gt;进入~/.vim，你会看到snippets目录，这里保存了所有的snippet&lt;br /&gt;
其子目录是文件类型名称，这样就可以区分不同类型文件使用不同的snippet&lt;/p&gt;
&lt;p&gt;里面的文件名称就是snippet的缩写，在文件中按缩写加tab，文件内容就出来了&lt;/p&gt;
&lt;p&gt;你可以定义自己的snippet，比如定义枚举项的snippet&lt;br /&gt;
创建snippets/ruby-rails/aen.snippet,内容如下:&lt;/p&gt;
&lt;pre&gt;
&amp;lt;+ENUM+&amp;gt; = [
  %w{&amp;lt;+内容+&amp;gt; &amp;lt;+内容1+&amp;gt; &amp;lt;+内容2+&amp;gt;}, 
  %w{1        2         3        }
]
&lt;/pre&gt;
&lt;p&gt;在rb文件中输入aen加tab键，看，上面的内容出来了吧，不断按tab可以依次修改&amp;quot;&amp;lt;++&amp;gt;&amp;quot;包含的内容&lt;/p&gt;
&lt;h2&gt;其他&lt;/h2&gt;
&lt;p&gt;当你敲入vim命令进入后，退出vim时不要使用ctrl+z强行终止，这样会产生临时文件&lt;/p&gt;
&lt;p&gt;而应该在normal状态下输入:q回车(:q!回车表示不提示保存直接退出)&lt;/p&gt;
&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://easwy.com/blog/archives/advanced-vim-skills-catalog/&quot;&gt;vim使用进阶&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://xbeta.info/tag/gvim&quot;&gt;善用佳软&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://blog.vgod.tw/wp-content/uploads/2009/12/vim-cheat-sheet-full.png&quot;&gt;vim命令图解&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>Rails常用命令</title>
      <link href="http://saberma.me/rails/2009/09/25/rails-commands.html"/>
      <updated>2009-09-25T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/09/25/rails-commands</id>
      <content type="html">&lt;pre&gt;
# 接调用项目中的类和方法
script/console
  #查看所有的用户
  User.all
  #访问某个地址，用于调试
  app.get '/users'
  app.cookies
  app.flash
  app.request
  app.response
&lt;/pre&gt;

&lt;pre&gt;
# 检查服务器后台运行情况
tail -f log/development.log
&lt;/pre&gt;

&lt;pre&gt;
# 数据库迁移(test)
rake db:migrate RAILS_ENV=test
#数据库回滚3步 
rake db:migrate:redo STEP=3
&lt;/pre&gt;

&lt;pre&gt;
#查看ruby环境
puts '$:'
#查看gem环境
gem environment
gem e
&lt;/pre&gt;

h2. 在View中使用输出字符串

&lt;pre&gt;
#假设在haml中需要调用foo,你使用
- foo do
  hello world
#在foo中需要输出某些字符串，如saberma,则可以利用concat
def foo
  concat 'saberma'
  yield
end
&lt;/pre&gt;

另外,capture也是个好东西:)
&quot;capture api&quot;:http://apidock.com/rails/ActionView/Helpers/CaptureHelper/capture
&quot;concat api&quot;:http://apidock.com/rails/ActionView/Helpers/TextHelper/concat

h2. layout中指定多个yield

&quot;content_for&quot;:http://apidock.com/rails/ActionView/Helpers/CaptureHelper/content_for
</content>
    </entry>
  
    <entry>
      <title>Rails问题集</title>
      <link href="http://saberma.me/rails/2009/09/23/rails-problems.html"/>
      <updated>2009-09-23T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/09/23/rails-problems</id>
      <content type="html">&lt;p&gt;这里记录我遇到的，但在网络上无法找到解决方法的问题&lt;/p&gt;
&lt;h1&gt;undefined method `alias_method_chain&amp;#8217; for I18n::Backend::Simple:Class&lt;/h1&gt;
&lt;p&gt;在将ruby1.8.7p72换成ruby mbari 1.8.7-p72后出现的问题，问题比较隐蔽(2009-09-23)&lt;/p&gt;
&lt;pre&gt;
#运行script/console,报以下错误
/usr/local/lib/ruby/gems/1.8/gems/activerecord-2.3.2/lib/active_record/i18n_interpolation_deprecation.rb:23:NoMethodError: undefined method `alias_method_chain' for I18n::Backend::Simple:Class
&lt;/pre&gt;
&lt;p&gt;经过google,irc后，没有找到解决方法&lt;br /&gt;
最接近问题的就是 &lt;a href=&quot;http://shapingclouds.com/2009/06/11/solution-for-undefined-method-alias_method_chain-after-upgrading-to-rails-2-3-2/&quot;&gt;这篇文章&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;但并不能解决问题，尝试自己解决&lt;/p&gt;
&lt;pre&gt;
#查看i18n_interpolation_deprecation源码发现根本看不出问题
#只发现加载了active_support中的i18n/backend/simple
#因此怀疑active_support加载过程中已经出错了
irb
&amp;gt; require 'rubygems'
&amp;gt; require 'activesupport'
#报以下错误
# LoadError: libruby.so.1.8: cannot open shared object file: No such file or directory - /usr/local/ruby/lib/ruby/1.8/x86_64-linux/bigdecimal.so
#果然,ldd一下
ldd /usr/local/ruby/lib/ruby/1.8/x86_64-linux/bigdecimal.so
# linux-vdso.so.1 =&amp;gt;  (0x00007fff647fe000)
# libruby.so.1.8 =&amp;gt; not found
# libdl.so.2 =&amp;gt; /lib/libdl.so.2 (0x00007f415c1d0000)
# libcrypt.so.1 =&amp;gt; /lib/libcrypt.so.1 (0x00007f415bf97000)
# libm.so.6 =&amp;gt; /lib/libm.so.6 (0x00007f415bd16000)
# libc.so.6 =&amp;gt; /lib/libc.so.6 (0x00007f415b9b4000)
# /lib64/ld-linux-x86-64.so.2 (0x00007f415c5e8000)

#找一下有没有这个文件
find / -iname libruby.so.1.8
# /home/saberma/ruby-1.8.7-p72/libruby.so.1.8
# 在ruby的安装源码包中有这个文件，拷贝至加载路径
cp /home/saberma/ruby-1.8.7-p72/libruby.so.1.8 /usr/lib
# 再次运行script/console，一切顺利
&lt;/pre&gt;</content>
    </entry>
  
    <entry>
      <title>Rails常用插件</title>
      <link href="http://saberma.me/rails/2009/09/14/rails-plugin.html"/>
      <updated>2009-09-14T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/09/14/rails-plugin</id>
      <content type="html">&lt;p&gt;Rails的插件很丰富，并且大部分都放在github，非常方便修改&lt;br /&gt;
这里简单介绍我使用过的Rails插件&lt;/p&gt;
&lt;h1&gt;实体相关&lt;/h1&gt;
&lt;h2&gt;restful_authentication&lt;/h2&gt;
&lt;p&gt;[必备] 生成用户实体，restful登录&lt;br /&gt;
&lt;a href=&quot;http://github.com/technoweenie/restful-authentication&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;mislav-will_paginate&lt;/h2&gt;
&lt;p&gt;[必备] 分页&lt;br /&gt;
&lt;a href=&quot;http://github.com/mislav/will_paginate/tree/&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;annotate_models&lt;/h2&gt;
&lt;p&gt;在实体类文件头部显示字段信息&lt;br /&gt;
&lt;a href=&quot;http://github.com/ctran/annotate_models/tree/&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;paperclip&lt;/h2&gt;
&lt;p&gt;用于上传附件，并可对图片进行缩放(需要imagemagick)&lt;br /&gt;
可对上传的附件进行文件大小的校验&lt;br /&gt;
&lt;a href=&quot;http://github.com/thoughtbot/paperclip&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;ActiveModel&lt;/h2&gt;
&lt;p&gt;特別是实体字段非常多，各个不同阶段需要在页面更新部分字段&lt;br /&gt;
则可以将部分字段放在一个ActiveModel实体中，方便校验&lt;/p&gt;
&lt;p&gt;Rails3已包含ActiveModel插件&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/rails/rails/tree/master/activemodel&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;视图相关&lt;/h1&gt;
&lt;h2&gt;haml&lt;/h2&gt;
&lt;p&gt;[必备] 替换掉rails自带的erb&lt;br /&gt;
此插件可以使得view代码变得非常简洁&lt;br /&gt;
与RedCloth结合就可以使用:textile标记直接格式化了&lt;br /&gt;
&lt;a href=&quot;http://haml-lang.com&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;sass&lt;/h2&gt;
&lt;p&gt;[必备] haml作者的又一力作&lt;br /&gt;
让css代码也变得简洁&lt;br /&gt;
&lt;a href=&quot;http://sass-lang.com&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;bundle-fu&lt;/h2&gt;
&lt;p&gt;[必备] 非常易用，一行代码将js,css多个文件打包&lt;br /&gt;
&lt;a href=&quot;http://github.com/timcharper/bundle-fu&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;jrails&lt;/h2&gt;
&lt;p&gt;用于将rails的prototype替换为jQuery&lt;br /&gt;
&lt;a href=&quot;http://ennerchi.com/projects/jrails&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;calendar_date_select&lt;/h2&gt;
&lt;p&gt;js日期控件&lt;br /&gt;
&lt;a href=&quot;http://github.com/ronald/calendar_date_select&quot;&gt;jquery support&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://github.com/timcharper/calendar_date_select&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://code.google.com/p/calendardateselect/&quot;&gt;home&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;fckeditor&lt;/h2&gt;
&lt;p&gt;富文本编辑器&lt;br /&gt;
&lt;a href=&quot;http://github.com/code/fckeditorp&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://ckeditor.com/demo&quot;&gt;demo&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;super_inplace_controls&lt;/h2&gt;
&lt;p&gt;实现页面输入框即点即编辑&lt;br /&gt;
&lt;a href=&quot;http://os.flvorful.com/super_in_place_controls&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://os.flvorful.com/super_in_place_controls/demo&quot;&gt;demo&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;open-flash-chart2&lt;/h2&gt;
&lt;p&gt;open-flash-chart2的rails接口&lt;br /&gt;
可以生成炫丽的flash图表，简单易用&lt;br /&gt;
&lt;a href=&quot;http://github.com/pullmonkey/open_flash_chart&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://teethgrinder.co.uk/open-flash-chart-2/&quot;&gt;home&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;swf_fu&lt;/h2&gt;
&lt;p&gt;生成swfobject js，用于显示flash&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/marcandre/swf_fu&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;prawn&lt;/h2&gt;
&lt;p&gt;生成PDF，报表&lt;br /&gt;
中文字体最好自己下载仿宋，google simfang.ttf&lt;/p&gt;
&lt;pre&gt;
Prawn::Document.generate(&quot;bug.pdf&quot;) do
  #这一句配置才能支持中文换行，但仍不完善
  text_options.update(:wrap =&amp;gt; :character, :size =&amp;gt; 16)
end
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/sandal/prawn/tree/master&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;sitemap_generator&lt;/h2&gt;
&lt;p&gt;[必备] 生成网站的sitemap&lt;/p&gt;
&lt;pre&gt;
#生成sitemap文件
rake sitemap:refresh:no_ping
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/adamsalter/sitemap_generator-plugin/&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;测试相关&lt;/h1&gt;
&lt;h2&gt;rspec&lt;/h2&gt;
&lt;p&gt;[必备] 替换rails自带的test&lt;br /&gt;
&lt;a href=&quot;http://rspec.info&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;cucumber&lt;/h2&gt;
&lt;p&gt;TDD测试，用于编写可读性强、且可运行的测试用例&lt;br /&gt;
测试网站时依赖webrat&lt;br /&gt;
&lt;a href=&quot;http://cukes.info/&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://github.com/aslakhellesoy/cucumber/tree/&quot;&gt;code&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;selenium-on-rails&lt;/h2&gt;
&lt;p&gt;[必备] 用于验收测试，类似于QTP&lt;br /&gt;
即录制操作过程各个步骤，然后回放&lt;br /&gt;
&lt;a href=&quot;http://seleniumhq.org/projects/on-rails/&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://github.com/paytonrules/selenium-on-rails&quot;&gt;code&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;factory_girl&lt;/h2&gt;
&lt;p&gt;[必备] 替换rails的fixture&lt;br /&gt;
灵活构造关联性的测试数据&lt;br /&gt;
&lt;a href=&quot;http://github.com/thoughtbot/factory_girl/tree/master&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;faker&lt;/h2&gt;
&lt;p&gt;用于生成随机的测试值,不支持中文&lt;br /&gt;
&lt;a href=&quot;http://faker.rubyforge.org/&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;populator&lt;/h2&gt;
&lt;p&gt;结合faker，构造大数量的测试数据，用于性能测试&lt;/p&gt;
&lt;pre&gt;
#填充测试数据
rake db:populate
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;http://gist.github.com/186485&quot;&gt;rake任务&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://github.com/ryanb/populator/tree/master&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;blue-ridge&lt;/h2&gt;
&lt;p&gt;js tdd测试，挺好用的&lt;br /&gt;
由于使用了rhino(a Java-based JavaScript interpreter),所以你需要安装sun-java6-jre&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/relevance/blue-ridge&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;定时相关&lt;/h1&gt;
&lt;h2&gt;javan-whenever&lt;/h2&gt;
&lt;p&gt;ruby语法编写定时任务，再转成cron&lt;br /&gt;
&lt;a href=&quot;http://github.com/javan/whenever/tree/&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;部署相关&lt;/h1&gt;
&lt;h2&gt;capistrano&lt;/h2&gt;
&lt;p&gt;[必备] 远程部署&lt;/p&gt;
&lt;pre&gt;
#查看所有可运行的部署任务
cap -T [search]
#部署
cap deploy
#运行数据库migrate
cap deploy:migrate
#直接运行以上两步
cap deploy:migrations
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;http://www.capify.org&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;deprec&lt;/h2&gt;
&lt;p&gt;用于快速搭建rails服务器生产环境&lt;br /&gt;
运行少量命令就帮我们安装好ruby,rails,各种依赖软件及gems&lt;br /&gt;
&lt;a href=&quot;http://deprec.failmode.com/&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;其他相关&lt;/h1&gt;
&lt;h2&gt;exception_logger&lt;/h2&gt;
&lt;p&gt;异常日志查看，注意只有在production环境下，且非localhost(127.0.0.1)访问时才会生成异常记录&lt;br /&gt;
&lt;a href=&quot;http://github.com/defunkt/exception_logger/tree/master&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;handsoap&lt;/h2&gt;
&lt;p&gt;webservice客户端&lt;br /&gt;
&lt;a href=&quot;/2009-12-03-ruby-soap-client.html&quot;&gt;详细说明&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>jQuery常用插件</title>
      <link href="http://saberma.me/jquery/2009/09/12/jquery-plugin.html"/>
      <updated>2009-09-12T00:00:00+08:00</updated>
      <id>http://saberma.me/jquery/2009/09/12/jquery-plugin</id>
      <content type="html">&lt;p&gt;jQuery的简洁高效，越来越受到程序员的欢迎了&lt;br /&gt;
这里介绍我使用过的jQuery插件&lt;/p&gt;
&lt;h2&gt;jrails&lt;/h2&gt;
&lt;p&gt;jrails不算是一个jquery的插件，而是一个js适配器&lt;br /&gt;
用于将rails自带的js框架prototype，无缝地替换为jQuery&lt;br /&gt;
强烈推荐使用&lt;br /&gt;
&lt;a href=&quot;http://ennerchi.com/projects/jrails&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;facebox&lt;/h2&gt;
&lt;p&gt;实现lightbox功能&lt;br /&gt;
&lt;a href=&quot;http://plugins.jquery.com/project/facebox&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
手动处理：修正跟blueprintcss框架冲突导致facebox边框显示重叠的问题&lt;br /&gt;
&lt;a href=&quot;http://famspam.com/facebox/&quot;&gt;demo&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;times&lt;/h2&gt;
&lt;p&gt;定时器&lt;br /&gt;
&lt;a href=&quot;http://plugins.jquery.com/project/timers&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://jquery.offput.ca/timers/&quot;&gt;demo&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;tooltip&lt;/h2&gt;
&lt;p&gt;title属性指定指示信息显得有点简陋了，用tooltip实现Div层提示&lt;br /&gt;
手动处理：修正在firefox下提示层定位不准的问题&lt;br /&gt;
&lt;a href=&quot;http://flowplayer.org/tools/index.html&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://flowplayer.org/tools/tooltip.html&quot;&gt;demo&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;easy slider&lt;/h2&gt;
&lt;p&gt;内容较大(多行)的情况下，实现滚动显示内容&lt;br /&gt;
手动处理：增加了鼠标移入时暂停滚动，修正滚动至最后一项后不能平滑过渡到第一项的问题&lt;br /&gt;
&lt;a href=&quot;http://cssglobe.com/post/5780/easy-slider-17-numeric-navigation-jquery-slider&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://cssglobe.com/lab/easyslider1.7/03.html&quot;&gt;demo&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Jcrop&lt;/h2&gt;
&lt;p&gt;用于框选图片中的区域，以实现定位或对图片进行裁剪&lt;br /&gt;
&lt;a href=&quot;http://plugins.jquery.com/project/Jcrop&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://deepliquid.com/projects/Jcrop/demos.php&quot;&gt;demo&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;label over&lt;/h2&gt;
&lt;p&gt;一般情况下，输入框旁边都会带上label说明&lt;br /&gt;
在布局较小的情况下，也许你希望输入框内容直接显示说明&lt;br /&gt;
当用户输入内容时，说明内容自动清除，label over就是实现此功能的插件&lt;br /&gt;
&lt;a href=&quot;http://plugins.jquery.com/project/labelover&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://remysharp.com/wp-content/uploads/2007/03/label_over_example.html&quot;&gt;demo&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;ZeroClipboard&lt;/h2&gt;
&lt;p&gt;结合Flash实现跨浏览器复制网页中内容(或当前地址)到剪贴板&lt;br /&gt;
严格来说这个不算jQuery的插件:)&lt;br /&gt;
&lt;a href=&quot;http://code.google.com/p/zeroclipboard/&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;MultiFile&lt;/h2&gt;
&lt;p&gt;实现浏览器多文件上传时，只显示一个文件浏览按钮&lt;/p&gt;
&lt;pre&gt;
#修正删除按钮样式
$.fn.MultiFile.options.STRING.remove = '&amp;lt;a class=&quot;icon-16px-box j-icon i-close&quot;&amp;gt;&amp;amp;nbsp;&amp;lt;/a&amp;gt;';
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;http://www.fyneworks.com/jquery/multiple-file-upload/&quot;&gt;project&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;JQZoom&lt;/h2&gt;
&lt;p&gt;放大查看图片某一部分，网购产品必备&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.mind-projects.it/projects/jqzoom&quot;&gt;project&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.mind-projects.it/projects/jqzoom/demos.php&quot;&gt;demo&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;jCarousellite&lt;/h2&gt;
&lt;p&gt;显示图片组&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.gmarwaha.com/jquery/jcarousellite/index.php&quot;&gt;project&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>svn集中存储</title>
      <link href="http://saberma.me/git/2009/09/09/git-to-svn.html"/>
      <updated>2009-09-09T00:00:00+08:00</updated>
      <id>http://saberma.me/git/2009/09/09/git-to-svn</id>
      <content type="html">&lt;h2&gt;安装&lt;/h2&gt;
&lt;pre&gt;
#git-svn
sudo apt-get install git-svn
&lt;/pre&gt;
&lt;h2&gt;从svn获取源码&lt;/h2&gt;
&lt;pre&gt;
#将原有zbs目录改名为zbs-git
cd ~/Documents
mv zbs zbs-git
git-svn clone https://192.168.1.14/svn/zbs/trunk/1开发库/1.4系统开发 zbs
#会提示要不要永久保留https证书，输入p
#会提示输入您的svn用户名、密码
&lt;/pre&gt;
&lt;h2&gt;后记&lt;/h2&gt;
&lt;pre&gt;
#新建log目录
mkdir log
#创建database.yml文件
cp config/database-example.yml config/database.yml
#自行修改config/database.yml中的数据库用户名和密码
#git-svn clone下来的script无可执行属性
cd zbs
chmod +x script
&lt;/pre&gt;
&lt;h2&gt;使用&lt;/h2&gt;
&lt;pre&gt;
#基本的操作与git原有的一样
git add .
git commit -a -m 'write sth'
#获取最新代码由git pull改为
git svn rebase
#修正冲突过程与git操作不变...
#注意！在发生冲突时，分支会被切换至&quot;无分支&quot;状态
#在修正冲突后，要执行以下语句，以返回原分支
git add .
git rebase --continue
#提交至svn服务器
git svn dcommit
&lt;/pre&gt;
&lt;h2&gt;问题&lt;/h2&gt;
&lt;pre&gt;
git svn dcommit
#提示以下错误
#Committing to https://192.168.1.14/svn/zbs/trunk/1开发库/1.4系统开发 ...
#HTTP Path Not Found: '/svn/zbs/!svn/bc/151/trunk/1' path not found at /usr/bin/git-svn line 450

#google不到原因，也没有解决，后来定位到了重现的方法:
#将一个已经上传到svn服务器的文件改名，上传就会出现上面的错误，比如：
touch foo
git add .
git commit -a -m 'test file'
git svn dcommit
git mv foo foo1
git commit -a -m 'test svn wired problem'
git svn dcommit
#此时就会出现问题了，出现此问题我只能是重新git-svn clone了
#为避免以上问题产生，应将rename操作分解为先拷贝出来，再git rm，然后先提交rm的内容，再add刚才拷贝的新文件
#方法好繁琐，但实在没有其他办法了

#20100419，再次出现以上问题，尝试使用分步上传成功
# 1.恢复被删除的文件
git reset HEAD db/migrate/20100415010835_add_score_to_resource.rb
git checkout db/migrate/20100415010835_add_score_to_resource.rb
# 2.撤消git repository的版本到之前正常的commit
git reset --soft bb066a4283dbbbe278489a091815f887e45037f5
# 3.分步提交
git add spec
git commit -m '测试1'
# 4. 将其他修改的文件存入stash中
git stash
# 5. 提交(正常)
git svn dcommit
# 重复执行3-5步骤，最后再删除之前要删除的文件
git rm db/migrate/20100415010835_add_score_to_resource.rb
&amp;lt;pre&amp;gt;</content>
    </entry>
  
    <entry>
      <title>Rails环境安装</title>
      <link href="http://saberma.me/rails/2009/08/17/rails-environment.html"/>
      <updated>2009-08-17T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/08/17/rails-environment</id>
      <content type="html">&lt;h2&gt;操作系统安装&lt;/h2&gt;
&lt;pre&gt;
#安装ubuntu8.04桌面版(服务器装服务器版)
#之后修改源配置
sudo vi /etc/apt/sources.list

#注意，以下是8.04版本的
#按cG键，删除所有内容，按ctrl+shift+v粘贴以下内容
deb http://mirrors.163.com/ubuntu/ hardy main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ hardy-security main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ hardy-updates main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ hardy-proposed main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ hardy-backports main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ hardy main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ hardy-security main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ hardy-updates main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ hardy-proposed main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ hardy-backports main restricted universe multiverse

#粘贴后按Esc键，再输入:wq，注意是打冒号wq，保存并退出vi
#更新源
sudo apt-get update

#注意如果是9.04的版本，源列表内容如下：
deb http://mirrors.163.com/ubuntu/ jaunty main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ jaunty-security main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ jaunty-updates main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ jaunty-proposed main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ jaunty-backports main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ jaunty main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ jaunty-security main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ jaunty-updates main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ jaunty-proposed main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ jaunty-backports main restricted universe multiverse 
&lt;/pre&gt;
&lt;h2&gt;开发环境安装&lt;/h2&gt;
&lt;pre&gt;
#服务器、开发机都需要以下依赖库
sudo apt-get install ruby libopenssl-ruby1.8 mysql-server mysql-client libmysqlclient15-dev git-core imagemagick nginx ruby1.8-dev
#手动安装 rubygems
wget http://rubyforge.org/frs/download.php/57643/rubygems-1.3.4.tgz
tar -xvf rubygems-1.3.4.tgz
cd rubygems-1.3.4
sudo ruby setup.rb
#添加gem源
gem sources -a http://gems.github.com
gem sources -a http://rubygems.org
  #敲上面命令如果说找不到gem命令，先执行
  sudo ln -s /usr/bin/gem1.8 /usr/bin/gem
#安装webrat的依赖库
sudo apt-get install libxslt1-dev libxml2-dev
#安装rails及其他库
sudo gem install rails --version='2.3.2' --no-ri --no-rdoc
sudo gem install rspec hoe haml thoughtbot-paperclip mislav-will_paginate mysql mongrel mongrel_cluster aslakhellesoy-cucumber webrat javan-whenever ferret acts_as_ferret rmmseg --no-ri --no-rdoc
sudo gem install handsoap httpclient searchlogic awesome-print -no-ri --no-rdoc
#开发机额外安装(xosd-bin及以后的内容都是autotest所需)
sudo apt-get install irb ctags xosd-bin ruby-gnome2 libnotify-dev
sudo gem install rspec-rails ZenTest diff-lcs thoughtbot-factory_girl --no-ri --no-rdoc

#安装日历插件(已安装至项目的plugin目录下)
#sudo gem install calendar_date_select --no-ri --no-rdoc
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;/2009/08/15/rails-oracle.html&quot;&gt;安装Oracle适配器&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/2009/08/15/rails-sqlserver.html&quot;&gt;安装SqlServer适配器&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/2009/11/03/memcached.html&quot;&gt;安装memcache及cache-money&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;为支持测试结果的提示，需要手动安装ruby-libnotify&lt;/p&gt;
&lt;pre&gt;
#需先安装ruby-gnome2 libnotify-dev
wget http://rubyforge.org/frs/download.php/27134/ruby-libnotify-0.3.3.tar.bz2
#进入ruby-libnotify-0.3.3.tar.bz2所在目录
tar -vxf ruby-libnotify-0.3.3.tar.bz2
#参考INSTALL文件执行:
cd ruby-libnotify-0.3.3
ruby extconf.rb
sudo make &amp;amp;&amp;amp; sudo make install
#加入autotest运行结果在右上角任务栏的提示效果图标
git clone git://github.com/saberma/autotest_images.git  ~/.autotest_images
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;https://addons.mozilla.org/en-US/firefox/downloads/latest/60&quot;&gt;安装浏览器开发插件Web Development&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/2009/10/10/vim.html&quot;&gt;安装Vim&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/2009/07/12/rails-search-engine-ferret.html&quot;&gt;安装全文检索Ferret&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;/2009/08/15/rails-sqlserver.html&quot;&gt;安装短信机客户端环境&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;获取svn项目源代码&lt;/h2&gt;
&lt;p&gt;具体内容参考以下内容&lt;br /&gt;
&lt;a href=&quot;/2009/09/09/git-to-svn.html&quot;&gt;svn集中存储&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;del&gt;获取github源代码&lt;/del&gt;&lt;/h2&gt;
&lt;p&gt;此节内容不再使用，改为使用svn集中存储&lt;/p&gt;
&lt;pre&gt;
#注意，如果系统转换成中文的话，Documents名称会被改成[文档]，建议转成中文的时候不要修改目录名
cd ~/Documents
#请使用svn集中存储的说明获取源代码
-git clone git@github.com:cogentsoft/zbs.git  -
cd zbs
#模块化插件不好用，不再使用
-#初始化子模块-
-git submodule init-
-git submodule update-
#修改数据库配置：用户名、密码(注意yml中用户名、密码的值前面要有空格)
vim config/database.yml
#创建数据库
rake db:create:all
rake db:migrate
#使用以下语句启动应用服务器
mongrel_rails start
打开浏览器，输入地址http://localhost:3000，是否看到首页了？
#如果需要进行应用前缀，则这样启动
mongrel_rails start --prefix=/zbs
打开浏览器，输入地址http://localhost:3000/zbs
#或者启动app应用服务器集群，试运行(以下方式启动后，打开的浏览器地址应为http://localhost:4000)
mkdir tmp
mkdir tmp/pids
mongrel_rails cluster::start
&lt;/pre&gt;
&lt;h2&gt;搭建本地测试环境&lt;/h2&gt;
&lt;h3&gt;开启本地开发过程的测试监控&lt;/h3&gt;
&lt;pre&gt;
script/autospec
&lt;/pre&gt;
&lt;h3&gt;运行验收测试&lt;/h3&gt;
&lt;pre&gt;
mongrel_rails cluster::start -d -e test
# rake是rails最常用的命令，可以通过rake --tasks db查看帮助文档，db为要查询的字符串
rake test:acceptance
&lt;/pre&gt;
&lt;h2&gt;mysql常用命令&lt;/h2&gt;
&lt;pre&gt;
# 打开客户端连接Mysql
script/dbconsole -p
  #查看当前状态
  status
  #查看数据库
  show databases;
  #选择数据库
  use zbs_development;
  #查看表
  show tables;
  #查看表结构
  desc user;
&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;span class=&quot;caps&quot;&gt;TODO&lt;/span&gt;:将以上常用命令独立成篇&lt;/p&gt;
&lt;/blockquote&gt;</content>
    </entry>
  
    <entry>
      <title>SQLServer on Rails</title>
      <link href="http://saberma.me/rails/2009/08/15/rails-sqlserver.html"/>
      <updated>2009-08-15T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/08/15/rails-sqlserver</id>
      <content type="html">&lt;h1&gt;安装&lt;/h1&gt;
&lt;h2&gt;安装库&lt;/h2&gt;
&lt;h3&gt;安装unixODBC&lt;/h3&gt;
&lt;pre&gt;
sudo apt-get install unixodbc unixodbc-dev
&lt;/pre&gt;
&lt;h3&gt;安装sqlserver驱动freetds&lt;/h3&gt;
&lt;pre&gt;
cd ~
wget  http://cloud.github.com/downloads/saberma/saberma.github.com/freetds-stable.tgz
tar -vxf freetds-stable.tgz
cd freetds-0.82
./configure --prefix=/usr/local/freetds --sysconfdir=/etc --with-tdsver=8.0
sudo make
sudo make install
&lt;/pre&gt;
&lt;h3&gt;附配置文件内容&lt;/h3&gt;
&lt;pre&gt;
#将config/etc下的文件拷贝至/etc
cd ~/Documents/zbs
sudo cp config/etc/* /etc
&lt;/pre&gt;
&lt;p&gt;配置文件中的内容不需要修改，实际生产环境中才修改/etc/freetds.conf的SQL Server服务器地址&lt;br /&gt;
注意：不要在配置文件中有多余的空格，否则就算配置正确，unixODBC也会报以下奇怪的错误信息&lt;/p&gt;
&lt;pre&gt;
[IM002][unixODBC][Driver Manager]Data source name not found, and no default driver specified
[ISQL]ERROR: Could not SQLConnect
&lt;/pre&gt;
&lt;p&gt;以下为config/etc下的文件内容&lt;/p&gt;
&lt;p&gt;/etc/odbc.ini&lt;/p&gt;
&lt;pre&gt;
[SQL2000DSN]
Driver=FreeTDS
Description=ODBC Connection via FreeTDS                                                                                                                      
Trace=No
Servername=SQL2000HOST
&lt;/pre&gt;
&lt;p&gt;/etc/odbcinst.ini&lt;/p&gt;
&lt;pre&gt;
[FreeTDS]
Description=TDS driver (Sybase/MS SQL)
Driver=/usr/local/freetds/lib/libtdsodbc.so
CPTimeout=
CPReuse=
FileUsage=1
&lt;/pre&gt;
&lt;p&gt;/etc/freetds.conf&lt;/p&gt;
&lt;pre&gt;
[SQL2000HOST]
  host = 192.168.1.13
  port = 1433
  tds version = 8.0 
  client charset = UTF-8
&lt;/pre&gt;
&lt;h3&gt;测试&lt;/h3&gt;
&lt;pre&gt;
#测试是否连接成功,tsql命令在freetds子目录bin下
cd /usr/local/freetds
TDSVER=8.0 bin/tsql -H 192.168.1.13 -U msg -p 1433
#提示你输入密码时，输入msg
#提示1 &amp;gt;，表示正常连接至数据库了,输入exit关闭连接
exit

#测试使用配置文件的方式连接
bin/tsql -S SQL2000HOST -U msg -p 1433
#查看freetds.conf所在位置
bin/tsql -C
&lt;/pre&gt;

&lt;pre&gt;
isql -v SQL2000DSN msg msg
#unixODBC调试命令
#查看unixODBC配置文件所在位置
odbcinst -j
#查看unixODBC已有DSN
odbcinst -q -s
&lt;/pre&gt;
&lt;h2&gt;安装ruby-odbc&lt;/h2&gt;
&lt;pre&gt;
cd ~
wget http://cloud.github.com/downloads/saberma/saberma.github.com/ruby-odbc-0.9996.tar.gz
tar -xvzpf ruby-odbc*gz
cd ruby-odbc*[0-9]*
ruby extconf.rb
sudo make
#如果上面命令出错,报nothing to be done for all , 则执行: make clean
sudo make install
&lt;/pre&gt;
&lt;h2&gt;安装gems&lt;/h2&gt;
&lt;pre&gt;
sudo gem install dbi --version 0.4.0 --no-ri --no-rdoc
sudo gem install dbd-odbc --version 0.2.4 --no-ri --no-rdoc
sudo gem install rails-sqlserver-2000-2005-adapter --no-ri --no-rdoc
&lt;/pre&gt;
&lt;h2&gt;测试&lt;/h2&gt;
&lt;pre&gt;
script/console
#获取tbl_smsendtask表信息,正常的话会返回Msg所有的字段
Msg
#看一下中文显示是否正常
Msg.last
#修改为中文
m = Msg.last
m.update_attribute :SM_Content, '中文字符'
#查看修改是否生效
Msg.all.collect {|m| m.SM_Content}
&lt;/pre&gt;
&lt;h2&gt;配置信息&lt;/h2&gt;
&lt;pre&gt;
#配置企业信息号,短信机系统标识
#或者配置短信内容模板
vim app/models/msg.rb
&lt;/pre&gt;
&lt;h2&gt;定时器&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;http://github.com/javan/whenever/tree/master&quot;&gt;whenever项目&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;
#配置定时器规则
vim config/schedule.rb
#查看定时规则
whenever
#将定时规则写入cron
whenever -w
#重启定时器让定时任务生效
sudo /etc/init.d/cron restart


#用cron执行定时任务时，会找不到oracle库（oracle安装在用户目录下,cron运行时有自己的用户），需要将下面这行
/usr/lib/oracle/10.2.0.3/client/lib/
#添加到 /etc/ld.so.conf 里并执行
sudo ldconfig -v
&lt;/pre&gt;
&lt;h1&gt;参考资料&lt;/h1&gt;
&lt;p&gt;以第一为准&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;http://wiki.rubyonrails.org/database-support/ms-sql&quot;&gt;Rail wiki db support&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.not404.com/Howto_SQL2005_From_RailsOnFedora&quot;&gt;Howto_SQL2005_From_RailsOnFedora&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.freetds.org/userguide/serverthere.htm#SERVERTHERE.TSQL&quot;&gt;FreeTDS排障&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://toolmantim.com/thoughts/getting_rails_talking_to_sqlserver_on_osx_via_odbc&quot;&gt;Getting Rails talking to SQLServer on &lt;span class=&quot;caps&quot;&gt;OSX&lt;/span&gt; via &lt;span class=&quot;caps&quot;&gt;ODBC&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;
注意,使用ODBC Administrator创建User DSN无法连接Datasource的话,尝试一下新增System &lt;span class=&quot;caps&quot;&gt;USDN&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;pre&gt;
#如果isql -v SQL2000DSN1报以下错误
[S1000][unixODBC][FreeTDS][SQL Server]Unable to connect to data source
[01000][unixODBC][FreeTDS][SQL Server]Adaptive Server connection failed
[01000][unixODBC][FreeTDS][SQL Server]Unexpected EOF from the server
#修改/etc/odbc.ini中的TDS Version为TDS_Version(即将空格换为下划线)
&lt;/pre&gt;</content>
    </entry>
  
    <entry>
      <title>Oracle on Rails</title>
      <link href="http://saberma.me/rails/2009/08/15/rails-oracle.html"/>
      <updated>2009-08-15T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/08/15/rails-oracle</id>
      <content type="html">&lt;h1&gt;Oracle on Rails&lt;/h1&gt;
&lt;pre&gt;
#如果生产环境使用Oracle，则需要以下操作
cd ~
#instance client必须
wget http://cloud.github.com/downloads/saberma/saberma.github.com/oracle-instantclient-basic_10.2.0.3-2_i386.deb
sudo dpkg -i oracle-instantclient-basic_10.2.0.3-2_i386.deb
wget http://cloud.github.com/downloads/saberma/saberma.github.com/oracle-instantclient-devel_10.2.0.3-2_i386.deb
sudo dpkg -i oracle-instantclient-devel_10.2.0.3-2_i386.deb
#非必须，sqlplus用于调试是否能正常连接
wget http://cloud.github.com/downloads/saberma/saberma.github.com/oracle-instantclient-sqlplus_10.2.0.3-2_i386.deb
sudo dpkg -i oracle-instantclient-sqlplus_10.2.0.3-2_i386.deb
#设置client路径
export LD_LIBRARY_PATH=/usr/lib/oracle/10.2.0.3/client/lib/
#设置客户端编码(重要！否则会乱码)
export NLS_LANG=AMERICAN_AMERICA.UTF8
#以上参数设置要放于全局设置文件中
echo &quot;export LD_LIBRARY_PATH=/usr/lib/oracle/10.2.0.3/client/lib/&quot; &amp;gt;&amp;gt; ~/.bashrc
echo &quot;export NLS_LANG=AMERICAN_AMERICA.UTF8&quot; &amp;gt;&amp;gt; ~/.bashrc

#测试sqlplus能连接到Oracle服务器
#sqlplus myuser/mypassword@//myserver/mydatabase.mydomain.com
sqlplus zbs_ciis/zbs@//192.168.1.29/orcl
  desc users;
  #正常的话应能返回users表结构

#安装ruby-oci8所需包
sudo apt-get install libaio1
#安装ruby-oci8，注意不能使用sudo，否则无法正常获取LD_LIBRARY_PATH参数
gem install ruby-oci8 --no-ri --no-rdoc --version 1.0.6

#注意,如果是mac平台,则安装ruby-oci8前先定义以下参数,否则mkmf.log会报
#ld: warning: in /usr/local/oracle/instantclient/libclntsh.dylib, file is not of required architecture
#Undefined symbols for architecture i386:
#  &quot;_OCIInitialize&quot;, referenced from:
#    _OCIInitialize$non_lazy_ptr in cc1EmgZD.o
#ld: symbol(s) not found for architecture i386
export ARCHFLAGS=&quot;-arch x86_64&quot;
#一定要注意cpu的类型是intel(32bit?64bit?)还是ppc的,下载时要区分
                                                                                                                                                             
#测试
irb
require 'rubygems'
require 'oci8'
#不报错，则表示直连正常
OCI8.new('ciis', 'ciis', '//192.168.1.29:1521/orcl')

#安装rails数据库适配器
sudo gem install saberma-activerecord-oracle_enhanced-adapter-nvarchar2 --no-ri --no-rdoc
#另外，数据库的IP地址、用户名密码等在config/database.yml中配置
&lt;/pre&gt;
&lt;h1&gt;注意事项&lt;/h1&gt;
&lt;p&gt;migration中定义字段长度(:limit =&amp;gt; 1)时，当长度等于1，oracle-adapter会将相应的实体属性类型设置为boolean&lt;br /&gt;
所以最好将长度设置为1以上的值&lt;/p&gt;
&lt;h1&gt;开发中的Oracle问题&lt;/h1&gt;
&lt;p&gt;1.&lt;br /&gt;
关联查询时的条件字段要明确指定&lt;br /&gt;
碰到的问题为mysql下order by id正常, Oracle报错：OCIError: &lt;span class=&quot;caps&quot;&gt;ORA&lt;/span&gt;-00918: column ambiguously defined&lt;/p&gt;
&lt;p&gt;2.&lt;br /&gt;
`表名`问题&lt;br /&gt;
mysql会给表名外加``(注意不是单引号),手工加条件(如排序: order by `departments`.id)时,mysql正常，Oracle报错： OCIError: &lt;span class=&quot;caps&quot;&gt;ORA&lt;/span&gt;-00911: invalid character&lt;/p&gt;
&lt;p&gt;3.&lt;br /&gt;
级联更新问题&lt;br /&gt;
has_one、has_many如未设置:dependent=&amp;gt;:delete/:delete_all，解除子项关联时，默认会去更新子项的外键为NULL，mysql下没问题，Oracle报错：OCIError: &lt;span class=&quot;caps&quot;&gt;ORA&lt;/span&gt;-01407: cannot update&lt;/p&gt;
&lt;p&gt;4.&lt;br /&gt;
日期问题&lt;br /&gt;
2个短格式(yyyy-mm-dd)日期(一个从数据库取)直接相减求时间差得到相差天数, mysql下正常，oracle下出错, 可以采取date.to_s(:db).to_date的办法解决&lt;/p&gt;
&lt;p&gt;5.&lt;br /&gt;
修改字段&lt;br /&gt;
如果字段值不为空，oracle下不可修改字段类型，mysql下可以，可以用增加临时字段的方式解决。&lt;/p&gt;
&lt;h1&gt;附录&lt;/h1&gt;
&lt;p&gt;/etc/tnsnames.ora 文件内容如下:&lt;/p&gt;
&lt;pre&gt;
db29 =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.1.29)(PORT = 1521))
    )
    (CONNECT_DATA =
      (SERVICE_NAME = orcl)
    )
  )
&lt;/pre&gt;</content>
    </entry>
  
    <entry>
      <title>项目说明</title>
      <link href="http://saberma.me/rails/2009/07/29/rails-project-detail.html"/>
      <updated>2009-07-29T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/07/29/rails-project-detail</id>
      <content type="html">&lt;h2&gt;工作流&lt;/h2&gt;
&lt;pre&gt;
#经考查,工作流引擎ruote是异步机制,无法保证业务实体与待办事项的处于同一事务
#因此,改用自己定义的流程程序
#相关流程代码放置在event.rb中
&lt;/pre&gt;
&lt;h2&gt;枚举值&lt;/h2&gt;
&lt;pre&gt;
#枚举值统一放置在config/initializes/enum.rb中
script/console
#获取&quot;来电目的&quot;,返回值可作为option_for_select方法的参数
&amp;gt;&amp;gt; Enum.aim
=&amp;gt; [[&quot;求助&quot;, &quot;1&quot;], [&quot;投诉&quot;, &quot;2&quot;], [&quot;咨询&quot;, &quot;3&quot;], [&quot;建议&quot;, &quot;4&quot;], [&quot;举报&quot;, &quot;5&quot;], [&quot;其他&quot;, &quot;9&quot;]]
#获取value=1的来电目的
&amp;gt;&amp;gt; Enum.aim 1
=&amp;gt; &quot;求助&quot;
&lt;/pre&gt;
&lt;pre&gt;
#页面调用1
select:
f.select :agree Enum.sf
radio:
f.radio_enum :xingbie, 'sex'
#页面调用2(字段名与枚举类型名相同)
select:
f.select :aim
radio:
f.radio_enum :sex

#查看页面调用
@call.agree_enum_sf
#查看页面调用(字段名与枚举类型名相同)
@call.aim_enum
&lt;/pre&gt;
&lt;h2&gt;多行文本内容查看&lt;/h2&gt;
&lt;pre&gt;
#页面显示时应调用，以支持换行的显示(处理过程、往来记录的不用换行)
=simple_format @conversation.content
&lt;/pre&gt;
&lt;h2&gt;日期格式&lt;/h2&gt;
&lt;pre&gt;
#统一放置在config/initializes/datetime_format.rb中
ActiveSupport::CoreExtensions::Time::Conversions::DATE_FORMATS.merge!(
  :without_year =&amp;gt; &quot;%m-%d %H:%M:%S&quot;
)
#创建时间格式化为&quot;03-23 10:10:10&quot;
created_at.to_s(:without_year)
#注意如果是日期类型的，应将格式放在
ActiveSupport::CoreExtensions::Date::Conversions::DATE_FORMATS.merge!(
  ::short =&amp;gt; &quot;%Y-%m-%d&quot;
)
&lt;/pre&gt;

&lt;pre&gt;
#注意：
#日期在页面显示时，要调用d方法，传入日期
#避免连接Oracle时，显示为英文格式
d conversation.finished_date
&lt;/pre&gt;
&lt;h2&gt;Rails核心方法重载&lt;/h2&gt;
&lt;p&gt;统一放在config/initializers目录下&lt;/p&gt;
&lt;pre&gt;
#对于视图层方法的重构放在view_helper.rb
&lt;/pre&gt;
&lt;h2&gt;防止Form重复提交&lt;/h2&gt;
&lt;p&gt;项目中form提交方式分两种&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;普通提交，提交按钮调用link_to_submit方法，可参考users/new.haml&lt;/li&gt;
	&lt;li&gt;ajax后台提交，提交按钮调用link_to_remote_submit方法，可参考roles/new.haml&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;两个方法都支持参数label，用于指定按钮显示名称，默认为&amp;quot;保存&amp;quot;&lt;br /&gt;
如link_to_submit(:commit)，则显示&amp;quot;提交&amp;quot;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>服务器部署</title>
      <link href="http://saberma.me/rails/2009/07/27/rails-deploy.html"/>
      <updated>2009-07-27T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/07/27/rails-deploy</id>
      <content type="html">&lt;h1&gt;服务器安装配置&lt;/h1&gt;
&lt;pre&gt;
#注意，安装时一定要选上安装openssh
#安装完成后，在开发机ssh远程登录
ssh 202.202.202.202 -l admin_user_name
#修改源
sudo vi /etc/apt/source.slist
#清空内容，加入以下内容
deb http://mirrors.163.com/ubuntu/ hardy main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ hardy-security main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ hardy-updates main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ hardy-proposed main restricted universe multiverse
deb http://mirrors.163.com/ubuntu/ hardy-backports main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ hardy main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ hardy-security main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ hardy-updates main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ hardy-proposed main restricted universe multiverse
deb-src http://mirrors.163.com/ubuntu/ hardy-backports main restricted universe multiverse
#保存后运行
sudo apt-get update
&lt;/pre&gt;
&lt;h1&gt;环境安装&lt;/h1&gt;
&lt;pre&gt;
#在开发机上安装
sudo gem install deprec
#指定服务器IP地址
export HOSTS=202.202.202.202
#修改服务器root密码，新增一个部署专用的用户(自己安装过程中已经新增用户时，以下两步可省)
cap deprec:users:passwd USER=root
cap deprec:users:add USER=root
#配置ssh，以后登录服务器无需密码
cap deprec:ssh:setup_keys
cap deprec:ssh:config_gen
cap deprec:ssh:config
#为服务器安装nginx,mongrel,mysql,ruby,rails
cap deprec:rails:install_stack
#安装mysql数据库
cap deprec:db:install
&lt;/pre&gt;

&lt;pre&gt;
#修改数据库编码
sudo vi /etc/mysql/my.cnf
#在[client]中增加参数
default-character-set=utf8
#在[mysqld]中增加参数
default-character-set=utf8
init_connect    = 'SET NAMES utf8'
#重启mysql
/etc/init.d/mysql restart
&lt;/pre&gt;

&lt;pre&gt;
#先ssh登录服务器，加入github gem source
ssh 202.202.202.202
gem sources -a http://gems.github.com
&lt;/pre&gt;

&lt;pre&gt;
#开发机执行
#下载程序，安装gem插件
cap deploy:setup
#部署程序至服务器
cap deploy
#执行数据库脚本
cap deploy:migrate
&lt;/pre&gt;
&lt;h1&gt;注意事项&lt;/h1&gt;
&lt;p&gt;经测试，deprec当前支持的ubuntu最新版本为8.04&lt;br /&gt;
生产环境下要加一个事件，检查全文检索是否生效(无事件记录时可能不会产生索引文件的问题)&lt;/p&gt;
&lt;h1&gt;故障排除&lt;/h1&gt;
&lt;pre&gt;
#运行cap deprec:users:passwd USER=root，出现以下错误
(Net::SSH::AuthenticationFailed: cogentzbs)
#先将deploy.rb中的set user &quot;cogentzbs&quot;改为服务器超級用户名称，成功运行命令后再改回来
&lt;/pre&gt;
&lt;h1&gt;配置&lt;/h1&gt;
&lt;h1&gt;启动&lt;/h1&gt;
&lt;pre&gt;
#启动全文检索ferret服务
script/ferret_server start --root=. -e production
&lt;/pre&gt;
&lt;h1&gt;参考资料&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;http://www.capify.org&quot;&gt;capistrano官网&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://deprec.failmode.com/documentation/example-tracks/&quot;&gt;deprec指南&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://wiki.rubyonrails.org/database-support/oracle&quot;&gt;oracle连接&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>敏捷开发Selenium</title>
      <link href="http://saberma.me/rails/2009/07/27/agile-selenium.html"/>
      <updated>2009-07-27T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/07/27/agile-selenium</id>
      <content type="html">&lt;p&gt;Selenium作为验收测试工作，非常好用&lt;/p&gt;
&lt;h1&gt;启动selenium测试&lt;/h1&gt;
&lt;pre&gt;
#启动测试环境
mongrel_rails start -e test -d
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;http:/localhost:3000/selenium&quot;&gt;打开测试地址&lt;/a&gt;&lt;br /&gt;
点击右上角的执行按钮，开始测试&lt;/p&gt;
&lt;h1&gt;定位&lt;/h1&gt;
&lt;p&gt;假设有以下DOM元素&lt;/p&gt;
&lt;pre&gt;
&amp;lt;tbody&amp;gt;
  &amp;lt;tr&amp;gt;    
    &amp;lt;td&amp;gt;    
      &amp;lt;a href=&quot;/workitems/580407130/edit&quot; class=&quot;i-submit&quot; name=&quot;deal&quot; title=&quot;处理&quot;&amp;gt;&amp;lt;/a&amp;gt;
    &amp;lt;/td&amp;gt;    
  &amp;lt;/tr&amp;gt;    
  &amp;lt;tr&amp;gt;    
    &amp;lt;td&amp;gt;    
      &amp;lt;a href=&quot;/workitems/612486603/edit&quot; class=&quot;i-submit&quot; name=&quot;deal&quot; title=&quot;处理&quot;&amp;gt;&amp;lt;/a&amp;gt;
    &amp;lt;/td&amp;gt;    
  &amp;lt;/tr&amp;gt;
&amp;lt;/tbody&amp;gt;
&lt;/pre&gt;
&lt;p&gt;要求：测试点击第二个“处理”按钮&lt;/p&gt;
&lt;pre&gt;
#先尝试使用css=a[@title='处理']:nth-child(2)或css=.i-submit:nth-child(2)方式定位
#结果是无法正常定位的，只能定位到第一个，估计是只有a元素是相邻关系时才能使用
#经过实践，最好的定位方式为：
click &quot;name=deal index=2&quot;
#即根据name查找，并过滤出第二个索引的元素
#简写，selenium会先查找id=deal，再查找name=deal
click &quot;deal index=2&quot;
&lt;/pre&gt;
&lt;h1&gt;参考资料&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;http://seleniumhq.org/docs/04_selenese_commands.html&quot;&gt;Selenium commands&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>敏捷开发流程</title>
      <link href="http://saberma.me/rails/agile/2009/07/17/rails-agile.html"/>
      <updated>2009-07-17T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/agile/2009/07/17/rails-agile</id>
      <content type="html">&lt;h2&gt;需求采集&lt;/h2&gt;
&lt;p&gt;所有需求都采集到&amp;quot;PivotalTracker&amp;quot;:http://www.pivotaltracker.com/projects/10357&lt;/p&gt;
&lt;h2&gt;实现需求&lt;/h2&gt;
&lt;h3&gt;获取需求&lt;/h3&gt;
&lt;p&gt;登录&amp;quot;PivotalTracker&amp;quot;:http://www.pivotaltracker.com/projects/10357&lt;br /&gt;
在Icebox中找到分值（优先级较高）的故事，点击Start按钮&lt;/p&gt;
&lt;h3&gt;开启后台测试监控&lt;/h3&gt;
&lt;pre&gt;
#这句也可放在.bashrc中，就不用自己打了
export AUTOFEATURE=true
script/autospec
&lt;/pre&gt;
&lt;h3&gt;定义用户行为（故事）&lt;/h3&gt;
&lt;pre&gt;
script/generate feature user name:string
      #执行结果如下，这样就生成了feature文件和相应的step文件
      exists  features/step_definitions
      create  features/manage_users.feature
      create  features/step_definitions/user_steps.rb
#使用vim编辑feature文件
vim features/manage_users.feature
&lt;/pre&gt;
&lt;p&gt;cucumber支持中文描述用户行为，&lt;br /&gt;
可通过以下查询中文关键字与英语关键字的对应关系&lt;/p&gt;
&lt;pre&gt;
cat /usr/lib/ruby/gems/1.8/gems/aslakhellesoy-cucumber-0.1.99.22/lib/cucumber/languages.yml | grep -A 13 zh-CN
&lt;/pre&gt;
&lt;p&gt;不得不说一下cucumber的step定义,比如有以下feature部分定义&lt;/p&gt;
&lt;pre&gt;
场景: 用户登录
  假如 我在登录页面
  当 我输入用户名为admin
&lt;/pre&gt;
&lt;p&gt;则step定义可以是这样的&lt;/p&gt;
&lt;pre&gt;
当 /我输入(.*)为(.*)/ do |label, value|
  #以下语句可用于调试,显示页面内容
  #puts response.body
  fill_in(label, :with =&amp;gt; value)
end   
&lt;/pre&gt;
&lt;p&gt;页面源码是这样的&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;
&amp;lt;label for='login'&amp;gt;用户名&amp;lt;/label&amp;gt;
&amp;lt;input id=&quot;login&quot; is_focus=&quot;true&quot; name=&quot;login&quot; type=&quot;text&quot; /&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;即fill_in方法会自动去找页面中&lt;label for='login'&gt;用户名&lt;/label&gt;对应的输入框,并且将值输入,&lt;/p&gt;
&lt;pre&gt;
#单独运行feature中的某个scenario
cucumber --language zh-CN features/manage_calling_events.feature -s 更新来电
#查看test日志,以便跟踪测试过程出现的问题
tail -f log/test.log
&lt;/pre&gt;
&lt;h3&gt;编写Rspec单元测试代码&lt;/h3&gt;
&lt;pre&gt;
#生成实体
script/generate rspec_model event phone:string timing:datetime
#打开event_spec.rb编写测试代码

#测试的一般内容为:
#测试是否能够正常保存(加感叹号表示出现错误时抛异常)
Event.create!(@valid_attributes)
#测试记录数变化情况
lambda do
  Call.create!(@valid_attributes)
end.should change(Case, :count).by(1)

#测试数据的准备,所有实体都有对应的fixture,文件名如cases.yml
noise:
  content: 楼下太吵了

#在rspec中调用测试记录
#先在describe Call do下一行定义
fixtures :cases 
#之后就可以这样调用了
cases(:noise)
&lt;/pre&gt;
&lt;h2&gt;验收测试&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://addons.mozilla.org/zh-CN/firefox/downloads/latest/2079/addon-2079-latest.xpi&quot;&gt;安装selenium firefox插件&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://wiki.openqa.org/display/SIDE/SeleniumOnRails&quot; title=&quot;即将rselenese.js的内容粘贴至IDE中&quot;&gt;安装rselenese格式&lt;/a&gt;&lt;/p&gt;
&lt;pre&gt;
#rselenese格式安装详细说明
#在firefox菜单中打开[Tools]-[Selenium IDE]
#在Selenium IDE菜单中打开[Options]-[Options...]-[Formats]
#点击左下角的[Add]
#在Name of the format:中输入rsel
#将下载的rselenese.js的内容粘贴到文本框中
#点击右下角的[OK]按钮保存，退出
&lt;/pre&gt;

&lt;pre&gt;
#每次手动测试时，都打开firefox菜单Tools=&amp;gt;Selenium IDE
#录制测试脚本后，以rsel格式保存至spec/selenium/中的某个子目录(如admin)
#运行以下语句，系统打开浏览器，自动运行测试脚本
mongrel_rails start -e test -d
rake test:acceptance
#注意，如果测试过程需要修改程序代码，则修改后要重启服务器，修改rsel除外
mongrel_rails restart
&lt;/pre&gt;
&lt;h2&gt;代码覆盖率&lt;/h2&gt;
&lt;h3&gt;应经常查看测试代码的覆盖情况&lt;/h3&gt;
&lt;pre&gt;
#安装rcov
sudo gem install spicycode-rcov --no-ri --no-rdoc
#运行rspec rake
rake spec:rcov
#查看报告
firefox coverage/index.html
#之后就补充测试代码了
&lt;/pre&gt;
&lt;h2&gt;常用测试策略&lt;/h2&gt;
&lt;ol&gt;
	&lt;li&gt;数据库记录正常保存,则记录数会加1&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;结对编程&lt;/h2&gt;
&lt;p&gt;利用ssh,screen,vim实现结对编程&lt;/p&gt;
&lt;pre&gt;
#screen配置文件，以支持256color
wget http://saberma.github.com/file/dot/screenrc -O ~/.screenrc

#安装autossh，避免ssh闲时等待过长自动断开连接
sudo apt-get install autossh
#下载rscreen脚本,调用autossh登录后直接运行screen
wget http://saberma.github.com/file/bin/rscreen -O /usr/local/bin/rscreen
sudo chmod a+x /usr/local/bin/rscreen

#测试一下
screen -xR
vim
#另开一个terminal
rscreen localhost
#会看到两个terminal显示相同vim
&lt;/pre&gt;
&lt;h2&gt;其他&lt;/h2&gt;
&lt;p&gt;在测试用例,单元测试都通过,而手动测试出现错误的时候,一定不能直接修正&lt;br /&gt;
应该先补充测试,让测试失败,再修正问题&lt;/p&gt;
&lt;p&gt;出现疑难问题时，为便于相互协作，可通过ssh远程连至问题机后直接操作&lt;/p&gt;
&lt;pre&gt;
#问题机安装ssh服务
sudo apt-get install openssh-server
#其他机连接问题机(ip为191,用户名为saberma)
ssh 192.168.1.191 -l saberma
#输入密码
&lt;/pre&gt;
&lt;h1&gt;参考资料&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;http://release.seleniumhq.org/selenium-core/0.8.0/reference.html&quot;&gt;Selenium Reference&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.w3.org/TR/2001/CR-css3-selectors-20011113/&quot;&gt;Selectors&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>全文检索Ferret</title>
      <link href="http://saberma.me/rails/2009/07/12/rails-search-engine-ferret.html"/>
      <updated>2009-07-12T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/07/12/rails-search-engine-ferret</id>
      <content type="html">&lt;h1&gt;全文检索(Ferret)&lt;/h1&gt;
&lt;p&gt;由于sphinx只能支持mysql数据库，所以只能采用其他全文检索方案了&lt;br /&gt;
(sphinx新版本0.9.9rc2是支持odbc连接oracle的，但coreseek的中文分词补丁只支持0.9.9rc1，而且thinking-sphinx也不支持oracle-adapter)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;全文检索引擎采用:ferret&lt;/li&gt;
	&lt;li&gt;中文分词:rmmseg&lt;/li&gt;
	&lt;li&gt;Rails调用引擎的插件:act_as_ferret&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;项目下安装&lt;/h1&gt;
&lt;pre&gt;
#安装gem 
sudo gem install ferret acts_as_ferret rmmseg --no-ri --no-rdoc
#成功运行上面命令之后，接下来的内容可以不用操作了
&lt;/pre&gt;
&lt;h1&gt;安装详细过程&lt;/h1&gt;
&lt;pre&gt;
#测试
echo &quot;敏捷开发流程&quot; | rmmseg
#修改environment.rb
#在enviroment.rb中插入
config.gem 'acts_as_ferret'
config_gem 'rmmseg'
require 'rmmseg/ferret'
#生成ferret_server运行脚本
aaf_install
#运行生产环境下的ferret服务器，避免多线程同步访问索引的问题
script/ferret_server start --root=. -e production
&lt;/pre&gt;
&lt;h1&gt;使用&lt;/h1&gt;
&lt;pre&gt;
#进入控制台
script/console
#查询
Conversation.find_with_ferret '26741022'
#通过fixture加载数据不会被索引，因此，加载后应重建索引
Conversation.rebuild_index
#与查询
Conversation.find_with_ferret '26741022 深圳'
#或查询(OR大写)
Conversation.find_with_ferret '26741022 OR 深圳'
&lt;/pre&gt;
&lt;h1&gt;其他&lt;/h1&gt;
&lt;pre&gt;
#查看日志
tail -f log/acts_as_ferret.log
#查看索引(目录test可以替换为其他环境,如development)
ferret-browser index/test/conversation/
#然后在浏览器中访问http://localhost:3301
&lt;/pre&gt;
&lt;h1&gt;参考资料&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;http://wtb.javaeye.com/blog/185419&quot;&gt;ferret+acts_as_ferret+RMMSeg全文索引+中文分词的使用&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://rmmseg.rubyforge.org/&quot;&gt;rmmseg homepage&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://hi.baidu.com/%D0%C7203/blog/item/1ab899887805d197a5c2725f.html&quot;&gt;acts_as_ferret中文教程[Rails全文检索插件]&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
    <entry>
      <title>全文检索Sphinx</title>
      <link href="http://saberma.me/rails/2009/07/11/rails-search-engine-sphinx.html"/>
      <updated>2009-07-11T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/07/11/rails-search-engine-sphinx</id>
      <content type="html">&lt;p&gt;&lt;a href=&quot;http://saberma.github.com/2009/07/12/rails-search-engine-ferret.html&quot;&gt;参考全文检索Ferret&lt;/a&gt;&lt;br /&gt;
以下内容不再使用&lt;/p&gt;
&lt;h1&gt;技术概览&lt;/h1&gt;
&lt;ul&gt;
	&lt;li&gt;全文检索引擎采用:sphinx(0.9.8rc2)&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;中文分词:libmmseg(0.7.3)&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;Rails调用引擎的插件:thinking-sphinx(0.9.5)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;注意,当前使用的thinking-sphinx与官方的不一样,增加了中文分词的配置,修正delta index无法自动更新的问题&lt;/p&gt;
&lt;h1&gt;安装&lt;/h1&gt;
&lt;h2&gt;libmmseg&lt;/h2&gt;
&lt;pre&gt;
sudo apt-get install g++
cd ~
wget http://cloud.github.com/downloads/saberma/saberma.github.com/mmseg-0.7.3.tar.gz
tar zxvf mmseg-0.7.3.tar.gz 
cd mmseg-0.7.3 
./configure
make
sudo make install

#安装ruby扩展
cd ruby
cp /usr/local/include/mmseg/*.h .   
cp ../src/*.h .   
cp ../src/css/*.h .   
ruby extconf.lin.rb
make
sudo make install

注意:如果在这一步出错,且出错提示为：
css/UnigramCorpusReader.cpp:89: error: ’strncmp’ was not declared in this scope
则需手工编辑.src/css目录下UnigramCorpusReader.cpp 文件,在其第一行加上
#include &amp;lt;string.h&amp;gt;
然后重新 make,即可通过
&lt;/pre&gt;
&lt;p&gt;注:已生成的词库uni.lib放在项目的lib目录下(值班室项目已经放置此文件了)&lt;/p&gt;
&lt;h2&gt;sphinx&lt;/h2&gt;
&lt;pre&gt;
#&quot;下载sphinx&quot;
cd ~
wget http://cloud.github.com/downloads/saberma/saberma.github.com/sphinx-0.9.8-rc2.tar.gz
tar zxvf sphinx-0.9.8-rc2.tar.gz 
cd sphinx-0.9.8-rc2 
sudo apt-get install patch
#下载中文补丁
wget http://cloud.github.com/downloads/saberma/saberma.github.com/sphinx-0.98rc2.zhcn-support.patch 
patch -p1 &amp;lt; sphinx-0.98rc2.zhcn-support.patch 
#下载防crash补丁
wget http://cloud.github.com/downloads/saberma/saberma.github.com/fix-crash-in-excerpts.patch
patch -p1 &amp;lt; fix-crash-in-excerpts.patch 

./configure
make 
sudo make install

注意：如果在这一步出现
/usr/local/include/mmseg/freelist.h:22: error: ‘strlen’ was not declared in this scope
的错误，手工修改 /usr/local/mmseg/include/mmseg/freelist.h
在上面添加
#include &amp;lt;string.h&amp;gt;
&lt;/pre&gt;
&lt;h2&gt;安装thinking-sphinx&lt;/h2&gt;
&lt;p&gt;(此步骤已经集成进［Rails说明］中［获取源代码］一节，不需要再独立执行)&lt;/p&gt;
&lt;pre&gt;
git submodule init
git submodule update
&lt;/pre&gt;
&lt;p&gt;如果安装时报错，按以下步骤处理&lt;br /&gt;
&lt;pre&gt;&lt;br /&gt;
#删除.gitmodules,.git/config中的submodule配置&lt;br /&gt;
#删除thinking-sphinx目录&lt;br /&gt;
git rm &amp;#8212;cached vendor/plugins/thinking-sphinx&lt;br /&gt;
sudo rm -r vendor/plugins/thinking-sphinx&lt;br /&gt;
git submodule add -b v0.9.5chinese git://github.com/saberma/thinking-sphinx.git vendor/plugins/thinking-sphinx&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;h1&gt;启动引擎&lt;/h1&gt;
&lt;p&gt;(此步骤应在［Rails说明］中［获取源代码］之后操作)&lt;/p&gt;
&lt;pre&gt;
#生成sphinx配置文件
rake ts:config
#建立索引
rake ts:index
#启动引擎
rake ts:start
&lt;/pre&gt;
&lt;h1&gt;测试引擎&lt;/h1&gt;
&lt;p&gt;(此步骤应在［Rails说明］中［获取源代码］之后操作)&lt;/p&gt;
&lt;pre&gt;
script/console
c = Call.last
c.callnumber = '13911112222'
c.save
#可以看到后台输出更新delta index
Sphinx 0.9.8-rc2 (r1234)
Copyright (c) 2001-2008, Andrew Aksyonoff
using config file '/home/mahb/Documents/zbs/config/development.sphinx.conf'...
indexing index 'call_delta'...&quot;防crash补丁&quot;:http://www.coreseek.com/uploads/sources/fix-crash-in-excerpts.patch 
collected 1 docs, 0.0 MB
sorted 0.0 Mhits, 100.0% done
total 1 docs, 31 bytes
total 0.031 sec, 1014.20 bytes/sec, 32.72 docs/sec
rotating indices: succesfully sent SIGHUP to searchd (pid=5812)
#开始查询
Call.search '13911112222'
#这时可以看到相应的记录
&lt;/pre&gt;
&lt;h1&gt;使用说明&lt;/h1&gt;
&lt;p&gt;&lt;a href=&quot;http://ts.freelancing-gods.com/usage.html&quot;&gt;参考资料&lt;/a&gt;&lt;br /&gt;
&lt;pre&gt;&lt;br /&gt;
#或参考call.rb&lt;br /&gt;
&lt;/pre&gt;&lt;/p&gt;
&lt;h1&gt;相关参考资料&lt;/h1&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.kuqin.com/searchengine/20080525/8886.html&quot;&gt;使用libmmseg实现Ruby的中文分词功能&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.coreseek.com/forum/index.php?action=vthread&amp;amp;forum=2&amp;amp;topic=17&quot;&gt;Rails程序员Sphinx中文全文检索安装指南&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content>
    </entry>
  
    <entry>
      <title>性能分析</title>
      <link href="http://saberma.me/rails/2009/06/30/rails-performance.html"/>
      <updated>2009-06-30T00:00:00+08:00</updated>
      <id>http://saberma.me/rails/2009/06/30/rails-performance</id>
      <content type="html">&lt;h2&gt;异常分析&lt;/h2&gt;
&lt;p&gt;采用exception_logger记录异常信息&lt;br /&gt;
在production环境下，可以访问/exceptions查看异常&lt;/p&gt;
&lt;p&gt;exception_logger需要will_paginate,RedCloth gems&lt;/p&gt;
&lt;h2&gt;性能分析&lt;/h2&gt;
&lt;h3&gt;服务器IO性能&lt;/h3&gt;
&lt;pre&gt;
#使用iostat进行分析
sudo apt-get install sysstat
iostat -x 1 10
&lt;/pre&gt;

&lt;pre&gt;
#查看磁盘剩余空间
df -h
#查看当前目录大小
du -ch --max-depth=1
&lt;/pre&gt;
&lt;h3&gt;Web端分析&lt;/h3&gt;
&lt;p&gt;分析哪些action经常被访问等方面&lt;br /&gt;
使用request_log_analyzer gem&lt;/p&gt;
&lt;pre&gt;
#查看分析报表
request_log_analyzer log/production.log
&lt;/pre&gt;
&lt;h3&gt;内存使用情况&lt;/h3&gt;
&lt;pre&gt;
#查看内存剩余
free -m
#当前内存详情
cat /proc/meminfo
&lt;/pre&gt;
&lt;h3&gt;数据库分析&lt;/h3&gt;
&lt;pre&gt;
#利用mytop查看mysql负载
sudo apt-get install mytop
mytop -uroot -p
&lt;/pre&gt;
&lt;h1&gt;参考资料&lt;/h1&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.php-oa.com/2009/02/03/iostat.html&quot;&gt;iostat来对linux硬盘IO性能进行了解&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://qianjigui.javaeye.com/blog/387070&quot;&gt;网站优化之系统瓶颈查找&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&quot;http://www.pixellatedvisions.com/2009/03/25/rails-on-oracle-part-1-installing-the-oracle-instant-client-on-mac-os-x&quot;&gt;install the oracle instant client on Mac OS X&lt;/a&gt;&lt;/p&gt;</content>
    </entry>
  
</feed>
